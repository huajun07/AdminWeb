(this.webpackJsonpadminweb2=this.webpackJsonpadminweb2||[]).push([[0],{371:function(e,t,c){},372:function(e,t,c){},557:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),r=c(18),s=c.n(r),i=c(8),o=c(7),l=c(1),j={auth:!0,user:"admin",toggled:!1},u=Object(n.createContext)(j),d=u.Provider,b=function(e){var t=e.children,c=Object(n.useReducer)((function(e,t){switch(t.type){case"setAuth":return Object(i.a)(Object(i.a)({},e),{},{auth:t.value});case"setUser":return Object(i.a)(Object(i.a)({},e),{},{user:t.value});case"setToggled":return Object(i.a)(Object(i.a)({},e),{},{toggled:!e.toggled});default:throw new Error}}),j),a=Object(o.a)(c,2),r=a[0],s=a[1];return Object(l.jsx)(d,{value:{state:r,dispatch:s},children:t})},h=c(248),O=c(167),p=c(196),x=c(193),f=(c(369),c(370),c(371),c(372),c(5)),m=c.n(f),g=c(10),v=c(48),y=(c(374),c(600)),w=c(636),N=c(639),C=c(628),S=c(29),T=c(310),D=c.n(T),I=c(309),P=c.n(I),k=c(311),G=c.n(k),M=c(312),R=c.n(M),L=c(313),A=c.n(L),E=c(314),q=c.n(E),F=c(305),H=c.n(F),J=c(316),V=c.n(J),z=c(601),B=c(635),Y=c(640),U=new B.a,W="default-alert",X={onAlert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W;return U.asObservable().pipe(Object(Y.a)((function(t){return t&&t.id===e})))},success:function(e,t){_(Object(i.a)(Object(i.a)({},t),{},{type:K,message:e}))},error:function(e,t){_(Object(i.a)(Object(i.a)({},t),{},{type:Q,message:e}))},info:function(e,t){_(Object(i.a)(Object(i.a)({},t),{},{type:Z,message:e}))},warn:function(e,t){_(Object(i.a)(Object(i.a)({},t),{},{type:$,message:e}))},alert:_,clear:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W;U.next({id:e})}},K="success",Q="danger",Z="info",$="warning";function _(e){e.id=e.id||W,U.next(e)}var ee="http://34.87.50.188:8000/api/router",te=function(){var e=Object(g.a)(m.a.mark((function e(t){var c,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(c=e.sent,t.ok){e.next=6;break}return n=c&&c.content||t.status,e.abrupt("return",Promise.reject(n));case 6:return e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getTable",content:{objName:"project",columns:e}})};return fetch(ee,t).then(te)},ne=function(e,t){var c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getTable",content:{objName:"accessRule",columns:t,filters:{projectID:e}}})};return fetch(ee,c).then(te)},ae=function(e,t){var c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getTable",content:{objName:"gate",columns:t,filters:{projectID:e}}})};return fetch(ee,c).then(te)},re=function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getProject",content:{projectID:e}})};return fetch(ee,t).then(te)},se=function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"deleteProject",content:{projectID:e}})};return fetch(ee,t).then(te)},ie=function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getGate",content:{gateID:e}})};return fetch(ee,t).then(te)},oe=function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"deleteGate",content:{gateID:e}})};return fetch(ee,t).then(te)},le=function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"deleteDevice",content:{deviceID:e}})};return fetch(ee,t).then(te)},je=function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getObjectTypes",content:{objName:e}})};return fetch(ee,t).then(te)},ue=function(){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getWhitelistTags"})};return fetch(ee,e).then(te)},de=function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"deleteAccessRule",content:{accessRuleID:e}})};return fetch(ee,t).then(te)},be=function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"deleteWhitelistEntry",content:{recordID:e}})};return fetch(ee,t).then(te)};function he(){var e=Object(n.useContext)(u),t=e.dispatch,c=e.state,a=c.toggled,r=c.user,s=Object(S.g)(),i=function(e){console.log("clicked",e),s.push(e)};return Object(l.jsxs)("div",{className:"h-100 fixed-top clickThrough",children:[Object(l.jsx)(v.c,{className:"clickAble navbar-default navbar-static-top sideBar",collapsed:a,width:"250px",children:Object(l.jsx)(v.d,{children:Object(l.jsxs)(v.a,{iconShape:"circle",children:[Object(l.jsx)(v.b,{style:{background:"#2c3b41",height:"60px","pointer-events":"none"},className:"d-flex justify-content-center align-items-center",children:Object(l.jsx)("div",{style:{"padding-top":"10px",color:"white"},children:Object(l.jsx)("h5",{children:"Admin"})})}),Object(l.jsx)(v.b,{icon:Object(l.jsx)(H.a,{fontSize:"large"}),style:{"pointer-events":"none","border-bottom":"1px solid gray"},children:Object(l.jsxs)("div",{style:{color:"white"},children:["Welcome, ",r]})}),Object(l.jsx)(v.b,{icon:Object(l.jsx)(P.a,{onClick:function(){return i("/home")}}),children:Object(l.jsx)("div",{onClick:function(){return i("/home")},children:"Home"})}),Object(l.jsx)(v.b,{icon:Object(l.jsx)(D.a,{onClick:function(){return i("/project")}}),children:Object(l.jsx)("div",{onClick:function(){return i("/project")},children:"Project"})}),Object(l.jsx)(v.b,{icon:Object(l.jsx)(G.a,{onClick:function(){return i("/regex")}}),children:Object(l.jsx)("div",{onClick:function(){return i("/regex")},children:"Plate Regex"})}),Object(l.jsx)(v.b,{icon:Object(l.jsx)(R.a,{onClick:function(){return i("/records")}}),children:Object(l.jsx)("div",{onClick:function(){return i("/records")},children:"Exit/Entry Records"})}),Object(l.jsx)(v.b,{icon:Object(l.jsx)(A.a,{onClick:function(){return i("/parking")}}),children:Object(l.jsx)("div",{onClick:function(){return i("/parking")},children:"Parking Records"})}),Object(l.jsxs)(v.e,{title:"Access",icon:Object(l.jsx)(q.a,{}),children:[Object(l.jsx)(v.b,{onClick:function(){return i("/accessRules")},children:"Access Rules"}),Object(l.jsx)(v.b,{onClick:function(){return i("/whitelist")},children:"Whitelist Entries"})]})]})})}),Object(l.jsxs)(w.a,{bg:"light",variant:"light",expand:"lg",className:"clickAble navBar"+(a?" navBar-collapsed":" navBar-expand"),children:[Object(l.jsx)(w.a.Brand,{className:"sideBar",onClick:function(){t({type:"setToggled"})},children:Object(l.jsx)(y.a,{})}),Object(l.jsx)(w.a.Toggle,{"aria-controls":"basic-navbar-nav",className:"nav-dropdown"}),Object(l.jsx)(w.a.Collapse,{id:"basic-navbar-nav",children:Object(l.jsxs)(N.a,{className:"mr-auto nav-dropdown",children:[Object(l.jsx)(N.a.Link,{children:Object(l.jsx)("div",{onClick:function(){return i("/home")},children:"Home"})}),Object(l.jsx)(N.a.Link,{children:Object(l.jsx)("div",{onClick:function(){return i("/project")},children:"Project"})}),Object(l.jsx)(N.a.Link,{children:Object(l.jsx)("div",{onClick:function(){return i("/regex")},children:"Plate Regex"})}),Object(l.jsx)(N.a.Link,{children:Object(l.jsx)("div",{onClick:function(){return i("/records")},children:"Exit/Entry Records"})}),Object(l.jsx)(N.a.Link,{children:Object(l.jsx)("div",{onClick:function(){return i("/parking")},children:"Parking Records"})}),Object(l.jsxs)(C.a,{title:"Dropdown",id:"basic-nav-dropdown",children:[Object(l.jsx)(C.a.Item,{"data-value":"/home",onClick:i,children:"Action"}),Object(l.jsx)(C.a.Item,{href:"#action/3.2",children:"Another action"}),Object(l.jsx)(C.a.Item,{href:"#action/3.3",children:"Something"}),Object(l.jsx)(C.a.Divider,{}),Object(l.jsx)(C.a.Item,{href:"#action/3.4",children:"Separated link"})]})]})}),Object(l.jsxs)(w.a.Collapse,{className:"justify-content-end",children:[Object(l.jsx)(z.a,{onClick:function(){},children:Object(l.jsx)(V.a,{})}),Object(l.jsx)(w.a.Text,{children:Object(l.jsx)(N.a.Link,{onClick:function(){t({type:"setAuth",value:!1}),t({type:"setUser",value:""}),s.push("/")},children:"Signout"})})]})]})]})}var Oe=c(631),pe=c(315);function xe(e){var t=e.toggleModal,c=e.success,n=e.hide,a=e.body,r=e.title;return Object(l.jsxs)(Oe.a,{show:n,onHide:t,children:[Object(l.jsx)(Oe.a.Header,{closeButton:!0,children:Object(l.jsx)(Oe.a.Title,{children:r})}),Object(l.jsx)(Oe.a.Body,{children:a}),Object(l.jsxs)(Oe.a.Footer,{children:[Object(l.jsx)(pe.a,{variant:"secondary",onClick:t,children:"Cancel"}),Object(l.jsx)(pe.a,{variant:"primary",onClick:function(){c()},children:"Confirm"})]})]})}var fe=c(632);var me=c(16),ge=c(602),ve=c(603),ye=c(317);function we(e){var t=e.hide,c=e.gateID,a=e.toggleModal,r=e.success,s=e.deviceID,j=e.deviceTypes,u=Object(n.useState)(!1),d=Object(o.a)(u,2),b=d[0],h=d[1],O=Object(n.useState)({}),p=Object(o.a)(O,2),x=p[0],f=p[1],v=Object(n.useState)(!1),y=Object(o.a)(v,2),w=y[0],N=(y[1],Object(n.useState)([])),C=Object(o.a)(N,2),S=C[0],T=C[1],D=Object(n.useState)(""),I=Object(o.a)(D,2),P=I[0],k=I[1],G=Object(n.useState)([]),M=Object(o.a)(G,2),R=M[0],L=M[1],A=Object(n.useState)(!1),E=Object(o.a)(A,2),q=E[0],F=E[1];Object(n.useEffect)((function(){h(!1),null===s?f({gateID:c,deviceID:"",deviceName:"",deviceType:"",deviceCarpark:"",manufacturer:"",manufacturerCode:"",direction:"",isPrimaryDevice:!1,isGateControl:!1}):(F(!0),function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getDevice",content:{deviceID:e}})};return fetch(ee,t).then(te)}(s).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f(t.message),F(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("Get Device, There was an error!",e)})),null===c&&(H({target:{id:"gateID",value:""}}),ce(["projectID","projectName"]).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(""),T(t.content);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("Get Projects, There was an error!",e)}))))}),[w,t]),Object(n.useEffect)((function(){H({target:{id:"gateID",value:""}}),null===P?L([]):ae(P,["gateID","gateName"]).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:L(t.content);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("Get Gates, There was an error!",e)}))}),[P]);var H=function(e,t,c){var n,a;if(void 0===c?(n=e.target.id,a=e.target.value):(n=c.id,a=e),["isPrimaryDevice","isGateControl"].includes(n)){var r=e.target.checked;f((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(me.a)({},n,r))}))}else f((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(me.a)({},n,a))}))},J=function(){console.log(x);var e=x;delete e.deviceStatus,function(e,t){var c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"modifyDevice",content:{deviceID:e,modifyParams:t}})};return fetch(ee,c).then(te)}(s,e).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(!1),X.success("Update Successful!"),r();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("Update Device, There was an error!",e)}))},V=function(){(function(e,t){var c=Object(i.a)(Object(i.a)({},t),{},{gateID:e}),n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"createDevice",content:c})};return fetch(ee,n).then(te)})(c,x).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(!1),X.success("Addition Successful!"),r();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("Add Device, There was an error!",e)}))};return Object(l.jsxs)(Oe.a,{show:t,onHide:function(){h(!1),a()},children:[Object(l.jsx)(Oe.a.Header,{closeButton:!0,children:Object(l.jsx)(Oe.a.Title,{children:null===s?"Add Device":"Edit Device"})}),Object(l.jsx)("div",{className:"loadingModal"+(q?"":" invisible"),children:Object(l.jsx)(ge.a,{animation:"border",role:"status",children:Object(l.jsx)("span",{className:"sr-only",children:"Loading..."})})}),Object(l.jsx)(Oe.a.Body,{children:Object(l.jsx)(fe.a,{id:"deviceModal",noValidate:!0,validated:b,onSubmit:function(e){e.preventDefault();var t=e.currentTarget;!1===t.checkValidity()&&(e.preventDefault(),e.stopPropagation()),h(!0),t.checkValidity()&&(null===s?V():J())},children:Object(l.jsxs)("div",{children:[Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,align:"right",children:"Device ID"}),Object(l.jsx)(ye.a,{sm:6,children:null===s?Object(l.jsxs)("div",{children:[Object(l.jsx)(fe.a.Control,{required:!0,placeholder:"ID",id:"deviceID",name:"deviceID",type:"text",value:x.deviceID,onChange:H}),Object(l.jsx)(fe.a.Control.Feedback,{type:"invalid",children:"Device ID is a required field."})]}):Object(l.jsx)(fe.a.Control,{type:"text",placeholder:x.deviceID,readOnly:!0})})]}),null===c?Object(l.jsxs)("div",{children:[Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,align:"right",children:"Project"}),Object(l.jsxs)(ye.a,{sm:6,children:[Object(l.jsxs)(fe.a.Control,{custom:!0,required:!0,as:"select",id:"project",name:"project",value:P,onChange:function(e){k(e.target.value)},children:[Object(l.jsx)("option",{value:"",children:"--Select Project--"}),S.map((function(e){return Object(l.jsx)("option",{value:e.projectID,children:e.projectName})}))]}),Object(l.jsx)(fe.a.Control.Feedback,{type:"invalid",children:"Project is a required field."})]})]}),Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,align:"right",children:"Gate"}),Object(l.jsxs)(ye.a,{sm:6,children:[Object(l.jsxs)(fe.a.Control,{disabled:""===P,custom:!0,required:!0,as:"select",id:"gateID",name:"gateID",value:null===x.gateID?"":x.gateID,onChange:H,children:[Object(l.jsx)("option",{value:"",children:"--Select Project--"}),R.map((function(e){return Object(l.jsx)("option",{value:e.gateID,children:e.gateName})}))]}),Object(l.jsx)(fe.a.Control.Feedback,{type:"invalid",children:"Gate is a required field."})]})]})]}):null,Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,align:"right",children:"Device Name"}),Object(l.jsxs)(ye.a,{sm:6,children:[Object(l.jsx)(fe.a.Control,{required:!0,placeholder:"Name",id:"deviceName",name:"deviceName",value:x.deviceName,onChange:H}),Object(l.jsx)(fe.a.Control.Feedback,{type:"invalid",children:"Device Name is a required field."})]})]}),Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,align:"right",children:"Device Type"}),Object(l.jsxs)(ye.a,{sm:6,children:[Object(l.jsxs)(fe.a.Control,{custom:!0,required:!0,as:"select",id:"deviceType",name:"deviceType",value:null===x.deviceType?null:x.deviceType,onChange:H,children:[Object(l.jsx)("option",{value:"",children:"--Select Type--"}),j.map((function(e){return Object(l.jsx)("option",{value:e.id,children:e.name})}))]}),Object(l.jsx)(fe.a.Control.Feedback,{type:"invalid",children:"Device Type is a required field."})]})]}),Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,align:"right",children:"Carpark"}),Object(l.jsxs)(ye.a,{sm:6,children:[Object(l.jsx)(fe.a.Control,{required:!0,placeholder:"Carpark",id:"deviceCarpark",name:"deviceCarpark",value:x.deviceCarpark,onChange:H}),Object(l.jsx)(fe.a.Control.Feedback,{type:"invalid",children:"Capark is a required field."})]})]}),Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,align:"right",children:"Manufacturer"}),Object(l.jsxs)(ye.a,{sm:6,children:[Object(l.jsx)(fe.a.Control,{required:!0,placeholder:"Manufacturer",id:"manufacturer",name:"manufacturer",value:x.manufacturer,onChange:H}),Object(l.jsx)(fe.a.Control.Feedback,{type:"invalid",children:"Manufacturer is a required field."})]})]}),Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,align:"right",children:"Manufacturer Code"}),Object(l.jsxs)(ye.a,{sm:6,children:[Object(l.jsx)(fe.a.Control,{required:!0,placeholder:"Manufacturer Code",id:"manufacturerCode",name:"manufacturerCode",value:x.manufacturerCode,onChange:H}),Object(l.jsx)(fe.a.Control.Feedback,{type:"invalid",children:"Manufacturer Code is a required field."})]})]}),Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,align:"right",children:"Direction"}),Object(l.jsxs)(ye.a,{sm:6,children:[Object(l.jsx)(fe.a.Control,{required:!0,placeholder:"Direction",id:"direction",name:"direction",value:x.direction,onChange:H}),Object(l.jsx)(fe.a.Control.Feedback,{type:"invalid",children:"Direction is a required field."})]})]}),Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,align:"right",children:"Primary Device?"}),Object(l.jsx)(ye.a,{sm:6,className:"align-items-center d-flex justify-content-center",children:Object(l.jsx)(fe.a.Check,{checked:x.isPrimaryDevice,type:"switch",id:"isPrimaryDevice",onChange:H})})]}),Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,align:"right",children:"Control Gate?"}),Object(l.jsx)(ye.a,{sm:6,className:"align-items-center d-flex justify-content-center",children:Object(l.jsx)(fe.a.Check,{checked:x.isGateControl,type:"switch",id:"isGateControl",onChange:H})})]})]})})}),Object(l.jsxs)(Oe.a.Footer,{children:[Object(l.jsx)(pe.a,{variant:"secondary",onClick:function(){h(!1),a()},children:"Cancel"}),Object(l.jsx)(pe.a,{form:"deviceModal",variant:"primary",type:"submit",children:"Confirm"})]})]})}var Ne=c(239),Ce=c.n(Ne),Se=c(633);function Te(e){var t=e.hide,c=e.gateID,a=e.toggleModal,r=e.success,s=e.newState,j=e.projectID,u=e.gateTypes,d=Object(n.useState)(!1),b=Object(o.a)(d,2),h=b[0],O=b[1],p=Object(n.useState)({}),x=Object(o.a)(p,2),f=x[0],v=x[1],y=Object(n.useState)(!1),w=Object(o.a)(y,2),N=w[0],C=(w[1],Object(n.useState)([])),S=Object(o.a)(C,2),T=S[0],D=S[1],I=Object(n.useState)(!1),P=Object(o.a)(I,2),k=P[0],G=P[1],M={gateName:"",gateType:"",isChargeable:!1,ledOnTime:"00:00:00",ledOffTime:"00:00:00",allowedTypes:[]};Object(n.useEffect)((function(){O(!1),console.log("gateModal",c,j,s),t?s?v(M):(G(!0),ie(c).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!==t.message.allowedTypes?v(t.message):v(Object(i.a)(Object(i.a)({},t.message),{},{allowedTypes:[]})),G(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("Get Gate, There was an error!",e)}))):v(M),ue().then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D(t.message.whitelistTags.map((function(e){return{label:e,value:e}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("Get WhiteList Tags, There was an error!",e)}))}),[N,t]);var R=function(e,t,c){var n,a;if(void 0===c?(n=e.target.id,a=e.target.value):(n=c.id,a=e),["isChargeable"].includes(n)){var r=e.target.checked;v((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(me.a)({},n,r))}))}else v((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(me.a)({},n,a))}))},L=function(){(function(e,t){console.log(t);var c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"modifyGate",content:{gateID:e,modifyParams:t}})};return fetch(ee,c).then(te)})(c,f).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(!1),X.success("Update Successful!"),r();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("Update Gate, There was an error!",e)}))},A=function(){(function(e,t){var c=Object(i.a)(Object(i.a)({},t),{},{projectID:e}),n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"createGate",content:c})};return fetch(ee,n).then(te)})(j,f).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(!1),X.success("Addition Successful!"),r();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("Add Gate, There was an error!",e)}))};return Object(l.jsxs)(Oe.a,{show:t,onHide:function(){O(!1),a()},children:[Object(l.jsx)(Oe.a.Header,{closeButton:!0,children:Object(l.jsx)(Oe.a.Title,{children:s?"Add Gate":"Edit Gate"})}),Object(l.jsx)("div",{className:"loadingModal"+(k?"":" invisible"),children:Object(l.jsx)(ge.a,{animation:"border",role:"status",children:Object(l.jsx)("span",{className:"sr-only",children:"Loading..."})})}),Object(l.jsx)(Oe.a.Body,{children:Object(l.jsx)(fe.a,{id:"gateModal",noValidate:!0,validated:h,onSubmit:function(e){e.preventDefault();var t=e.currentTarget;!1===t.checkValidity()&&(e.preventDefault(),e.stopPropagation()),O(!0),t.checkValidity()&&(s?A():L())},children:Object(l.jsxs)("div",{children:[Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,align:"right",children:"Gate Name"}),Object(l.jsxs)(ye.a,{sm:6,children:[Object(l.jsx)(fe.a.Control,{required:!0,placeholder:"Name",id:"gateName",name:"gateName",value:f.gateName,onChange:R}),Object(l.jsx)(fe.a.Control.Feedback,{type:"invalid",children:"Gate Name is a required field."})]})]}),Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,align:"right",children:"Gate Type"}),Object(l.jsxs)(ye.a,{sm:6,children:[Object(l.jsxs)(fe.a.Control,{custom:!0,required:!0,as:"select",id:"gateType",name:"gateType",value:null===f.gateType?"":f.gateType,onChange:R,children:[Object(l.jsx)("option",{value:"",children:"--Select Type--"}),u.map((function(e){return Object(l.jsx)("option",{value:e.id,children:e.name})}))]}),Object(l.jsx)(fe.a.Control.Feedback,{type:"invalid",children:"Gate Type is a required field."})]})]}),Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,align:"right",children:"Charge fee for entry"}),Object(l.jsx)(ye.a,{sm:6,className:"align-items-center d-flex justify-content-center",children:Object(l.jsx)(fe.a.Check,{checked:f.isChargeable,type:"switch",id:"isChargeable",onChange:R})})]}),Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,align:"right",children:"Time to turn on the LPR camera\u2019s LED"}),Object(l.jsx)(fe.a.Label,{column:!0,sm:6,className:"align-items-center d-flex",children:Object(l.jsx)(Ce.a,{value:f.ledOnTime,onChange:R,showSeconds:!0,input:Object(l.jsx)(fe.a.Control,{required:!0,id:"ledOnTime",type:"text",name:"ledOnTime",placeholder:"Time"})})})]}),Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,align:"right",children:"Time to turn off the LPR"}),Object(l.jsx)(fe.a.Label,{column:!0,className:"align-items-center d-flex",sm:6,children:Object(l.jsx)(Ce.a,{value:f.ledOffTime,onChange:R,showSeconds:!0,input:Object(l.jsx)(fe.a.Control,{required:!0,id:"ledOffTime",type:"text",name:"ledOffTime",placeholder:"Time"})})})]}),Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,align:"right",children:"Whitelist Tags"}),Object(l.jsx)(ye.a,{sm:6,children:Object(l.jsx)(Se.a,{sticky:!0,searchable:!1,data:T,defaultValue:[],style:{width:"100%"},value:f.allowedTypes,onChange:function(e){R({target:{id:"allowedTypes",value:e}})}})})]})]})})}),Object(l.jsxs)(Oe.a.Footer,{children:[Object(l.jsx)(pe.a,{variant:"secondary",onClick:function(){O(!1),a()},children:"Cancel"}),Object(l.jsx)(pe.a,{form:"gateModal",variant:"primary",type:"submit",children:"Confirm"})]})]})}var De=c(355),Ie=c(331),Pe=c(607),ke=function(e){Object(p.a)(c,e);var t=Object(x.a)(c);function c(e){var n;return Object(O.a)(this,c),(n=t.call(this,e)).state={alerts:[]},n}return Object(Ie.a)(c,[{key:"componentDidMount",value:function(){var e=this;this.subscription=X.onAlert(this.props.id).subscribe((function(t){e.setState({alerts:[].concat(Object(De.a)(e.state.alerts),[t])}),setTimeout((function(){return e.removeAlert(t)}),3e3)}))}},{key:"componentWillUnmount",value:function(){this.subscription.unsubscribe()}},{key:"removeAlert",value:function(e){this.setState({alerts:this.state.alerts.filter((function(t){return t!==e}))})}},{key:"render",value:function(){var e=this,t=this.state.alerts;return t.length?Object(l.jsx)("div",{className:"alertGrp",children:(console.log(t),t.map((function(t,c){return Object(l.jsx)(Pe.a,{variant:t.type,dismissible:!0,onClose:function(){e.removeAlert(t)},children:t.message},c)})))}):null}}]),c}(a.a.Component),Ge=c(332),Me=c.n(Ge),Re=c(333),Le=c.n(Re),Ae=c(334),Ee=c.n(Ae),qe=c(335),Fe=c.n(qe);function He(e){var t=e.count,c=e.page,n=e.rowsPerPage,a=e.onChangePage;return Object(l.jsxs)("div",{style:{flexShrink:0,right:0},children:[Object(l.jsx)(z.a,{onClick:function(e){a(e,0)},disabled:0===c,"aria-label":"first page",children:Object(l.jsx)(Me.a,{})}),Object(l.jsx)(z.a,{onClick:function(e){a(e,c-1)},disabled:0===c,"aria-label":"previous page",children:Object(l.jsx)(Le.a,{})}),Object(l.jsx)(z.a,{onClick:function(e){a(e,c+1)},disabled:c>=Math.ceil(t/n)-1,"aria-label":"next page",children:Object(l.jsx)(Ee.a,{})}),Object(l.jsx)(z.a,{onClick:function(e){a(e,Math.max(0,Math.ceil(t/n)-1))},disabled:c>=Math.ceil(t/n)-1,"aria-label":"last page",children:Object(l.jsx)(Fe.a,{})})]})}function Je(e){var t=e.hide,c=e.accessRuleID,a=e.projectID,r=e.success,s=e.projectName,j=e.toggleModal,u=Object(n.useState)(!1),d=Object(o.a)(u,2),b=d[0],h=d[1],O=Object(n.useState)({}),p=Object(o.a)(O,2),x=p[0],f=p[1],v=Object(n.useState)(!1),y=Object(o.a)(v,2),w=y[0],N=(y[1],Object(n.useState)([])),C=Object(o.a)(N,2),S=C[0],T=C[1],D=Object(n.useState)({}),I=Object(o.a)(D,2),P=I[0],k=I[1],G=Object(n.useState)([]),M=Object(o.a)(G,2),R=M[0],L=M[1],A=Object(n.useState)(!0),E=Object(o.a)(A,2),q=E[0],F=E[1],H=function(){var e=Object(g.a)(m.a.mark((function e(t){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={},t.forEach(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c[t.gateID]=!1;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),R.forEach(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c[t]=!0;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=5,c;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){h(!1),null===c?(F(!1),f({projectID:a,accessRuleName:"",isChargeable:!1,gates:[]}),L([])):(setTimeout((function(){return F(!1)}),600),function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getAccessRule",content:{accessRuleID:e}})};return fetch(ee,t).then(te)}(c).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f(t.message),L(t.message.gates);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("Get Access Rule, There was an error!",e)})))}),[w]),Object(n.useEffect)((function(){f((function(e){return Object(i.a)(Object(i.a)({},e),{},{gates:Object.keys(P).filter((function(e){return P[e]}))})}))}),[P]),Object(n.useEffect)((function(){ae(a,["gateID","gateName"]).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T(t.content.map((function(e){return{value:String(e.gateID),label:e.gateName}}))),H(t.content).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=k,e.next=3,t;case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("Get Gate Rule, There was an error!",e)}))}),[R]);var J=function(e,t,c){var n,a;if(void 0===c?(n=e.target.id,a=e.target.value):(n=c.id,a=e),["isChargeable"].includes(n)){var r=e.target.checked;f((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(me.a)({},n,r))}))}else f((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(me.a)({},n,a))}))},V=function(){(function(e,t){var c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"modifyAccessRule",content:{accessRuleID:e,modifyParams:t}})};return fetch(ee,c).then(te)})(c,x).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(!1),X.success("Update Successful!"),r();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("Update Access Rule, There was an error!",e)}))},z=function(){(function(e){var t=Object(i.a)({},e),c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"createAccessRule",content:t})};return fetch(ee,c).then(te)})(x).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(!1),X.success("Addition Successful!"),r();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("Add Access Rule, There was an error!",e)}))};return Object(l.jsx)(Oe.a,{show:t,onHide:function(){h(!1),j()},children:q?Object(l.jsx)(ve.a,{className:"d-flex justify-content-center",style:{margin:"200px"},children:Object(l.jsx)(ge.a,{size:"lg",animation:"border",role:"status",children:Object(l.jsx)("span",{className:"sr-only",children:"Loading..."})})}):Object(l.jsxs)("div",{children:[Object(l.jsx)(Oe.a.Header,{closeButton:!0,children:Object(l.jsx)(Oe.a.Title,{children:null===c?"Add Rule":"Edit Rule"})}),Object(l.jsx)(Oe.a.Body,{children:Object(l.jsx)(fe.a,{id:"ruleModal",noValidate:!0,validated:b,onSubmit:function(e){e.preventDefault();var t=e.currentTarget;!1===t.checkValidity()&&(e.preventDefault(),e.stopPropagation()),h(!0),t.checkValidity()&&(null===c?z():V())},children:Object(l.jsxs)("div",{children:[Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,align:"right",children:"Project Name"}),Object(l.jsx)(ye.a,{sm:6,className:"align-items-center d-flex justify-content-center",children:Object(l.jsx)(fe.a.Control,{type:"text",placeholder:s,readOnly:!0})})]}),Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,align:"right",children:"Access Rule Name"}),Object(l.jsxs)(ye.a,{sm:6,children:[Object(l.jsx)(fe.a.Control,{required:!0,placeholder:"Name",id:"accessRuleName",name:"accessRuleName",value:x.accessRuleName,onChange:J}),Object(l.jsx)(fe.a.Control.Feedback,{type:"invalid",children:"Rule Name is a required field."})]})]}),Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,align:"right",children:"Gates"}),Object(l.jsx)(ye.a,{sm:6,children:Object(l.jsx)(Se.a,{sticky:!0,searchable:!1,data:S,defaultValue:[],style:{width:"100%"},value:x.gates,onChange:function(e){J({target:{id:"gates",value:e}})}})})]}),Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,align:"right",children:"Is Chargeable"}),Object(l.jsx)(ye.a,{sm:6,className:"align-items-center d-flex justify-content-center",children:Object(l.jsx)(fe.a.Check,{checked:x.isChargeable,type:"switch",id:"isChargeable",onChange:J})})]})]})})}),Object(l.jsxs)(Oe.a.Footer,{children:[Object(l.jsx)(pe.a,{variant:"secondary",onClick:function(){h(!1),j()},children:"Cancel"}),Object(l.jsx)(pe.a,{form:"ruleModal",variant:"primary",type:"submit",children:"Confirm"})]})]})})}function Ve(e){var t=e.toggleModal,c=e.src;return Object(l.jsx)(Oe.a,{size:"lg",centered:!0,show:null!==c,onHide:t,children:Object(l.jsx)("img",{src:c})})}var ze=c(630);function Be(e){return e<10?"0"+e:e}function Ye(e){return null===e?"":e.getFullYear().toString()+"-"+Be(e.getMonth()+1)+"-"+Be(e.getDate())+" "+Be(e.getHours())+":"+Be(e.getMinutes())+":"+Be(e.getSeconds())}function Ue(e){var t=e.hide,c=e.ID,a=e.success,r=e.projectName,s=e.accessRules,j=e.toggleModal,u=Object(n.useState)(!1),d=Object(o.a)(u,2),b=d[0],h=d[1],O=Object(n.useState)({}),p=Object(o.a)(O,2),x=p[0],f=p[1],v=Object(n.useState)(!1),y=Object(o.a)(v,2),w=y[0],N=(y[1],Object(n.useState)([])),C=Object(o.a)(N,2),S=C[0],T=C[1],D=Object(n.useState)([]),I=Object(o.a)(D,2),P=I[0],k=I[1],G=Object(n.useState)(!1),M=Object(o.a)(G,2),R=M[0],L=M[1],A=function(){(function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getTable",content:{objName:"plate",columns:e}})};return fetch(ee,t).then(te)})(["plateNumber"]).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(t.content.map((function(e){return e.plateNumber})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("Get Plate Number, There was an error!",e)}))};Object(n.useEffect)((function(){h(!1),ue().then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T(t.message.whitelistTags);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("Get WhiteList Tags, There was an error!",e)})),A(),null===c?f({plateNumber:"",accessRuleID:"",tag:"",startDateTime:"",endDateTime:""}):(L(!0),function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getWhitelistEntry",content:{recordID:e}})};return fetch(ee,t).then(te)}(c).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t.message),f(t.message),L(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("Get Whitelist entry info, There was an error!",e)})))}),[w]);var E=function(e,t,c){var n,a;void 0===c?(n=e.target.id,a=e.target.value):(n=c.id,a=e),"boolean"===typeof x[n]?(console.log("bool"),f((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(me.a)({},n,!x[n]))}))):f((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(me.a)({},n,a))}))},q=function(){L(!0),console.log(x),function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"editWhitelistEntry",content:e})};return fetch(ee,t).then(te)}(x).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(!1),L(!1),X.success("Update Successful!"),a();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){L(!1),X.error("There was an error!"),console.error("Update Whitelist Entry, There was an error!",e)}))},F=function(){L(!0),function(e){var t=Object(i.a)({},e),c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"editWhitelistEntry",content:t})};return fetch(ee,c).then(te)}(x).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:L(!1),h(!1),X.success("Addition Successful!"),a();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){L(!1),X.error("There was an error!"),console.error("Add Whitelist Entry, There was an error!",e)}))};return Object(l.jsxs)(Oe.a,{show:t,onHide:function(){h(!1),j()},children:[Object(l.jsx)(Oe.a.Header,{closeButton:!0,children:Object(l.jsx)(Oe.a.Title,{children:null===c?"Add Entry":"Edit Entry"})}),Object(l.jsx)("div",{className:"loadingModal"+(R?"":" invisible"),children:Object(l.jsx)(ge.a,{animation:"border",role:"status",children:Object(l.jsx)("span",{className:"sr-only",children:"Loading..."})})}),Object(l.jsx)(Oe.a.Body,{children:Object(l.jsx)(fe.a,{id:"whitelistModal",noValidate:!0,validated:b,onSubmit:function(e){e.preventDefault();var t=e.currentTarget;!1===t.checkValidity()&&(e.preventDefault(),e.stopPropagation()),h(!0),t.checkValidity()&&(null===c?F():q())},children:Object(l.jsxs)("div",{children:[Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,align:"right",children:"Project Name"}),Object(l.jsx)(ye.a,{sm:6,className:"align-items-center d-flex justify-content-center",children:Object(l.jsx)(fe.a.Control,{type:"text",placeholder:r,readOnly:!0})})]}),Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,align:"right",children:"Plate Number"}),Object(l.jsx)(ye.a,{sm:6,children:null===c?Object(l.jsxs)("div",{children:[Object(l.jsx)(fe.a.Control,{required:!0,placeholder:"Name",id:"plateNumber",name:"plateNumber",value:x.plateNumber,onChange:E,isValid:P.includes(x.plateNumber),isInvalid:!P.includes(x.plateNumber)&&b}),Object(l.jsx)(fe.a.Control.Feedback,{type:"invalid",children:"Please enter a registered plate no."})]}):Object(l.jsx)(fe.a.Control,{type:"text",placeholder:x.plateNumber,readOnly:!0})})]}),Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,align:"right",children:"Access Rule"}),Object(l.jsxs)(ye.a,{sm:6,children:[Object(l.jsxs)(fe.a.Control,{custom:!0,required:!0,as:"select",id:"accessRuleID",name:"accessRuleID",value:null===x.accessRuleID?"":x.accessRuleID,onChange:E,children:[Object(l.jsx)("option",{value:"",children:"--Select Access Rule--"}),s.map((function(e){return Object(l.jsx)("option",{value:e.accessRuleID,children:e.accessRuleName})}))]}),Object(l.jsx)(fe.a.Control.Feedback,{type:"invalid",children:"Access Rule is a required field."})]})]}),Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,align:"right",children:"Tag"}),Object(l.jsx)(ye.a,{sm:6,children:Object(l.jsxs)(fe.a.Control,{custom:!0,as:"select",id:"tag",name:"tag",value:null===x.tag?"":x.tag,onChange:E,children:[Object(l.jsx)("option",{value:"",children:"None"}),S.map((function(e){return Object(l.jsx)("option",{value:e,children:e})}))]})})]}),Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,align:"right",children:"Start Date Time"}),Object(l.jsx)(ye.a,{sm:6,children:Object(l.jsx)(ze.a,{className:"width-100",value:x.startDateTime,onChange:function(e){var t,c;E({target:{id:"startDateTime",value:Ye(e)}}),E({target:{id:"endDateTime",value:(t=Ye(e),c=x.endDateTime,""===t?c:""===c?"":t<c?c:t)}})},format:"YYYY-MM-DD HH:mm:ss",ranges:[{label:"Now",value:new Date}],placeholder:"Start DateTime"})})]}),Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,align:"right",children:"End Date Time"}),Object(l.jsx)(ye.a,{sm:6,children:Object(l.jsx)(ze.a,{className:"width-100",value:x.endDateTime,onChange:function(e){var t,c;E({target:{id:"endDateTime",value:Ye(e)}}),E({target:{id:"startDateTime",value:(t=Ye(e),c=x.startDateTime,""===t?c:""===c?"":t>c?c:t)}})},format:"YYYY-MM-DD HH:mm:ss",ranges:[{label:"Now",value:new Date}],placeholder:"End DateTime"})})]})]})})}),Object(l.jsxs)(Oe.a.Footer,{children:[Object(l.jsx)(pe.a,{variant:"secondary",onClick:function(){h(!1),j()},children:"Cancel"}),Object(l.jsx)(pe.a,{form:"whitelistModal",variant:"primary",type:"submit",children:"Confirm"})]})]})}var We=c(42),Xe=c(608),Ke=c(641),Qe=c(609),Ze=c(610),$e=c(611),_e=c(612),et=c(613),tt=c(614),ct=c(615),nt=c(616),at=c(146),rt=c.n(at),st=c(345),it=c.n(st),ot=c(346),lt=c.n(ot),jt=c(344),ut=c.n(jt),dt=c(38);function bt(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),c=(t[0],t[1],Object(n.useState)(null)),a=Object(o.a)(c,2),r=a[0],s=(a[1],Object(n.useState)([])),j=Object(o.a)(s,2),u=j[0],d=j[1],b=Object(n.useState)([]),h=Object(o.a)(b,2),O=h[0],p=h[1],x=Object(n.useState)([]),f=Object(o.a)(x,2),v=f[0],y=f[1],w=Object(n.useState)({}),N=Object(o.a)(w,2),C=N[0],T=N[1],D=Object(n.useState)(null),I=Object(o.a)(D,2),P=I[0],k=I[1],G=Object(n.useState)({edit:!1,delete:!1}),M=Object(o.a)(G,2),R=M[0],L=M[1],A=Object(S.g)(),E=function(){(function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getTable",content:{objName:"device",columns:e}})};return fetch(ee,t).then(te)})(["deviceID","deviceName","deviceType","deviceStatus","gateID","deviceIP"]).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(t.content.filter((function(e){return"online"!==e.deviceStatus&&null!==e.gateID})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("Get All Device, there was an error!",e)})),function(){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getNewDevice"})};return fetch(ee,e).then(te)}().then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(t.message);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("Get All Device, there was an error!",e)}))};Object(n.useEffect)((function(){E(),je("device").then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T(t.message),y(Object.entries(t.message).map((function(e){return{id:e[0],name:e[1].name}})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("There was an error Get Device Types!",e)}))}),[r]);var q=function(e){var t=R[e];L((function(c){return Object(i.a)(Object(i.a)({},c),{},Object(me.a)({},e,!t))}))},F=function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:le(t).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E(),q("delete"),X.success("Device Deleted");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Delete Device, There was an error!",e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsxs)("div",{children:[Object(l.jsxs)(dt.a,{children:[Object(l.jsx)("meta",{charSet:"utf-8"}),Object(l.jsx)("title",{children:"Home"})]}),Object(l.jsx)(xe,{hide:R.delete,success:function(){F(P)},toggleModal:function(){q("delete")},title:"Confirm Deletion",body:"Delete this device?"}),Object(l.jsx)(we,{deviceTypes:v,hide:R.edit,gateID:null,deviceID:P,success:function(){E(),q("edit")},toggleModal:function(){q("edit")}}),Object(l.jsx)(Xe.a,{className:"dashboard",children:Object(l.jsxs)(ve.a,{children:[Object(l.jsx)(ye.a,{sm:3,children:Object(l.jsx)(Ke.a,{children:Object(l.jsxs)("p",{className:"cardHomeText",children:[Object(l.jsx)("div",{className:"cardIconDiv success",children:Object(l.jsx)("span",{className:"cardIcon",children:Object(l.jsx)(rt.a,{fontSize:"large",style:{color:"white"}})})}),"Sample",Object(l.jsx)("h3",{className:"cardHomeNumber",style:{color:"#66bb6a"},children:"~"})]})})}),Object(l.jsx)(ye.a,{sm:3,children:Object(l.jsx)(Ke.a,{children:Object(l.jsxs)("p",{className:"cardHomeText",children:[Object(l.jsx)("div",{className:"cardIconDiv warning",children:Object(l.jsx)("span",{className:"cardIcon",children:Object(l.jsx)(rt.a,{fontSize:"large",style:{color:"white"}})})}),"Sample",Object(l.jsx)("h3",{className:"cardHomeNumber",style:{color:"#ffa726"},children:"~"})]})})}),Object(l.jsx)(ye.a,{sm:3,children:Object(l.jsx)(Ke.a,{children:Object(l.jsxs)("p",{className:"cardHomeText",children:[Object(l.jsx)("div",{className:"cardIconDiv info",children:Object(l.jsx)("span",{className:"cardIcon",children:Object(l.jsx)(rt.a,{fontSize:"large",style:{color:"white"}})})}),"New Devices",Object(l.jsx)("h3",{className:"cardHomeNumber",style:{color:"#26c6da"},children:O.length})]})})}),Object(l.jsx)(ye.a,{sm:3,children:Object(l.jsx)(Ke.a,{children:Object(l.jsxs)("p",{className:"cardHomeText",children:[Object(l.jsx)("div",{className:"cardIconDiv danger",children:Object(l.jsx)("span",{className:"cardIcon",children:Object(l.jsx)(rt.a,{fontSize:"large",style:{color:"white"}})})}),"Disconnected Devices",Object(l.jsx)("h3",{className:"cardHomeNumber",style:{color:"#ef5350"},children:u.length})]})})})]})}),Object(l.jsx)("div",{className:"content",children:Object(l.jsxs)(ve.a,{children:[Object(l.jsx)(ye.a,{sm:4,children:Object(l.jsxs)(Ke.a,{style:{height:"465px"},children:[Object(l.jsx)(Qe.a,{className:"cardTitle",variant:"h6",component:"h2",children:"New Devices"}),Object(l.jsx)(Ze.a,{component:$e.a,className:"scrollbar-grey",style:{"box-shadow":"none"},children:Object(l.jsxs)(_e.a,{"aria-label":"simple table",children:[Object(l.jsx)(et.a,{children:Object(l.jsxs)(tt.a,{children:[Object(l.jsx)(ct.a,{align:"left",children:Object(l.jsx)("b",{children:"ID"})}),Object(l.jsx)(ct.a,{align:"left",children:Object(l.jsx)("b",{children:"IP"})}),Object(l.jsx)(ct.a,{align:"left"})]})}),Object(l.jsx)(nt.a,{children:O.length>0?O.map((function(e,t){return Object(l.jsxs)(tt.a,{children:[Object(l.jsx)(ct.a,{align:"left",children:e.deviceID}),Object(l.jsx)(ct.a,{align:"left",children:""==e.deviceIP||null==e.deviceIP?"-":e.deviceIP}),Object(l.jsx)(ct.a,{align:"right",children:Object(l.jsx)(z.a,{style:{padding:0},onClick:function(){k(e.deviceID),q("edit")},children:Object(l.jsx)(ut.a,{})})})]},e.deviceID)})):Object(l.jsx)(tt.a,{children:Object(l.jsx)(ct.a,{align:"center",colSpan:3,children:"No New Devices"})})})]})})]})}),Object(l.jsx)(ye.a,{sm:8,children:Object(l.jsxs)(Ke.a,{style:{height:"465px"},children:[Object(l.jsx)(Qe.a,{className:"cardTitle",variant:"h6",component:"h2",children:"Disconnected Devices"}),Object(l.jsx)(Ze.a,{component:$e.a,className:"scrollbar-grey",style:{"box-shadow":"none"},children:Object(l.jsxs)(_e.a,{stickyHeader:!0,"aria-label":"simple table",children:[Object(l.jsx)(et.a,{children:Object(l.jsxs)(tt.a,{children:[Object(l.jsx)(ct.a,{align:"left",children:Object(l.jsx)("b",{children:"ID"})}),Object(l.jsx)(ct.a,{align:"left",children:Object(l.jsx)("b",{children:"Name"})}),Object(l.jsx)(ct.a,{align:"left",children:Object(l.jsx)("b",{children:"Type"})}),Object(l.jsx)(ct.a,{align:"left",children:Object(l.jsx)("b",{children:"IP"})}),Object(l.jsx)(ct.a,{align:"left"})]})}),Object(l.jsx)(nt.a,{children:u.length>0?u.map((function(e,t){return Object(l.jsxs)(tt.a,{children:[Object(l.jsx)(ct.a,{align:"left",children:e.deviceID}),Object(l.jsx)(ct.a,{align:"left",children:e.deviceName}),Object(l.jsx)(ct.a,{align:"left",children:null===e.deviceType?null:void 0===C[e.deviceType]?e.deviceType:C[e.deviceType].name}),Object(l.jsx)(ct.a,{align:"left",children:""==e.deviceIP||null==e.deviceIP?"-":e.deviceIP}),Object(l.jsxs)(ct.a,{align:"right",children:[Object(l.jsx)(z.a,{style:{padding:"0px 5px"},onClick:function(){var t;t=e.gateID,ie(t).then(function(){var e=Object(g.a)(m.a.mark((function e(c){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=c.message.projectID,A.push("/project/"+String(n)+"/gate/"+String(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("Get Gate Info, there was an error!",e)}))},children:Object(l.jsx)(it.a,{})}),Object(l.jsx)(z.a,{style:{padding:0},onClick:function(){k(e.deviceID),q("delete")},children:Object(l.jsx)(lt.a,{})})]})]},e.deviceID)})):Object(l.jsx)(tt.a,{children:Object(l.jsx)(ct.a,{align:"center",colSpan:5,children:"No Disconnected Devices"})})})]})})]})})]})})]})}function ht(){var e=Object(n.useContext)(u),t=(e.state,e.dispatch),c=Object(S.g)(),a=Object(n.useState)({username:"",password:""}),r=Object(o.a)(a,2),s=r[0],j=r[1],d=function(e){var t=e.target,c=t.id,n=t.value;j((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(me.a)({},c,n))}))};return Object(l.jsxs)("div",{className:"maincontainer h-100",children:[Object(l.jsxs)(dt.a,{children:[Object(l.jsx)("meta",{charSet:"utf-8"}),Object(l.jsx)("title",{children:"Login"})]}),Object(l.jsx)("div",{className:"container-fluid bg-light h-100",children:Object(l.jsx)("div",{className:"login d-flex align-items-center py-5",children:Object(l.jsx)("div",{className:"container",children:Object(l.jsx)("div",{className:"row",children:Object(l.jsxs)("div",{className:"col-xs-10 col-sm-6 col-md-5 col-xl-4 mx-auto ",children:[Object(l.jsx)("h3",{className:"display-4",children:"Login"}),Object(l.jsx)("p",{className:"text-muted mb-4",children:"Enter your credentials to login."}),Object(l.jsxs)("form",{children:[Object(l.jsx)("div",{className:"form-group mb-3",children:Object(l.jsx)("input",{id:"username",type:"username",placeholder:"Username",required:"required",className:"form-control rounded-pill border-0 shadow-sm px-4",onChange:d,value:s.username})}),Object(l.jsx)("div",{className:"form-group mb-3",children:Object(l.jsx)("input",{id:"password",type:"password",placeholder:"Password",required:"required",className:"form-control rounded-pill border-0 shadow-sm px-4 text-primary",onChange:d,value:s.password})}),Object(l.jsx)("p",{id:"login-error",className:"text-danger"}),Object(l.jsx)("button",{type:"submit",className:"btn btn-primary btn-block text-uppercase mb-2 rounded-pill shadow-sm",onClick:function(e){e.preventDefault();var n=s.username,a=s.password;"huajun"===n&&"huajun"===a?(t({type:"setAuth",value:!0}),t({type:"setUser",value:n}),c.push("/home")):0===n.length?document.getElementById("login-error").innerText="Username cannot be blank":0===a.length?document.getElementById("login-error").innerText="Password cannot be blank":document.getElementById("login-error").innerText="Invalid Username or Password"},children:"Sign in"})]})]})})})})})]})}var Ot=c(642),pt=c(620),xt=c(629),ft=c(617),mt=c(618),gt=c(619),vt=c(44),yt=c.n(vt);function wt(e){e.match;var t=Object(S.g)(),c=Object(n.useState)([]),r=Object(o.a)(c,2),s=r[0],j=r[1],u=Object(n.useState)([]),d=Object(o.a)(u,2),b=d[0],h=d[1],O=Object(n.useState)(!1),p=Object(o.a)(O,2),x=p[0],f=p[1],v=Object(n.useState)({delete:!1,add:!1}),y=Object(o.a)(v,2),w=y[0],N=y[1],C=Object(n.useState)(""),T=Object(o.a)(C,2),D=T[0],I=T[1],P=Object(n.useState)({projectName:"",location:"",projectType:""}),k=Object(o.a)(P,2),G=k[0],M=k[1],R=Object(n.useState)({projectName:"",location:"",projectType:""}),L=Object(o.a)(R,2),A=L[0],E=L[1],q=Object(n.useState)(!1),F=Object(o.a)(q,2),H=F[0],J=(F[1],function(){f(!0),ce(["projectID","projectName","location","projectType"]).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t.content),j(t.content),f(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("There was an error!",e)})),$(0)});Object(n.useEffect)((function(){J()}),[H]),Object(n.useEffect)((function(){Y()}),[s,A]);var V=function(e){var t=e.target,c=t.id,n=t.value;M((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(me.a)({},c,n))}))},B=function(e){var t=w[e];N((function(c){return Object(i.a)(Object(i.a)({},c),{},Object(me.a)({},e,!t))}))},Y=function(e){var t=A.projectName,c=A.location,n=A.projectType,a=s;console.log(a),h(a.filter((function(e){return e.projectName.toLowerCase().indexOf(t.toLowerCase())>=0&&e.location.toLowerCase().indexOf(c.toLowerCase())>=0&&e.projectType.toLowerCase().indexOf(n.toLowerCase())>=0}))),$(0)},U=function(e){(function(){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"createProject",content:{projectName:"",projectType:"",location:"",contactNumber:"",maCompany:"",equipManu:""}})};return fetch(ee,e).then(te)})().then(function(){var e=Object(g.a)(m.a.mark((function e(c){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=c.message.projectID,t.push("/project/"+n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("There was an error!",e)}))},W=function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:se(t).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:J(),B("delete"),X.success("Project Deleted");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("There was an error!",e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=a.a.useState(0),Q=Object(o.a)(K,2),Z=Q[0],$=Q[1],_=a.a.useState(10),ne=Object(o.a)(_,2),ae=ne[0],re=ne[1],ie=b.length>0&&!x?ae-Math.min(ae,b.length-Z*ae):ae-1;return Object(l.jsxs)("div",{children:[Object(l.jsxs)(dt.a,{children:[Object(l.jsx)("meta",{charSet:"utf-8"}),Object(l.jsx)("title",{children:"Projects"})]}),Object(l.jsx)(xe,{hide:w.delete,success:function(){W(D)},toggleModal:function(){B("delete")},title:"Confirm Deletion",body:"Delete this project?"}),Object(l.jsx)(xe,{hide:w.add,success:function(){U()},toggleModal:function(){B("add")},title:"Confirm Addition",body:"Add a new project?"}),Object(l.jsxs)("div",{className:"content",children:[Object(l.jsxs)(Ot.a,{children:[Object(l.jsx)(Ot.a.Item,{href:"/home",children:"Home"}),Object(l.jsx)(Ot.a.Item,{active:!0,children:"Projects"})]}),Object(l.jsxs)(ve.a,{className:"d-flex",style:{padding:"10px 0px"},children:[Object(l.jsx)(ye.a,{sm:"auto",children:Object(l.jsxs)(pe.a,{className:"btn btn-info align-items-center d-flex",type:"button",onClick:J,children:[Object(l.jsx)(yt.a,{}),"\xa0 Refresh"]})}),Object(l.jsx)("div",{style:{"flex-grow":"1"}}),Object(l.jsx)(ye.a,{sm:"auto",children:Object(l.jsx)(pe.a,{className:"btn btn-success",type:"button",onClick:function(){B("add")},children:"Add +"})})]}),Object(l.jsx)(fe.a,{onSubmit:function(e){e.preventDefault()},children:Object(l.jsxs)(ve.a,{className:"d-flex",children:[Object(l.jsx)(ye.a,{sm:"auto",children:Object(l.jsx)(fe.a.Control,{id:"projectName",placeholder:"Name",onChange:V,value:G.projectName})}),Object(l.jsx)(ye.a,{sm:"auto",children:Object(l.jsx)(fe.a.Control,{id:"location",placeholder:"Location",onChange:V,value:G.location})}),Object(l.jsx)(ye.a,{sm:"auto",children:Object(l.jsx)(fe.a.Control,{id:"projectType",placeholder:"Type",onChange:V,value:G.projectType})}),Object(l.jsx)("div",{style:{"flex-grow":"1"}}),Object(l.jsx)(ye.a,{sm:"auto",children:Object(l.jsx)(pe.a,{type:"button",onClick:function(){E(G)},children:"Search"})}),Object(l.jsx)(ye.a,{sm:"auto",children:Object(l.jsx)(pe.a,{type:"button",variant:"secondary",onClick:function(){M({projectName:"",location:"",projectType:""}),E({projectName:"",location:"",projectType:""})},children:"Cancel"})})]})})]}),Object(l.jsx)("div",{className:"content",children:Object(l.jsx)(Ze.a,{component:$e.a,children:Object(l.jsxs)(_e.a,{"aria-label":"simple table",children:[Object(l.jsx)(et.a,{children:Object(l.jsxs)(tt.a,{children:[Object(l.jsx)(ct.a,{children:Object(l.jsx)("b",{children:"Project"})}),Object(l.jsx)(ct.a,{align:"left",children:Object(l.jsx)("b",{children:"Location"})}),Object(l.jsx)(ct.a,{align:"left",children:Object(l.jsx)("b",{children:"Type"})}),Object(l.jsx)(ct.a,{align:"right",children:Object(l.jsx)("b",{children:"Actions"})})]})}),Object(l.jsxs)(nt.a,{children:[x?Object(l.jsx)(tt.a,{children:Object(l.jsx)(ct.a,{align:"center",colSpan:4,children:Object(l.jsx)(ge.a,{animation:"border",role:"status",children:Object(l.jsx)("span",{className:"sr-only",children:"Loading..."})})})}):b.length>0?(ae>0?b.slice(Z*ae,Z*ae+ae):b).map((function(e){return Object(l.jsxs)(tt.a,{children:[Object(l.jsx)(ct.a,{component:"th",scope:"row",children:e.projectName}),Object(l.jsx)(ct.a,{align:"left",children:e.location}),Object(l.jsx)(ct.a,{align:"left",children:e.projectType}),Object(l.jsxs)(ct.a,{align:"right",style:{padding:0},children:[Object(l.jsx)(z.a,{onClick:function(){return c=e.projectID,void t.push("/project/"+c+"/gate");var c},children:Object(l.jsx)(ft.a,{"data-value":e.projectID,size:21,color:"royalblue"})}),Object(l.jsx)(z.a,{onClick:function(){return c=e.projectID,void t.push("/project/"+c);var c},children:Object(l.jsx)(mt.a,{"data-value":e.projectID,size:21,color:"royalblue"})}),Object(l.jsx)(z.a,{onClick:function(){return t=e.projectID,I(t),void B("delete");var t},children:Object(l.jsx)(gt.a,{color:"red",size:21})})]})]},e.projectName)})):Object(l.jsx)(tt.a,{children:Object(l.jsx)(ct.a,{align:"center",colSpan:4,children:"No Projects Found"})}),ie>0&&Object(l.jsx)(tt.a,{style:{height:53*ie},children:Object(l.jsx)(ct.a,{colSpan:6})})]}),Object(l.jsx)(pt.a,{children:Object(l.jsx)(tt.a,{children:Object(l.jsx)(xt.a,{rowsPerPageOptions:[5,10,{label:"All",value:-1}],colSpan:4,count:b.length,rowsPerPage:ae,page:Z,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,t){$(t)},onChangeRowsPerPage:function(e){re(parseInt(e.target.value,10)),$(0)},ActionsComponent:He})})})]})})})]})}var Nt=c(347),Ct=c.n(Nt);c(556);function St(){var e=Object(S.i)().projectID,t=Object(n.useState)(!1),c=Object(o.a)(t,2),a=c[0],r=c[1],s=Object(n.useState)({projectName:"",projectType:"",location:"",contactNumber:"",maCompany:"",equipManu:""}),j=Object(o.a)(s,2),u=j[0],d=j[1],b=Object(n.useState)(!1),h=Object(o.a)(b,2),O=h[0],p=(h[1],Object(n.useState)([])),x=Object(o.a)(p,2),f=x[0],v=x[1];Object(n.useEffect)((function(){re(e).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(t.message);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("There was an error Get Project Info!",e)})),je("project").then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(Object.entries(t.message).map((function(e){return{id:e[0],name:e[1].name}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("There was an error Get Project Types!",e)}))}),[O]);var y=function(e){var t=e.target,c=t.id,n=t.value;d((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(me.a)({},c,n))}))},w=function(){(function(e,t){var c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"modifyProject",content:{projectID:e,modifyParams:t}})};return fetch(ee,c).then(te)})(e,u).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:X.success("Update Successful!");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("There was an error!",e)}))};return Object(l.jsxs)("div",{children:[Object(l.jsxs)(Ot.a,{children:[Object(l.jsx)(Ot.a.Item,{href:"/home",children:"Home"}),Object(l.jsx)(Ot.a.Item,{href:"/project",children:"Projects"}),Object(l.jsx)(Ot.a.Item,{active:!0,children:"Project Info"})]}),Object(l.jsxs)(fe.a,{noValidate:!0,validated:a,onSubmit:function(e){e.preventDefault();var t=e.currentTarget;!1===t.checkValidity()&&(e.preventDefault(),e.stopPropagation()),r(!0),console.log(t.checkValidity()),t.checkValidity()&&w()},children:[Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:3,align:"right",children:"Project ID"}),Object(l.jsx)(ye.a,{sm:4,children:Object(l.jsx)(fe.a.Control,{type:"text",placeholder:e,readOnly:!0})})]}),Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:3,align:"right",children:"Project Name"}),Object(l.jsxs)(ye.a,{sm:4,children:[Object(l.jsx)(fe.a.Control,{required:!0,placeholder:"Name",id:"projectName",name:"projectName",value:u.projectName,onChange:y}),Object(l.jsx)(fe.a.Control.Feedback,{type:"invalid",children:"Project Name is a required field."})]})]}),Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:3,align:"right",children:"Project Type"}),Object(l.jsxs)(ye.a,{sm:4,children:[Object(l.jsxs)(fe.a.Control,{custom:!0,required:!0,as:"select",id:"projectType",name:"projectType",value:null===u.projectType?"":u.projectType,onChange:y,children:[Object(l.jsx)("option",{value:"",children:"--Select Type--"}),f.map((function(e){return Object(l.jsx)("option",{value:e.id,children:e.name})}))]}),Object(l.jsx)(fe.a.Control.Feedback,{type:"invalid",children:"Project Type is a required field."})]})]}),Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:3,align:"right",children:"Location"}),Object(l.jsxs)(ye.a,{sm:4,children:[Object(l.jsx)(fe.a.Control,{required:!0,id:"location",name:"location",value:u.location,onChange:y}),Object(l.jsx)(fe.a.Control.Feedback,{type:"invalid",children:"Location is a required field."})]})]}),Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:3,align:"right",children:"Equipment Manufacturer"}),Object(l.jsxs)(ye.a,{sm:4,children:[Object(l.jsx)(fe.a.Control,{required:!0,id:"equipManu",name:"equipManu",value:u.equipManu,onChange:y}),Object(l.jsx)(fe.a.Control.Feedback,{type:"invalid",children:"Equipment Manufacturer is a required field."})]})]}),Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:3,align:"right",children:"MA Company"}),Object(l.jsxs)(ye.a,{sm:4,children:[Object(l.jsx)(fe.a.Control,{required:!0,id:"maCompany",name:"maCompany",value:u.maCompany,onChange:y}),Object(l.jsx)(fe.a.Control.Feedback,{type:"invalid",children:"MA Company is a required field."})]})]}),Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:3,align:"right",children:"Contact No."}),Object(l.jsx)(fe.a.Label,{column:!0,sm:4,children:Object(l.jsx)(Ct.a,{inputProps:{required:!0},placeholder:"+XX-XXXX-XXXX",id:"contactNumber",name:"contactNumber",country:"sg",value:String(u.contactNumber),onChange:function(e){d((function(t){return Object(i.a)(Object(i.a)({},t),{},Object(me.a)({},"contactNumber",parseInt(e)))}))},isValid:function(e,t){return 0!==e.length}})})]}),Object(l.jsx)(fe.a.Group,{as:ve.a,children:Object(l.jsx)(ye.a,{sm:8,className:"d-flex justify-content-end",children:Object(l.jsx)(pe.a,{type:"submit",children:"Update"})})})]})]})}var Tt=c(623),Dt=c(247),It=c.n(Dt);function Pt(e){var t=Object(S.i)().projectID,c=Object(n.useState)(""),a=Object(o.a)(c,2),r=a[0],s=a[1],j=Object(n.useState)({barrierDelay:5,networkWarningDuration:5,instantImgUpload:!1,vehicleColorDetect:!1,localImgStore:!1}),u=Object(o.a)(j,2),d=u[0],b=u[1],h=Object(n.useState)(!1),O=Object(o.a)(h,2),p=O[0];O[1];Object(n.useEffect)((function(){re(t).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(t.message.projectName);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("Get Project Info, there was an error!",e)}));b({barrierDelay:5,networkWarningDuration:5,instantImgUpload:!1,vehicleColorDetect:!1,localImgStore:!1})}),[p]);var x=function(e,t,c){var n,a;void 0===c?(n=e.target.id,a=e.target.value):(n=c.id,a=e),"boolean"===typeof d[n]?b((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(me.a)({},n,!d[n]))})):b((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(me.a)({},n,a))}))},f=function(){};function v(e){return e+" mins"}return Object(l.jsxs)("div",{children:[Object(l.jsxs)(Ot.a,{children:[Object(l.jsx)(Ot.a.Item,{href:"/home",children:"Home"}),Object(l.jsx)(Ot.a.Item,{href:"/project",children:"Projects"}),Object(l.jsx)(Ot.a.Item,{active:!0,children:"Business Details"})]}),Object(l.jsx)(Ot.a,{children:Object(l.jsx)("h5",{style:{color:"#6c757d"},children:r})}),Object(l.jsxs)(fe.a,{onSubmit:function(e){e.preventDefault(),f()},children:[Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,children:"Barrier Opening Delay"}),Object(l.jsx)(ye.a,{sm:4,className:"align-items-center d-flex justify-content-center",children:Object(l.jsx)(Tt.a,{children:Object(l.jsx)(It.a,{strict:!0,id:"barrierDelay",format:v,className:"form-control",value:d.barrierDelay,min:0,max:100,onChange:x})})})]}),Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,children:"Duration before issuing network down warning"}),Object(l.jsx)(ye.a,{sm:4,className:"align-items-center d-flex justify-content-center",children:Object(l.jsx)(Tt.a,{children:Object(l.jsx)(It.a,{strict:!0,id:"networkWarningDuration",format:v,className:"form-control",value:d.networkWarningDuration,min:0,max:100,onChange:x})})})]}),Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,children:"Enable Instant Image Upload to Server"}),Object(l.jsx)(ye.a,{sm:4,className:"align-items-center d-flex justify-content-center",children:Object(l.jsx)(fe.a.Check,{checked:d.instantImgUpload,type:"switch",id:"instantImgUpload",onChange:x})})]}),Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,children:"Enable Local Storage of images after uploading"}),Object(l.jsx)(ye.a,{sm:4,className:" align-items-center d-flex justify-content-center",children:Object(l.jsx)(fe.a.Check,{checked:d.localImgStore,type:"switch",id:"localImgStore",onChange:x})})]}),Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,children:"Enable Vehicle Colour Detection"}),Object(l.jsx)(ye.a,{sm:4,className:" align-items-center d-flex justify-content-center",children:Object(l.jsx)(fe.a.Check,{checked:d.vehicleColorDetect,type:"switch",id:"vehicleColorDetect",onChange:x})})]}),Object(l.jsx)(fe.a.Group,{as:ve.a,children:Object(l.jsx)(ye.a,{sm:8,className:"d-flex justify-content-end",children:Object(l.jsx)(pe.a,{type:"submit",children:"Update"})})})]})]})}var kt=c(644),Gt=c(349),Mt=c.n(Gt),Rt=c(350),Lt=c.n(Rt);function At(){var e=Object(S.i)(),t=e.projectID,c=e.gateID,r=(Object(S.g)(),Object(S.h)().pathname,Object(n.useState)([])),s=Object(o.a)(r,2),j=s[0],u=s[1],d=Object(n.useState)(!1),b=Object(o.a)(d,2),h=b[0],O=b[1],p=Object(n.useState)({delete:!1,edit:!1}),x=Object(o.a)(p,2),f=x[0],v=x[1],y=Object(n.useState)(""),w=Object(o.a)(y,2),N=w[0],C=w[1],T=Object(n.useState)(""),D=Object(o.a)(T,2),I=D[0],P=D[1],k=Object(n.useState)(!0),G=Object(o.a)(k,2),M=(G[0],G[1],Object(n.useState)(null)),R=Object(o.a)(M,2),L=R[0],A=R[1],E=Object(n.useState)(!1),q=Object(o.a)(E,2),F=q[0],H=(q[1],Object(n.useState)([])),J=Object(o.a)(H,2),V=J[0],B=J[1],Y=Object(n.useState)([]),U=Object(o.a)(Y,2),W=U[0],K=U[1],Q=function(){O(!0),re(t).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C(t.message.projectName);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("Get Project Info, there was an error!",e)})),ie(c).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P(t.message.gateName);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("Get Gate Info, there was an error!",e)})),function(e,t){var c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getTable",content:{objName:"device",columns:t,filters:{gateID:e}}})};return fetch(ee,c).then(te)}(c,["deviceID","deviceName","deviceType","deviceStatus","deviceIP"]).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(!1),console.log(t.content),u(t.content);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("Get Device, there was an error!",e)})),je("device").then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:K(t.message),B(Object.entries(t.message).map((function(e){return{id:e[0],name:e[1].name}})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("There was an error Get Device Types!",e)})),ae(0)};Object(n.useEffect)((function(){Q()}),[F]);var Z=function(e){var t=f[e];v((function(c){return Object(i.a)(Object(i.a)({},c),{},Object(me.a)({},e,!t))}))},$=function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:le(t).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Q(),Z("delete"),X.success("Device Deleted");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("Delete Device, There was an error!",e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=a.a.useState(0),ce=Object(o.a)(_,2),ne=ce[0],ae=ce[1],se=a.a.useState(10),oe=Object(o.a)(se,2),ue=oe[0],de=oe[1],be=j.length>0&&!h?ue-Math.min(ue,j.length-ne*ue):ue-1;return Object(l.jsxs)("div",{children:[Object(l.jsx)(xe,{hide:f.delete,success:function(){$(L)},toggleModal:function(){Z("delete")},title:"Confirm Deletion",body:"Delete this device?"}),Object(l.jsx)(we,{deviceTypes:V,hide:f.edit,deviceID:L,gateID:c,success:function(){Q(),Z("edit")},toggleModal:function(){Z("edit")}}),Object(l.jsxs)("div",{className:"content",children:[Object(l.jsxs)(Ot.a,{children:[Object(l.jsx)(Ot.a.Item,{href:"/home",children:"Home"}),Object(l.jsx)(Ot.a.Item,{href:"/project",children:"Projects"}),Object(l.jsx)(Ot.a.Item,{href:"/project/"+t+"/gate",children:"Gates"}),Object(l.jsx)(Ot.a.Item,{active:!0,children:"Devices"})]}),Object(l.jsxs)("div",{className:"d-flex align-items-center",children:[Object(l.jsxs)("h5",{style:{color:"#6c757d"},children:[N," / ",I]}),Object(l.jsx)("div",{style:{"flex-grow":"1"}}),Object(l.jsx)(fe.a,{inline:!0,className:"rightFlex",onSubmit:function(e){e.preventDefault()},children:Object(l.jsxs)(ve.a,{children:[Object(l.jsx)(ye.a,{sm:"auto",children:Object(l.jsxs)(pe.a,{className:"btn btn-info align-items-center d-flex",type:"button",onClick:Q,children:[Object(l.jsx)(yt.a,{}),"\xa0 Refresh"]})}),Object(l.jsx)(ye.a,{sm:"auto",children:Object(l.jsx)(pe.a,{className:"btn btn-success",type:"button",onClick:function(){A(null),Z("edit")},children:"+ Add"})})]})})]})]}),Object(l.jsx)("div",{className:"content",children:Object(l.jsx)(Ze.a,{component:$e.a,children:Object(l.jsxs)(_e.a,{"aria-label":"simple table",children:[Object(l.jsx)(et.a,{children:Object(l.jsxs)(tt.a,{children:[Object(l.jsx)(ct.a,{align:"left",children:Object(l.jsx)("b",{children:"ID"})}),Object(l.jsx)(ct.a,{align:"center",children:Object(l.jsx)("b",{children:"Name"})}),Object(l.jsx)(ct.a,{align:"center",children:Object(l.jsx)("b",{children:"Type"})}),Object(l.jsx)(ct.a,{align:"center",children:Object(l.jsx)("b",{children:"IP"})}),Object(l.jsx)(ct.a,{align:"center",children:Object(l.jsx)("b",{children:"Status"})}),Object(l.jsx)(ct.a,{align:"right",children:Object(l.jsx)("b",{children:"Actions"})})]})}),Object(l.jsxs)(nt.a,{children:[h?Object(l.jsx)(tt.a,{children:Object(l.jsx)(ct.a,{align:"center",colSpan:6,children:Object(l.jsx)(ge.a,{animation:"border",role:"status",children:Object(l.jsx)("span",{className:"sr-only",children:"Loading..."})})})}):j.length>0?(ue>0?j.slice(ne*ue,ne*ue+ue):j).map((function(e,t){return Object(l.jsxs)(tt.a,{children:[Object(l.jsx)(ct.a,{align:"left",children:e.deviceID}),Object(l.jsx)(ct.a,{align:"center",children:e.deviceName}),Object(l.jsx)(ct.a,{align:"center",children:null===e.deviceType||void 0===W[e.deviceType]?null:W[e.deviceType].name}),Object(l.jsx)(ct.a,{align:"center",children:""==e.deviceIP||null==e.deviceIP?"-":e.deviceIP}),Object(l.jsx)(ct.a,{align:"center",children:"online"===e.deviceStatus?Object(l.jsx)(kt.a,{title:"Online",children:Object(l.jsx)(Mt.a,{style:{color:"#4caf50"}})}):Object(l.jsx)(kt.a,{title:"Offline",children:Object(l.jsx)(Lt.a,{style:{color:"#f44336"}})})}),Object(l.jsxs)(ct.a,{align:"right",style:{padding:0},children:[Object(l.jsx)(kt.a,{title:"Edit",children:Object(l.jsx)(z.a,{onClick:function(){A(e.deviceID),Z("edit")},children:Object(l.jsx)(mt.a,{size:21,color:"royalblue"})})}),Object(l.jsx)(kt.a,{title:"Delete",children:Object(l.jsx)(z.a,{onClick:function(){A(e.deviceID),Z("delete")},children:Object(l.jsx)(gt.a,{color:"red",size:21})})})]})]},e.gateName)})):Object(l.jsx)(tt.a,{children:Object(l.jsx)(ct.a,{align:"center",colSpan:6,children:"No Devices Found"})}),be>0&&Object(l.jsx)(tt.a,{style:{height:53*be},children:Object(l.jsx)(ct.a,{colSpan:6})})]}),Object(l.jsx)(pt.a,{children:Object(l.jsx)(tt.a,{children:Object(l.jsx)(xt.a,{rowsPerPageOptions:[5,10,{label:"All",value:-1}],colSpan:4,count:j.length,rowsPerPage:ue,page:ne,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,t){ae(t)},onChangeRowsPerPage:function(e){de(parseInt(e.target.value,10)),ae(0)},ActionsComponent:He})})})]})})})]})}var Et=c(624),qt=c(625);function Ft(){var e=Object(S.i)().projectID,t=Object(S.g)(),c=Object(S.h)().pathname,r=Object(n.useState)([]),s=Object(o.a)(r,2),j=s[0],u=s[1],d=Object(n.useState)(!1),b=Object(o.a)(d,2),h=b[0],O=b[1],p=Object(n.useState)([]),x=Object(o.a)(p,2),f=x[0],v=x[1],y=Object(n.useState)([]),w=Object(o.a)(y,2),N=w[0],C=w[1],T=Object(n.useState)(""),D=Object(o.a)(T,2),I=D[0],P=D[1],k=Object(n.useState)({delete:!1,edit:!1}),G=Object(o.a)(k,2),M=G[0],R=G[1],L=Object(n.useState)(!0),A=Object(o.a)(L,2),E=A[0],q=A[1],F=Object(n.useState)(""),H=Object(o.a)(F,2),J=H[0],V=H[1],B=Object(n.useState)(!1),Y=Object(o.a)(B,2),U=Y[0],W=(Y[1],function(){O(!0),re(e).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P(t.message.projectName);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("Get Project Info, there was an error!",e)})),ae(e,["gateID","gateName","gateType"]).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(!1),console.log(t.content),u(t.content);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("Get Gate, there was an error!",e)})),je("gate").then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C(t.message),v(Object.entries(t.message).map((function(e){return{id:e[0],name:e[1].name}})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("There was an error Get Gate Types!",e)})),ne(0)});Object(n.useEffect)((function(){W()}),[U]);var K=function(e,t){(function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"openGate",content:{gateID:e}})};return fetch(ee,t).then(te)})(e).then(function(){var e=Object(g.a)(m.a.mark((function e(c){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:X.success("Opened Gate "+t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("There was an error Open Gate!",e)}))},Q=function(e){var t=M[e];R((function(c){return Object(i.a)(Object(i.a)({},c),{},Object(me.a)({},e,!t))}))},Z=function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:oe(t).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:W(),Q("delete"),X.success("Gate Deleted");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("Delete Gate, There was an error!",e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=a.a.useState(0),_=Object(o.a)($,2),ce=_[0],ne=_[1],se=a.a.useState(10),ie=Object(o.a)(se,2),le=ie[0],ue=ie[1],de=j.length>0&&!h?le-Math.min(le,j.length-ce*le):le-1;return Object(l.jsxs)("div",{children:[Object(l.jsx)(xe,{hide:M.delete,success:function(){Z(J)},toggleModal:function(){Q("delete")},title:"Confirm Deletion",body:"Delete this gate?"}),Object(l.jsx)(Te,{gateTypes:f,hide:M.edit,gateID:J,newState:E,projectID:e,success:function(){W(),Q("edit")},toggleModal:function(){Q("edit")}}),Object(l.jsxs)("div",{className:"content",children:[Object(l.jsxs)(Ot.a,{children:[Object(l.jsx)(Ot.a.Item,{href:"/home",children:"Home"}),Object(l.jsx)(Ot.a.Item,{href:"/project",children:"Projects"}),Object(l.jsx)(Ot.a.Item,{active:!0,children:"Gates"})]}),Object(l.jsxs)("div",{className:"d-flex align-items-center",children:[Object(l.jsx)("h5",{style:{color:"#6c757d"},children:I}),Object(l.jsx)("div",{style:{"flex-grow":"1"}}),Object(l.jsx)(fe.a,{inline:!0,onSubmit:function(e){e.preventDefault()},children:Object(l.jsxs)(ve.a,{children:[Object(l.jsx)(ye.a,{sm:"auto",children:Object(l.jsxs)(pe.a,{className:"btn btn-info align-items-center d-flex",type:"button",onClick:W,children:[Object(l.jsx)(yt.a,{}),"\xa0 Refresh"]})}),Object(l.jsx)(ye.a,{sm:"auto",children:Object(l.jsx)(pe.a,{className:"btn btn-success",type:"button",onClick:function(){q(!0),Q("edit")},children:"+ Add"})})]})})]})]}),Object(l.jsx)("div",{className:"content",children:Object(l.jsx)(Ze.a,{component:$e.a,children:Object(l.jsxs)(_e.a,{"aria-label":"simple table",children:[Object(l.jsx)(et.a,{children:Object(l.jsxs)(tt.a,{children:[Object(l.jsx)(ct.a,{align:"left",children:Object(l.jsx)("b",{children:"ID"})}),Object(l.jsx)(ct.a,{align:"center",children:Object(l.jsx)("b",{children:"Name"})}),Object(l.jsx)(ct.a,{align:"center",children:Object(l.jsx)("b",{children:"Type"})}),Object(l.jsx)(ct.a,{align:"right",children:Object(l.jsx)("b",{children:"Actions"})})]})}),Object(l.jsxs)(nt.a,{children:[h?Object(l.jsx)(tt.a,{children:Object(l.jsx)(ct.a,{align:"center",colSpan:4,children:Object(l.jsx)(ge.a,{animation:"border",role:"status",children:Object(l.jsx)("span",{className:"sr-only",children:"Loading..."})})})}):j.length>0?(le>0?j.slice(ce*le,ce*le+le):j).map((function(e,n){return Object(l.jsxs)(tt.a,{children:[Object(l.jsx)(ct.a,{align:"left",children:e.gateID}),Object(l.jsx)(ct.a,{align:"center",children:e.gateName}),Object(l.jsx)(ct.a,{align:"center",children:null===e.gateType||void 0===N[e.gateType]?null:N[e.gateType].name}),Object(l.jsxs)(ct.a,{align:"right",style:{padding:0},children:[Object(l.jsx)(kt.a,{title:"Devices",children:Object(l.jsx)(z.a,{style:{padding:"5px 10px"},onClick:function(){var n;n=e.gateID,t.push(c+"/"+String(n))},children:Object(l.jsx)(Et.a,{size:21,color:"royalblue"})})}),Object(l.jsx)(kt.a,{title:"Edit",children:Object(l.jsx)(z.a,{style:{padding:"5px 10px"},onClick:function(){V(e.gateID),q(!1),Q("edit")},children:Object(l.jsx)(mt.a,{size:21,color:"royalblue"})})}),Object(l.jsx)(kt.a,{title:"Open Gate",children:Object(l.jsx)(z.a,{style:{padding:"5px 10px"},onClick:function(){K(e.gateID,e.gateName)},children:Object(l.jsx)(qt.a,{size:21,color:"green"})})}),Object(l.jsx)(kt.a,{title:"Delete",children:Object(l.jsx)(z.a,{style:{padding:"5px 10px"},onClick:function(){V(e.gateID),Q("delete")},children:Object(l.jsx)(gt.a,{color:"red",size:21})})})]})]},e.gateName)})):Object(l.jsx)(tt.a,{children:Object(l.jsx)(ct.a,{align:"center",colSpan:6,children:"No Gates Found"})}),de>0&&Object(l.jsx)(tt.a,{style:{height:53*de},children:Object(l.jsx)(ct.a,{colSpan:6})})]}),Object(l.jsx)(pt.a,{children:Object(l.jsx)(tt.a,{children:Object(l.jsx)(xt.a,{rowsPerPageOptions:[5,10,{label:"All",value:-1}],colSpan:4,count:j.length,rowsPerPage:le,page:ce,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,t){ne(t)},onChangeRowsPerPage:function(e){ue(parseInt(e.target.value,10)),ne(0)},ActionsComponent:He})})})]})})})]})}var Ht=c(621),Jt=c(351),Vt=c.n(Jt),zt=c(352),Bt=c.n(zt);function Yt(e){var t=Object(S.i)().projectID,c=Object(n.useState)([]),r=Object(o.a)(c,2),s=r[0],j=r[1],u=Object(n.useState)(null),d=Object(o.a)(u,2),b=d[0],h=d[1],O=Object(n.useState)(""),p=Object(o.a)(O,2),x=p[0],f=p[1],v=Object(n.useState)({trigger:"",voiceMsg:"",textMsg:""}),y=Object(o.a)(v,2),w=y[0],N=y[1],C=Object(n.useState)(!1),T=Object(o.a)(C,2),D=T[0];T[1];Object(n.useEffect)((function(){re(t).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f(t.message.projectName);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("Get Project Info, there was an error!",e)}));j([{id:1,trigger:"Trigger 1",voiceMsg:"Sample 1",textMsg:"Sample 01"},{id:2,trigger:"Trigger 2",voiceMsg:"Sample 2",textMsg:"Sample 02"},{id:3,trigger:"Trigger 3",voiceMsg:"Sample 3",textMsg:"Sample 03"},{id:4,trigger:"Trigger 4",voiceMsg:"Sample 4",textMsg:"Sample 04"},{id:5,trigger:"Trigger 5",voiceMsg:"Sample 5",textMsg:"Sample 05"},{id:6,trigger:"Trigger 6",voiceMsg:"Sample 6",textMsg:"Sample 06"}])}),[D]);var I=function(e){var t=e.target,c=t.id,n=t.value;N((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(me.a)({},c,n))}))},P=a.a.useState(0),k=Object(o.a)(P,2),G=k[0],M=k[1],R=a.a.useState(5),L=Object(o.a)(R,2),A=L[0],E=L[1],q=A-Math.min(A,s.length-G*A);return Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{className:"content",children:[Object(l.jsxs)(Ot.a,{children:[Object(l.jsx)(Ot.a.Item,{href:"/home",children:"Home"}),Object(l.jsx)(Ot.a.Item,{href:"/project",children:"Projects"}),Object(l.jsx)(Ot.a.Item,{active:!0,children:"LED Configuration"})]}),Object(l.jsx)(Ot.a,{children:Object(l.jsx)("h5",{style:{color:"#6c757d"},children:x})})]}),Object(l.jsx)("div",{className:"content",children:Object(l.jsx)(Ze.a,{component:$e.a,children:Object(l.jsxs)(_e.a,{"aria-label":"simple table",children:[Object(l.jsx)(et.a,{children:Object(l.jsxs)(tt.a,{children:[Object(l.jsx)(ct.a,{align:"center",children:"Trigger"}),Object(l.jsx)(ct.a,{align:"center",children:"Voice Message"}),Object(l.jsx)(ct.a,{align:"center",children:"Text Message"}),Object(l.jsx)(ct.a,{align:"right",children:"Actions"})]})}),Object(l.jsxs)(nt.a,{children:[(A>0?s.slice(G*A,G*A+A):s).map((function(e){return Object(l.jsxs)(tt.a,{children:[Object(l.jsx)(ct.a,{component:"th",scope:"row",align:"center",children:e.trigger}),Object(l.jsx)(ct.a,{align:"center",children:b===e.id?Object(l.jsx)(Ht.a,{id:"voiceMsg",label:"Standard",value:w.voiceMsg,onChange:I}):e.voiceMsg}),Object(l.jsx)(ct.a,{align:"center",children:b===e.id?Object(l.jsx)(Ht.a,{id:"textMsg",label:"Standard",value:w.textMsg,onChange:I}):e.textMsg}),Object(l.jsx)(ct.a,{align:"right",style:{padding:0},children:null===b?Object(l.jsx)(z.a,{onClick:function(){return function(e){var t=e.id,c=e.trigger,n=e.voiceMsg,a=e.textMsg;N({trigger:c,voiceMsg:n,textMsg:a}),h(t)}(e)},children:Object(l.jsx)(mt.a,{size:21,color:"royalblue"})}):b===e.id?Object(l.jsxs)("div",{children:[Object(l.jsx)(z.a,{onClick:function(){},children:Object(l.jsx)(Vt.a,{size:21,color:"primary"})}),Object(l.jsx)(z.a,{onClick:function(){return h(null)},children:Object(l.jsx)(Bt.a,{size:21,color:"error"})})]}):Object(l.jsx)(z.a,{disabled:!0,children:Object(l.jsx)(mt.a,{size:21})})})]},e.id)})),q>0&&Object(l.jsx)(tt.a,{style:{height:53*q},children:Object(l.jsx)(ct.a,{colSpan:6})})]}),Object(l.jsx)(pt.a,{children:Object(l.jsx)(tt.a,{children:Object(l.jsx)(xt.a,{rowsPerPageOptions:[5,10,{label:"All",value:-1}],colSpan:4,count:s.length,rowsPerPage:A,page:G,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,t){h(null),M(t)},onChangeRowsPerPage:function(e){E(parseInt(e.target.value,10)),M(0)},ActionsComponent:He})})})]})})})]})}var Ut=c(637);function Wt(e){var t=Object(S.g)(),c=Object(S.j)(),n=c.path,a=c.url,r=Object(S.h)().pathname.split("/")[3],s=function(e){t.push(a+e)};return Object(l.jsxs)("div",{className:"tabModal",style:{background:"transparent"},children:[Object(l.jsxs)(dt.a,{children:[Object(l.jsx)("meta",{charSet:"utf-8"}),Object(l.jsx)("title",{children:"Projects"})]}),Object(l.jsx)(Ut.a.Container,{id:"left-tabs-example",children:Object(l.jsxs)(ve.a,{children:[Object(l.jsx)(ye.a,{xs:"auto",children:Object(l.jsxs)(N.a,{variant:"pills",className:"flex-column",children:[Object(l.jsx)(N.a.Item,{children:Object(l.jsx)(N.a.Link,{onClick:function(){s("/info")},active:"info"===r,children:"Infomation"})}),Object(l.jsx)(N.a.Item,{children:Object(l.jsx)(N.a.Link,{onClick:function(){s("/business")},active:"business"===r,children:"Business"})}),Object(l.jsx)(N.a.Item,{children:Object(l.jsx)(N.a.Link,{onClick:function(){s("/gate")},active:"gate"===r,children:"Gates"})}),Object(l.jsx)(N.a.Item,{children:Object(l.jsx)(N.a.Link,{onClick:function(){s("/ledconfig")},active:"ledconfig"===r,children:"LED Config"})})]})}),Object(l.jsx)(ye.a,{sm:9,children:Object(l.jsxs)(S.d,{children:[Object(l.jsx)(S.b,{exact:!0,path:"".concat(n,"/info"),children:Object(l.jsx)(St,{})}),Object(l.jsx)(S.b,{exact:!0,path:"".concat(n,"/business"),children:Object(l.jsx)(Pt,{})}),Object(l.jsx)(S.b,{exact:!0,path:"".concat(n,"/gate/:gateID"),children:Object(l.jsx)(At,{})}),Object(l.jsx)(S.b,{exact:!0,path:"".concat(n,"/gate"),children:Object(l.jsx)(Ft,{})}),Object(l.jsx)(S.b,{exact:!0,path:"".concat(n,"/ledconfig"),children:Object(l.jsx)(Yt,{})}),Object(l.jsx)(S.b,{path:n,children:Object(l.jsx)(S.a,{to:"".concat(a,"/info")})})]})})]})})]})}function Xt(e){e.match;var t=Object(n.useState)([]),c=Object(o.a)(t,2),r=c[0],s=c[1],j=Object(n.useState)(!1),u=Object(o.a)(j,2),d=u[0],b=u[1],h=Object(n.useState)(""),O=Object(o.a)(h,2),p=O[0],x=O[1],f=Object(n.useState)([]),v=Object(o.a)(f,2),y=v[0],w=v[1],N=Object(n.useState)({delete:!1,add:!1,edit:!1}),C=Object(o.a)(N,2),S=C[0],T=C[1],D=Object(n.useState)({projectID:NaN,actualPlate:""}),I=Object(o.a)(D,2),P=I[0],k=I[1],G=Object(n.useState)({projectID:NaN,actualPlate:""}),M=Object(o.a)(G,2),R=M[0],L=M[1],A=Object(n.useState)({projectID:NaN,matchPlate:"",actualPlate:""}),E=Object(o.a)(A,2),q=E[0],F=E[1],H=Object(n.useState)(!1),J=Object(o.a)(H,2),V=J[0],B=(J[1],Object(n.useState)([])),Y=Object(o.a)(B,2),U=Y[0],W=Y[1],X=Object(n.useState)({}),K=Object(o.a)(X,2),Q=K[0],Z=K[1],$=Object(n.useState)(!1),_=Object(o.a)($,2),ne=_[0],ae=_[1],re=function(){ae(!0),function(e,t){var c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getTable",content:{objName:"specialPlate",columns:e,filters:t}})};return fetch(ee,c).then(te)}(["projectID","matchPlate","actualPlate"]).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ae(!1),console.log(t.content),s(t.content);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("There was an error!",e)})),we(0)},se=function(){var e=Object(g.a)(m.a.mark((function e(t){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={},t.forEach(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c[t.projectID]=t.projectName;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,c;case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){ce(["projectID","projectName"]).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:W(t.content),se(t.content).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Z,e.next=3,t;case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("There was an error!",e)}))}),[V]),Object(n.useEffect)((function(){re()}),Q),Object(n.useEffect)((function(){je()}),[r,R]);var ie=function(e){var t=e.target,c=t.id,n=t.value;"projectID"===c&&(n=parseInt(n)),k((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(me.a)({},c,n))}))},oe=function(e){var t=e.target,c=t.id,n=t.value;"projectID"===c&&(n=parseInt(n)),F((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(me.a)({},c,n))}))},le=function(e){var t=S[e];T((function(c){return Object(i.a)(Object(i.a)({},c),{},Object(me.a)({},e,!t))}))},je=function(e){var t=R.projectID,c=R.actualPlate;w(r.filter((function(e){return(Number.isNaN(t)||e.projectID===t)&&String(e.actualPlate).toLowerCase().indexOf(c.toLowerCase())>=0}))),we(0)},ue=function(e){(function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"deleteSpecialPlate",content:{matchPlate:e}})};return fetch(ee,t).then(te)})(e).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:re(),le("delete");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("There was an error!",e)}))},de=a.a.useState(0),be=Object(o.a)(de,2),he=be[0],we=be[1],Ne=a.a.useState(10),Ce=Object(o.a)(Ne,2),Se=Ce[0],Te=Ce[1],De=Se-Math.min(Se,y.length-he*Se);return Object(l.jsxs)("div",{children:[Object(l.jsxs)(dt.a,{children:[Object(l.jsx)("meta",{charSet:"utf-8"}),Object(l.jsx)("title",{children:"Regex"})]}),Object(l.jsx)(xe,{hide:S.delete,success:function(){ue(p)},toggleModal:function(){le("delete")},title:"Confirm Deletion",body:"Delete this regex?"}),Object(l.jsxs)(Oe.a,{show:S.add,onHide:function(){return le("add")},centered:!0,children:[Object(l.jsx)(Oe.a.Header,{closeButton:!0,children:Object(l.jsx)(Oe.a.Title,{children:"Add Plate Regex Record"})}),Object(l.jsx)(Oe.a.Body,{children:Object(l.jsxs)(fe.a,{noValidate:!0,validated:d,onSubmit:function(e){e.preventDefault();var t=e.currentTarget;!1===t.checkValidity()&&(e.preventDefault(),e.stopPropagation()),b(!0),console.log(t.checkValidity()),t.checkValidity()&&function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"createSpecialPlate",content:e})};return fetch(ee,t).then(te)}(q).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:re(),le("add");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("There was an error!",e)}))},children:[Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,align:"right",children:"Project Name"}),Object(l.jsxs)(ye.a,{sm:6,children:[Object(l.jsxs)(fe.a.Control,{custom:!0,required:!0,as:"select",id:"projectID",placeholder:"Name",onChange:oe,value:q.projectID,children:[Object(l.jsx)("option",{value:null,children:"--Select a Project--"}),U.map((function(e){return Object(l.jsx)("option",{value:e.projectID,children:e.projectName})}))]}),Object(l.jsx)(fe.a.Control.Feedback,{type:"invalid",children:"Project Name is a required field."})]})]}),Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,align:"right",children:"Regex for Plate"}),Object(l.jsxs)(ye.a,{sm:6,children:[Object(l.jsx)(fe.a.Control,{required:!0,placeholder:"Regex",id:"matchPlate",name:"matchPlate",value:q.matchPlate,onChange:oe}),Object(l.jsx)(fe.a.Control.Feedback,{type:"invalid",children:"Regex is a required field."})]})]}),Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,align:"right",children:"Actual Plate"}),Object(l.jsxs)(ye.a,{sm:6,children:[Object(l.jsx)(fe.a.Control,{required:!0,placeholder:"Actual Plate",id:"actualPlate",name:"actualPlate",value:q.actualPlate,onChange:oe}),Object(l.jsx)(fe.a.Control.Feedback,{type:"invalid",children:"Actual Plate is a required field."})]})]}),Object(l.jsxs)(Oe.a.Footer,{children:[Object(l.jsx)(pe.a,{variant:"secondary",onClick:function(){return le("add")},children:"Cancel"}),Object(l.jsx)(pe.a,{variant:"primary",type:"submit",children:"Confirm"})]})]})})]}),Object(l.jsxs)(Oe.a,{show:S.edit,onHide:function(){return le("edit")},centered:!0,children:[Object(l.jsx)(Oe.a.Header,{closeButton:!0,children:Object(l.jsx)(Oe.a.Title,{children:"Edit Plate Regex Record"})}),Object(l.jsx)(Oe.a.Body,{children:Object(l.jsxs)(fe.a,{noValidate:!0,validated:d,onSubmit:function(e){e.preventDefault();var t=e.currentTarget;!1===t.checkValidity()&&(e.preventDefault(),e.stopPropagation()),b(!0),console.log(t.checkValidity()),t.checkValidity()&&function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"modifySpecialPlate",content:{matchPlate:e.matchPlate,modifyParams:e}})};return fetch(ee,t).then(te)}(q).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:re(),le("edit");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("There was an error!",e)}))},children:[Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,align:"right",children:"Regex for Plate"}),Object(l.jsxs)(ye.a,{sm:6,children:[Object(l.jsx)(fe.a.Control,{required:!0,placeholder:"Regex",id:"matchPlate",name:"matchPlate",value:q.matchPlate,onChange:oe}),Object(l.jsx)(fe.a.Control.Feedback,{type:"invalid",children:"Regex is a required field."})]})]}),Object(l.jsxs)(fe.a.Group,{as:ve.a,children:[Object(l.jsx)(fe.a.Label,{column:!0,sm:4,align:"right",children:"Actual Plate"}),Object(l.jsxs)(ye.a,{sm:6,children:[Object(l.jsx)(fe.a.Control,{required:!0,placeholder:"Actual Plate",id:"actualPlate",name:"actualPlate",value:q.actualPlate,onChange:oe}),Object(l.jsx)(fe.a.Control.Feedback,{type:"invalid",children:"Actual Plate is a required field."})]})]}),Object(l.jsxs)(Oe.a.Footer,{children:[Object(l.jsx)(pe.a,{variant:"secondary",onClick:function(){return le("edit")},children:"Cancel"}),Object(l.jsx)(pe.a,{variant:"primary",type:"submit",children:"Confirm"})]})]})})]}),Object(l.jsxs)("div",{className:"content",children:[Object(l.jsxs)(Ot.a,{children:[Object(l.jsx)(Ot.a.Item,{href:"/home",children:"Home"}),Object(l.jsx)(Ot.a.Item,{active:!0,children:"Plate Regex"})]}),Object(l.jsx)(fe.a,{onSubmit:function(e){e.preventDefault()},children:Object(l.jsxs)(ve.a,{className:"d-flex",children:[Object(l.jsx)(ye.a,{sm:"auto",children:Object(l.jsxs)(pe.a,{className:"btn btn-info align-items-center d-flex",type:"button",onClick:re,children:[Object(l.jsx)(yt.a,{}),"\xa0 Refresh"]})}),Object(l.jsx)(ye.a,{sm:"auto",children:Object(l.jsx)(pe.a,{className:"btn btn-success",type:"button",onClick:function(){F({projectID:"",matchPlate:"",actualPlate:""}),b(!1),le("add")},children:"Add +"})}),Object(l.jsx)("div",{style:{"flex-grow":"1"}}),Object(l.jsx)(ye.a,{sm:"auto",children:Object(l.jsxs)(fe.a.Control,{custom:!0,as:"select",id:"projectID",placeholder:"Name",onChange:ie,value:P.projectID,children:[Object(l.jsx)("option",{value:null,children:"All Projects"}),U.map((function(e){return Object(l.jsx)("option",{value:e.projectID,children:e.projectName})}))]})}),Object(l.jsx)(ye.a,{sm:"auto",children:Object(l.jsx)(fe.a.Control,{id:"actualPlate",placeholder:"Actual Plate",onChange:ie,value:P.actualPlate})}),Object(l.jsx)(ye.a,{sm:"auto",children:Object(l.jsx)(pe.a,{type:"button",onClick:function(){L(P)},children:"Search"})}),Object(l.jsx)(ye.a,{sm:"auto",children:Object(l.jsx)(pe.a,{type:"button",variant:"secondary",onClick:function(){k({projectID:NaN,actualPlate:""}),L({projectID:NaN,actualPlate:""})},children:"Cancel"})})]})})]}),Object(l.jsx)("div",{className:"content",children:Object(l.jsx)(Ze.a,{component:$e.a,children:Object(l.jsxs)(_e.a,{"aria-label":"simple table",children:[Object(l.jsx)(et.a,{children:Object(l.jsxs)(tt.a,{children:[Object(l.jsx)(ct.a,{align:"center",children:Object(l.jsx)("b",{children:"Project"})}),Object(l.jsx)(ct.a,{align:"center",children:Object(l.jsx)("b",{children:"Regex of Plate"})}),Object(l.jsx)(ct.a,{align:"center",children:Object(l.jsx)("b",{children:"Actual Plate"})}),Object(l.jsx)(ct.a,{align:"right",children:Object(l.jsx)("b",{children:"Actions"})})]})}),Object(l.jsxs)(nt.a,{children:[ne?Object(l.jsx)(tt.a,{children:Object(l.jsx)(ct.a,{align:"center",colSpan:6,children:Object(l.jsx)(ge.a,{animation:"border",role:"status",children:Object(l.jsx)("span",{className:"sr-only",children:"Loading..."})})})}):y.length>0?(Se>0?y.slice(he*Se,he*Se+Se):y).map((function(e){return Object(l.jsxs)(tt.a,{children:[Object(l.jsx)(ct.a,{component:"th",scope:"row",align:"center",children:Q[e.projectID]}),Object(l.jsx)(ct.a,{align:"center",children:Object(l.jsx)("div",{className:"outerPlate",children:Object(l.jsx)("div",{className:"innerPlate",children:Object(l.jsx)("u",{children:e.matchPlate})})})}),Object(l.jsx)(ct.a,{align:"center",children:Object(l.jsx)("div",{className:"outerPlate",children:Object(l.jsx)("div",{className:"innerPlate",children:Object(l.jsx)("u",{children:e.actualPlate})})})}),Object(l.jsxs)(ct.a,{align:"right",style:{padding:0},children:[Object(l.jsx)(z.a,{onClick:function(){!function(e){var t=e.projectID,c=e.matchPlate,n=e.actualPlate;b(!1),F({projectID:t,matchPlate:c,actualPlate:n}),le("edit")}(e)},children:Object(l.jsx)(mt.a,{size:21,color:"royalblue"})}),Object(l.jsx)(z.a,{onClick:function(){x(e.matchPlate),le("delete")},children:Object(l.jsx)(gt.a,{color:"red",size:21})})]})]},e.matchPlate)})):Object(l.jsx)(tt.a,{children:Object(l.jsx)(ct.a,{align:"center",colSpan:4,children:"No Plate Regex Found"})}),De>0&&Object(l.jsx)(tt.a,{style:{height:53*De},children:Object(l.jsx)(ct.a,{colSpan:6})})]}),Object(l.jsx)(pt.a,{children:Object(l.jsx)(tt.a,{children:Object(l.jsx)(xt.a,{rowsPerPageOptions:[5,10,{label:"All",value:-1}],colSpan:4,count:y.length,rowsPerPage:Se,page:he,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,t){we(t)},onChangeRowsPerPage:function(e){Te(parseInt(e.target.value,10)),we(0)},ActionsComponent:He})})})]})})})]})}var Kt=c(626),Qt=c(627),Zt=c(638);function $t(e){return e<10?"0"+e:e}function _t(e){return null===e?"":e.getFullYear().toString()+"-"+$t(e.getMonth()+1)+"-"+$t(e.getDate())+" "+$t(e.getHours())+":"+$t(e.getMinutes())+":"+$t(e.getSeconds())}function ec(e){e.match;var t=Object(n.useState)([]),c=Object(o.a)(t,2),r=c[0],s=c[1],j=Object(n.useState)(!1),u=Object(o.a)(j,2),d=(u[0],u[1],Object(n.useState)([])),b=Object(o.a)(d,2),h=b[0],O=b[1],p=Object(n.useState)({}),x=Object(o.a)(p,2),f=x[0],v=x[1],y=Object(n.useState)(null),w=Object(o.a)(y,2),N=w[0],C=w[1],S=Object(n.useState)(!1),T=Object(o.a)(S,2),D=T[0],I=T[1],P=["projectName","vehicleType","gateName","gateType","originalPlate","confirmedPlate"],k={projectName:"Project",vehicleType:"Vehicle Type",isOpened:"Open?",gateName:"Gate Name",gateType:"Gate Type",originalPlate:"Original Plate",confirmedPlate:"Actual Plate",detectionTime:"Detection Time",confirmedTime:"Confirmed Time",image1:"Image",plateImage:"Plate Image"},G=["projectName","vehicleType","isOpened","gateName","gateType","detectionTime","confirmedTime","originalPlate","confirmedPlate","image1","plateImage"],M={projectName:"120px",vehicleType:"120px",isOpened:"0px",gateName:"120px",gateType:"100px",originalPlate:"140px",confirmedPlate:"140px",detectionTime:"160px",confirmedTime:"160px",image1:"90px",plateImage:"90px"},R="50px",L="50px",A=Object(n.useState)({curField:"projectName",val:"",curField2:"gateName",val2:""}),E=Object(o.a)(A,2),q=E[0],F=E[1],H=Object(n.useState)({startTime:"",endTime:""}),J=Object(o.a)(H,2),V=J[0],z=J[1],B=Object(n.useState)({startTime:"",endTime:""}),Y=Object(o.a)(B,2),U=Y[0],W=Y[1],K=Object(n.useState)({curField:"projectName",val:"",curField2:"gateName",val2:""}),Q=Object(o.a)(K,2),Z=Q[0],$=Q[1],_=Object(n.useState)(!1),ce=Object(o.a)(_,2),ne=ce[0],ae=(ce[1],Object(n.useState)([])),re=Object(o.a)(ae,2),se=(re[0],re[1],function(){var e=""===V.startTime&&""===V.endTime?{}:{detectionTime:V.startTime+"|"+V.endTime};(function(e,t){var c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getTable",content:{objName:"movementLog",columns:e,filters:t}})};return fetch(ee,c).then(te)})(G.concat("logID"),e).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I(!1),s(t.content);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("There was an error!",e)})),Oe(0)});Object(n.useEffect)((function(){se(),I(!0),je("gate").then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(t.message);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("There was an error Get Gate Types!",e)}))}),[ne]),Object(n.useEffect)((function(){le()}),[r,Z]),Object(n.useEffect)((function(){se()}),[U]);var ie=function(e){var t=e.target,c=t.id,n=t.value;F("curField"===c?function(e){return{curField:n,val:""}}:function(e){return Object(i.a)(Object(i.a)({},e),{},Object(me.a)({},c,n))})},oe=function(e,t){z((function(c){return Object(i.a)(Object(i.a)({},c),{},Object(me.a)({},t,e))}))},le=function(e){var t=Z.curField,c=Z.val,n=Z.curField2,a=Z.val2;O(r.filter((function(e){return e[t].toLowerCase().indexOf(c.toLowerCase())>=0&&e[n].toLowerCase().indexOf(a.toLowerCase())>=0})).sort((function(e,t){return e.detectionTime<t.detectionTime?1:-1}))),Oe(0)},ue=function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:F((function(e){return Object(i.a)(Object(i.a)({},e),{},{val:"",val2:""})})),$((function(e){return Object(i.a)(Object(i.a)({},e),{},{val:"",val2:""})})),W({startTime:"",endTime:""}),z({startTime:"",endTime:""});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=a.a.useState(0),be=Object(o.a)(de,2),he=be[0],Oe=be[1],xe=a.a.useState(10),we=Object(o.a)(xe,2),Ne=we[0],Ce=we[1],Se=h.length>0&&!D?Ne-Math.min(Ne,h.length-he*Ne):Ne-1;return Object(l.jsxs)("div",{children:[Object(l.jsxs)(dt.a,{children:[Object(l.jsx)("meta",{charSet:"utf-8"}),Object(l.jsx)("title",{children:"Records"})]}),Object(l.jsx)(Ve,{src:N,toggleModal:function(){C(null)}}),Object(l.jsxs)("div",{className:"content",children:[Object(l.jsxs)(Ot.a,{children:[Object(l.jsx)(Ot.a.Item,{href:"/home",children:"Home"}),Object(l.jsx)(Ot.a.Item,{active:!0,children:"Entry Exit Records"})]}),Object(l.jsxs)(ve.a,{className:"d-flex",style:{padding:"10px 0px"},children:[Object(l.jsx)(ye.a,{sm:"auto",children:Object(l.jsxs)(Zt.a,{style:{"background-color":"white"},children:[Object(l.jsx)(Zt.a.Addon,{children:"From"}),Object(l.jsx)(ze.a,{format:"YYYY-MM-DD HH:mm:ss",block:!0,appearance:"subtle",value:V.startTime,onChange:function(e){var t,c;oe(_t(e),"startTime"),oe((t=_t(e),c=V.endTime,""===t?c:""===c?"":t<c?c:t),"endTime")},ranges:[{label:"Now",value:new Date}],placeholder:"YYYY-MM-DD HH:MM:SS"}),Object(l.jsx)(Zt.a.Addon,{children:"To"}),Object(l.jsx)(ze.a,{format:"YYYY-MM-DD HH:mm:ss",block:!0,appearance:"subtle",value:V.endTime,onChange:function(e){var t,c;oe(_t(e),"endTime"),oe((t=_t(e),c=V.startTime,""===t?c:""===c?"":t>c?c:t),"startTime")},ranges:[{label:"Now",value:new Date}],placeholder:"YYYY-MM-DD HH:MM:SS"})]})}),Object(l.jsx)("div",{style:{"flex-grow":"1"}}),Object(l.jsx)(ye.a,{sm:"auto",children:Object(l.jsxs)(pe.a,{className:"btn btn-info align-items-center d-flex",type:"button",onClick:function(){I(!0),se()},children:[Object(l.jsx)(yt.a,{}),"\xa0 Refresh"]})})]}),Object(l.jsx)(fe.a,{onSubmit:function(e){e.preventDefault()},children:Object(l.jsxs)(ve.a,{className:"d-flex",children:[Object(l.jsx)(ye.a,{sm:"auto",children:Object(l.jsx)(fe.a.Control,{custom:!0,as:"select",id:"curField",onChange:ie,value:q.curField,children:P.map((function(e){return Object(l.jsx)("option",{value:e,children:k[e]})}))})}),Object(l.jsx)(ye.a,{sm:"auto",children:Object(l.jsx)(fe.a.Control,{id:"val",placeholder:k[q.curField],onChange:ie,value:q.val})}),Object(l.jsx)(ye.a,{sm:"auto",children:Object(l.jsx)(fe.a.Control,{custom:!0,as:"select",id:"curField2",onChange:ie,value:q.curField2,children:P.map((function(e){return Object(l.jsx)("option",{value:e,children:k[e]})}))})}),Object(l.jsx)(ye.a,{sm:"auto",children:Object(l.jsx)(fe.a.Control,{id:"val2",placeholder:k[q.curField2],onChange:ie,value:q.val2})}),Object(l.jsx)("div",{style:{"flex-grow":"1"}}),Object(l.jsx)(ye.a,{sm:"auto",children:Object(l.jsx)(pe.a,{type:"button",onClick:function(){$(q),W(V)},children:"Search"})}),Object(l.jsx)(ye.a,{sm:"auto",children:Object(l.jsx)(pe.a,{type:"button",variant:"secondary",onClick:ue,children:"Cancel"})})]})})]}),Object(l.jsxs)("div",{className:"content",children:[Object(l.jsx)(Ze.a,{component:$e.a,className:"overflowTable scrollbar-grey",children:Object(l.jsxs)(_e.a,{"aria-label":"simple table",children:[Object(l.jsx)(et.a,{children:Object(l.jsx)(tt.a,{children:G.map((function(e){return Object(l.jsx)(ct.a,{align:"center",style:{"min-width":M[e]},children:Object(l.jsx)("b",{children:k[e]})})}))})}),D?Object(l.jsxs)(nt.a,{children:[Object(l.jsx)("div",{className:"loadingTable",style:{height:53*Ne},children:Object(l.jsx)(ge.a,{animation:"border",role:"status",children:Object(l.jsx)("span",{className:"sr-only",children:"Loading..."})})}),Object(l.jsx)(tt.a,{style:{height:53*Ne},children:Object(l.jsx)(ct.a,{colSpan:13})})]}):Object(l.jsxs)(nt.a,{children:[h.length>0?(Ne>0?h.slice(he*Ne,he*Ne+Ne):h).map((function(e){return Object(l.jsxs)(tt.a,{children:[Object(l.jsx)(ct.a,{className:"padding-0",align:"center",children:e.projectName}),Object(l.jsx)(ct.a,{className:"padding-0",align:"center",children:e.vehicleType}),Object(l.jsx)(ct.a,{className:"padding-0",align:"center",children:!0===e.isOpened?Object(l.jsx)(Kt.a,{color:"#64D381",size:25}):Object(l.jsx)(Qt.a,{color:"red",size:25})}),Object(l.jsx)(ct.a,{className:"padding-0",align:"center",children:e.gateName}),Object(l.jsx)(ct.a,{className:"padding-0",align:"center",children:null===e.gateType||void 0===f[e.gateType]?null:f[e.gateType].name}),Object(l.jsx)(ct.a,{className:"padding-0",align:"center",children:e.detectionTime}),Object(l.jsx)(ct.a,{className:"padding-0",align:"center",children:e.confirmedTime}),Object(l.jsx)(ct.a,{className:"padding-0",align:"center",children:Object(l.jsx)("div",{className:"outerPlate",children:Object(l.jsx)("div",{className:"innerPlate",children:Object(l.jsx)("u",{children:e.originalPlate})})})}),Object(l.jsx)(ct.a,{className:"padding-0",align:"center",children:null===e.confirmedPlate||""==e.confirmedPlate?null:Object(l.jsx)("div",{className:"outerPlate",children:Object(l.jsx)("div",{className:"innerPlate",children:Object(l.jsx)("u",{children:e.confirmedPlate})})})}),Object(l.jsx)(ct.a,{style:{padding:"0 10px"},align:"center",children:Object(l.jsx)("img",{className:"imageClick",onClick:function(){return C(e.image1)},style:{height:R},src:e.image1})}),Object(l.jsx)(ct.a,{style:{padding:"0 10px"},align:"center",children:Object(l.jsx)("img",{className:"imageClick",onClick:function(){return C(e.plateImage)},style:{height:L},src:e.plateImage})})]},e.logID)})):Object(l.jsx)(tt.a,{children:Object(l.jsx)(ct.a,{align:"center",colSpan:11,children:"No Records Found"})}),Se>0&&Object(l.jsx)(tt.a,{style:{height:50*Se},children:Object(l.jsx)(ct.a,{colSpan:11})})]})]})}),Object(l.jsx)(tt.a,{className:"d-flex justify-content-center",children:Object(l.jsx)(xt.a,{rowsPerPageOptions:[5,10,50],colSpan:11,count:h.length,rowsPerPage:Ne,page:he,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,t){Oe(t)},onChangeRowsPerPage:function(e){Ce(parseInt(e.target.value,10)),Oe(0)},ActionsComponent:He})})]})]})}function tc(e){e.match;return Object(l.jsx)("div",{className:"d-flex justify-content-center",children:Object(l.jsx)("h1",{children:"Pending API"})})}var cc=c(354),nc=c.n(cc),ac=c(353),rc=c.n(ac);function sc(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),c=t[0],r=t[1],s=Object(n.useState)({delete:!1,edit:!1}),j=Object(o.a)(s,2),u=j[0],d=j[1],b=Object(n.useState)(""),h=Object(o.a)(b,2),O=h[0],p=h[1],x=Object(n.useState)(""),f=Object(o.a)(x,2),v=f[0],y=f[1],w=Object(n.useState)(!1),N=Object(o.a)(w,2),C=N[0],S=(N[1],Object(n.useState)({})),T=Object(o.a)(S,2),D=T[0],I=T[1],P=Object(n.useState)({}),k=Object(o.a)(P,2),G=k[0],M=k[1],R=Object(n.useState)(!1),L=Object(o.a)(R,2),A=L[0],E=L[1],q=Object(n.useState)([]),F=Object(o.a)(q,2),H=F[0],J=F[1],V=function(){var e=Object(g.a)(m.a.mark((function e(t,c,n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},t.forEach(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a[t[c]]=t[n];case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,a;case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,c,n){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){ce(["projectID","projectName"]).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t.content),J(t.content),V(t.content,"projectID","projectName").then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=I,e.next=3,t;case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Get Gate, there was an error!",e)}))}),[C]);var B=function(){""===O?r([]):(E(!0),ne(O,["accessRuleID","accessRuleName","isChargeable","gates"]).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E(!1),console.log(t.content),r(t.content);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Get Gate, there was an error!",e)}))),Z(0)};Object(n.useEffect)((function(){B(),ae(O,["gateID","gateName"]).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:V(t.content,"gateID","gateName").then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=M,e.next=3,t;case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Get Gate, there was an error!",e)}))}),[O]);var Y=function(e){var t=u[e];d((function(c){return Object(i.a)(Object(i.a)({},c),{},Object(me.a)({},e,!t))}))},U=function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:de(t).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:B(),Y("delete"),X.success("Rule Deleted");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X.error("There was an error!"),console.error("Delete Rule, There was an error!",e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=a.a.useState(0),K=Object(o.a)(W,2),Q=K[0],Z=K[1],$=a.a.useState(10),_=Object(o.a)($,2),ee=_[0],te=_[1],re=c.length>0?ee-Math.min(ee,c.length-Q*ee):ee-1;return Object(l.jsxs)("div",{children:[Object(l.jsxs)(dt.a,{children:[Object(l.jsx)("meta",{charSet:"utf-8"}),Object(l.jsx)("title",{children:"Rules"})]}),Object(l.jsx)(xe,{hide:u.delete,success:function(){U(v)},toggleModal:function(){Y("delete")},title:"Confirm Deletion",body:"Delete this rule?"}),u.edit?Object(l.jsx)(Je,{hide:u.edit,projectID:O,projectName:D[O],accessRuleID:v,success:function(){B(),Y("edit")},toggleModal:function(){Y("edit")}}):null,Object(l.jsxs)("div",{className:"content",children:[Object(l.jsxs)(Ot.a,{children:[Object(l.jsx)(Ot.a.Item,{href:"/home",children:"Home"}),Object(l.jsx)(Ot.a.Item,{active:!0,children:"Access Rules"})]}),Object(l.jsx)(fe.a,{onSubmit:function(e){e.preventDefault()},children:Object(l.jsxs)(ve.a,{className:"d-flex",children:[Object(l.jsx)(ye.a,{sm:"auto",children:Object(l.jsxs)(fe.a.Control,{custom:!0,as:"select",id:"projectID",onChange:function(e){p(e.target.value)},value:O,children:[Object(l.jsx)("option",{value:"",children:"--Select a Project--"}),H.map((function(e){return Object(l.jsx)("option",{value:e.projectID,children:e.projectName})}))]})}),Object(l.jsx)(ye.a,{sm:"auto",children:Object(l.jsx)(pe.a,{disabled:""===O,className:"btn btn-success",type:"button",onClick:function(){y(null),Y("edit")},children:"+ Add"})}),Object(l.jsx)("div",{style:{"flex-grow":"1"}}),Object(l.jsx)(ye.a,{sm:"auto",children:Object(l.jsxs)(pe.a,{className:"btn btn-info align-items-center d-flex",type:"button",onClick:B,children:[Object(l.jsx)(yt.a,{}),"\xa0 Refresh"]})})]})})]}),Object(l.jsx)("div",{className:"content",children:Object(l.jsx)(Ze.a,{component:$e.a,children:Object(l.jsxs)(_e.a,{"aria-label":"simple table",children:[Object(l.jsx)(et.a,{children:Object(l.jsxs)(tt.a,{children:[Object(l.jsx)(ct.a,{align:"left",children:Object(l.jsx)("b",{children:"Project"})}),Object(l.jsx)(ct.a,{align:"center",children:Object(l.jsx)("b",{children:"Name"})}),Object(l.jsx)(ct.a,{align:"center",children:Object(l.jsx)("b",{children:"Gates"})}),Object(l.jsx)(ct.a,{align:"center",children:Object(l.jsx)("b",{children:"Chargeable"})}),Object(l.jsx)(ct.a,{align:"right",children:Object(l.jsx)("b",{children:"Actions"})})]})}),Object(l.jsxs)(nt.a,{children:[A?Object(l.jsx)(tt.a,{children:Object(l.jsx)(ct.a,{align:"center",colSpan:5,children:Object(l.jsx)(ge.a,{animation:"border",role:"status",children:Object(l.jsx)("span",{className:"sr-only",children:"Loading..."})})})}):c.length>0?(ee>0?c.slice(Q*ee,Q*ee+ee):c).map((function(e,t){return Object(l.jsxs)(tt.a,{children:[Object(l.jsx)(ct.a,{align:"left",children:D[O]}),Object(l.jsx)(ct.a,{align:"center",children:e.accessRuleName}),Object(l.jsx)(ct.a,{align:"center",children:null===e.gates?null:e.gates.map((function(e){return Object(l.jsxs)("div",{children:[null===e?null:G[e]," ",Object(l.jsx)("br",{})]})}))}),Object(l.jsx)(ct.a,{align:"center",children:e.isChargeable?Object(l.jsx)(rc.a,{style:{color:"#66bb6a"}}):Object(l.jsx)(nc.a,{style:{color:"red"}})}),Object(l.jsxs)(ct.a,{align:"right",style:{padding:0},children:[Object(l.jsx)(z.a,{onClick:function(){y(e.accessRuleID),Y("edit")},children:Object(l.jsx)(mt.a,{size:21,color:"royalblue"})}),Object(l.jsx)(z.a,{onClick:function(){y(e.accessRuleID),Y("delete")},children:Object(l.jsx)(gt.a,{color:"red",size:21})})]})]},e.gateName)})):Object(l.jsx)(tt.a,{children:Object(l.jsx)(ct.a,{align:"center",colSpan:5,children:"No Rules Found"})}),re>0&&Object(l.jsx)(tt.a,{style:{height:53*re},children:Object(l.jsx)(ct.a,{colSpan:6})})]}),Object(l.jsx)(pt.a,{children:Object(l.jsx)(tt.a,{children:Object(l.jsx)(xt.a,{rowsPerPageOptions:[5,10,{label:"All",value:-1}],colSpan:4,count:c.length,rowsPerPage:ee,page:Q,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,t){Z(t)},onChangeRowsPerPage:function(e){te(parseInt(e.target.value,10)),Z(0)},ActionsComponent:He})})})]})})})]})}function ic(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),c=t[0],r=t[1],s=Object(n.useState)(""),j=Object(o.a)(s,2),u=j[0],d=j[1],b=Object(n.useState)(!1),h=Object(o.a)(b,2),O=h[0],p=h[1],x=Object(n.useState)(""),f=Object(o.a)(x,2),v=f[0],y=f[1],w=Object(n.useState)([]),N=Object(o.a)(w,2),C=N[0],S=N[1],T=Object(n.useState)({delete:!1,edit:!1}),D=Object(o.a)(T,2),I=D[0],P=D[1],k=Object(n.useState)(""),G=Object(o.a)(k,2),M=G[0],R=G[1],L=Object(n.useState)(null),A=Object(o.a)(L,2),E=A[0],q=A[1],F=Object(n.useState)(!1),H=Object(o.a)(F,2),J=H[0],V=(H[1],Object(n.useState)([])),B=Object(o.a)(V,2),Y=B[0],U=B[1],W=Object(n.useState)({}),K=Object(o.a)(W,2),Q=K[0],Z=K[1],$=Object(n.useState)({}),_=Object(o.a)($,2),ae=_[0],re=_[1],se=Object(n.useState)([]),ie=Object(o.a)(se,2),oe=ie[0],le=ie[1],je=function(){var e=Object(g.a)(m.a.mark((function e(t,c,n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},t.forEach(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a[t[c]]=t[n];case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,a;case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,c,n){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){ce(["projectID","projectName"]).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t.content),le(t.content),je(t.content,"projectID","projectName").then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=re,e.next=3,t;case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Get Project, there was an error!",e)}))}),[J]);Object(n.useEffect)((function(){ne(M,["accessRuleID","accessRuleName","projectID"]).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U(t.content),je(t.content,"accessRuleID","accessRuleName").then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Z,e.next=3,t;case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Get Access Rule, there was an error!",e)})),d(""),y("")}),[M]);var ue=function(){p(!0),function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getTable",content:{objName:"dbWhitelist",columns:e}})};return fetch(ee,t).then(te)}(["recordID","plateNumber","accessRuleID","tag","startDateTime","endDateTime"]).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r(t.content.filter((function(e){return null!==e.accessRuleID&&void 0!==Q[e.accessRuleID]}))),p(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Get entry, there was an error!",e)})),Ce(0)};Object(n.useEffect)((function(){ue()}),[Q]);Object(n.useEffect)((function(){!function(){var e=c;console.log(e),S(e.filter((function(e){return e.plateNumber.toLowerCase().indexOf(u.toLowerCase())>=0}))),Ce(0)}()}),[c,u]);var de=function(e){var t=I[e];P((function(c){return Object(i.a)(Object(i.a)({},c),{},Object(me.a)({},e,!t))}))},he=function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:be(t).then(function(){var e=Object(g.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ue(),de("delete"),X.success("Entry Deleted");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Delete Entry, There was an error!",e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=a.a.useState(0),we=Object(o.a)(Oe,2),Ne=we[0],Ce=we[1],Se=a.a.useState(10),Te=Object(o.a)(Se,2),De=Te[0],Ie=Te[1],Pe=De-Math.min(De,C.length-Ne*De);return Object(l.jsxs)("div",{children:[Object(l.jsxs)(dt.a,{children:[Object(l.jsx)("meta",{charSet:"utf-8"}),Object(l.jsx)("title",{children:"Whitelists"})]}),Object(l.jsx)(xe,{hide:I.delete,success:function(){he(E)},toggleModal:function(){de("delete")},title:"Confirm Deletion",body:"Delete this entry?"}),I.edit?Object(l.jsx)(Ue,{hide:I.edit,projectName:ae[M],ID:E,accessRules:Y,success:function(){ue(),de("edit")},toggleModal:function(){de("edit")}}):null,Object(l.jsxs)("div",{className:"content",children:[Object(l.jsxs)(Ot.a,{children:[Object(l.jsx)(Ot.a.Item,{href:"/home",children:"Home"}),Object(l.jsx)(Ot.a.Item,{active:!0,children:"Whitelist Entries"})]}),Object(l.jsx)(fe.a,{onSubmit:function(e){e.preventDefault()},children:Object(l.jsxs)(ve.a,{className:"d-flex",children:[Object(l.jsx)(ye.a,{sm:"auto",children:Object(l.jsxs)(fe.a.Control,{custom:!0,as:"select",id:"projectID",onChange:function(e){R(e.target.value)},value:M,children:[Object(l.jsx)("option",{value:"",children:"--Select a Project--"}),oe.map((function(e){return Object(l.jsx)("option",{value:e.projectID,children:e.projectName})}))]})}),Object(l.jsx)(ye.a,{sm:"auto",children:Object(l.jsx)(pe.a,{disabled:""===M,className:"btn btn-success",type:"button",onClick:function(){q(null),de("edit")},children:"+ Add"})}),Object(l.jsx)(ye.a,{sm:"auto",children:Object(l.jsxs)(pe.a,{className:"btn btn-info align-items-center d-flex",type:"button",onClick:ue,children:[Object(l.jsx)(yt.a,{}),"\xa0 Refresh"]})}),Object(l.jsx)("div",{style:{"flex-grow":"1"}}),Object(l.jsx)(ye.a,{sm:"auto",children:Object(l.jsx)(fe.a.Control,{placeholder:"Plate No.",onChange:function(e){y(e.target.value)},value:v})}),Object(l.jsx)(ye.a,{sm:"auto",children:Object(l.jsx)(pe.a,{className:"btn btn-primary",type:"button",onClick:function(){d(v)},children:"Search"})}),Object(l.jsx)(ye.a,{sm:"auto",children:Object(l.jsx)(pe.a,{type:"button",variant:"secondary",onClick:function(){y(""),d("")},children:"Cancel"})})]})})]}),Object(l.jsx)("div",{className:"content",children:Object(l.jsx)(Ze.a,{component:$e.a,children:Object(l.jsxs)(_e.a,{"aria-label":"simple table",children:[Object(l.jsx)(et.a,{children:Object(l.jsxs)(tt.a,{children:[Object(l.jsx)(ct.a,{align:"center",children:Object(l.jsx)("b",{children:"Plate Number"})}),Object(l.jsx)(ct.a,{align:"center",children:Object(l.jsx)("b",{children:"Project"})}),Object(l.jsx)(ct.a,{align:"center",children:Object(l.jsx)("b",{children:"Access Rule"})}),Object(l.jsx)(ct.a,{align:"center",children:Object(l.jsx)("b",{children:"Tag"})}),Object(l.jsx)(ct.a,{align:"center",children:Object(l.jsx)("b",{children:"Start Date"})}),Object(l.jsx)(ct.a,{align:"center",children:Object(l.jsx)("b",{children:"End Date"})}),Object(l.jsx)(ct.a,{align:"right",children:Object(l.jsx)("b",{children:"Actions"})})]})}),Object(l.jsxs)(nt.a,{children:[O?Object(l.jsx)(tt.a,{children:Object(l.jsx)(ct.a,{align:"center",colSpan:7,children:Object(l.jsx)(ge.a,{animation:"border",role:"status",children:Object(l.jsx)("span",{className:"sr-only",children:"Loading..."})})})}):C.length>0?(De>0?C.slice(Ne*De,Ne*De+De):C).map((function(e,t){return Object(l.jsxs)(tt.a,{children:[Object(l.jsx)(ct.a,{align:"center",children:Object(l.jsx)("div",{className:"outerPlate",children:Object(l.jsx)("div",{className:"innerPlate",children:Object(l.jsx)("u",{children:e.plateNumber})})})}),Object(l.jsx)(ct.a,{align:"center",children:ae[M]}),Object(l.jsx)(ct.a,{align:"center",children:null===e.accessRuleID?null:Q[e.accessRuleID]}),Object(l.jsx)(ct.a,{align:"center",children:e.tag}),Object(l.jsx)(ct.a,{align:"center",children:e.startDateTime}),Object(l.jsx)(ct.a,{align:"center",children:e.endDateTime}),Object(l.jsxs)(ct.a,{align:"right",style:{padding:0},children:[Object(l.jsx)(z.a,{onClick:function(){q(e.recordID),de("edit")},children:Object(l.jsx)(mt.a,{size:21,color:"royalblue"})}),Object(l.jsx)(z.a,{onClick:function(){q(e.recordID),de("delete")},children:Object(l.jsx)(gt.a,{color:"red",size:21})})]})]},e.gateName)})):Object(l.jsx)(tt.a,{children:Object(l.jsx)(ct.a,{align:"center",colSpan:7,children:"No Entries Found"})}),Pe>0&&Object(l.jsx)(tt.a,{style:{height:53*Pe},children:Object(l.jsx)(ct.a,{colSpan:6})})]}),Object(l.jsx)(pt.a,{children:Object(l.jsx)(tt.a,{children:Object(l.jsx)(xt.a,{rowsPerPageOptions:[5,10,{label:"All",value:-1}],colSpan:7,count:C.length,rowsPerPage:De,page:Ne,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,t){Ce(t)},onChangeRowsPerPage:function(e){Ie(parseInt(e.target.value,10)),Ce(0)},ActionsComponent:He})})})]})})})]})}We.a;function oc(e){var t=e.children,c=Object(h.a)(e,["children"]),r=Object(n.useContext)(u).state,s=r.auth,o=r.toggled;return Object(l.jsx)(S.b,Object(i.a)(Object(i.a)({},c),{},{render:function(e){return s?Object(l.jsxs)("div",{className:"h-100",children:[Object(l.jsx)(ke,{}),Object(l.jsx)(he,{}),Object(l.jsx)("div",{id:"content-body",className:o?"content-body-collapsed":"content-body-expand",children:a.a.cloneElement(t,{params:e.match.params})})]}):Object(l.jsx)(S.a,{to:{pathname:"/",state:{from:e.location}}})}}))}function lc(e){var t=e.children,c=Object(h.a)(e,["children"]),a=Object(n.useContext)(u).state.auth;return Object(l.jsx)(S.b,Object(i.a)(Object(i.a)({},c),{},{render:function(e){var c=e.location;return a?Object(l.jsx)(S.a,{to:{pathname:"/home",state:{from:c}}}):Object(l.jsxs)("div",{className:"h-100",children:[Object(l.jsx)(ke,{}),t]})}}))}var jc=function(){return Object(l.jsx)(We.a,{children:Object(l.jsxs)(S.d,{children:[Object(l.jsx)(oc,{path:"/home",children:Object(l.jsx)(bt,{})}),Object(l.jsx)(oc,{path:"/project/:projectID",children:Object(l.jsx)(Wt,{})}),Object(l.jsx)(oc,{path:"/project",children:Object(l.jsx)(wt,{})}),Object(l.jsx)(oc,{path:"/regex",children:Object(l.jsx)(Xt,{})}),Object(l.jsx)(oc,{path:"/records",children:Object(l.jsx)(ec,{})}),Object(l.jsx)(oc,{path:"/parking",children:Object(l.jsx)(tc,{})}),Object(l.jsx)(oc,{path:"/accessRules",children:Object(l.jsx)(sc,{})}),Object(l.jsx)(oc,{path:"/whitelist",children:Object(l.jsx)(ic,{})}),Object(l.jsx)(lc,{path:"/",children:Object(l.jsx)(ht,{})})]})})},uc=document.getElementById("root");s.a.render(Object(l.jsx)(b,{children:Object(l.jsx)(n.StrictMode,{children:Object(l.jsx)(jc,{})})}),uc)}},[[557,1,2]]]);
//# sourceMappingURL=main.7f728a1d.chunk.js.map