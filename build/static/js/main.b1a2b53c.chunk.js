(this.webpackJsonpadminweb2=this.webpackJsonpadminweb2||[]).push([[0],{311:function(e,t){},381:function(e,t,n){},382:function(e,t,n){},570:function(e,t){},571:function(e,t){},574:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(18),i=n.n(r),s=n(8),o=n(5),l=n(1),j={auth:!0,user:"admin",toggled:!1},u=Object(c.createContext)(j),d=u.Provider,h=function(e){var t=e.children,n=Object(c.useReducer)((function(e,t){switch(t.type){case"setAuth":return Object(s.a)(Object(s.a)({},e),{},{auth:t.value});case"setUser":return Object(s.a)(Object(s.a)({},e),{},{user:t.value});case"setToggled":return Object(s.a)(Object(s.a)({},e),{},{toggled:!e.toggled});default:throw new Error}}),j),a=Object(o.a)(n,2),r=a[0],i=a[1];return Object(l.jsx)(d,{value:{state:r,dispatch:i},children:t})},b=n(253),O=n(170),p=n(200),f=n(197),m=(n(379),n(380),n(381),n(382),n(4)),x=n.n(m),g=n(9),v=n(40),y=(n(384),n(617)),w=n(655),T=n(658),N=n(647),C=n(31),D=n(318),S=n.n(D),P=n(317),k=n.n(P),I=n(320),G=n.n(I),M=n(321),L=n.n(M),R=n(322),E=n.n(R),A=n(313),F=n.n(A),H=n(326),q=n.n(H),Y=n(323),V=n.n(Y),J=n(319),U=n.n(J),B=n(324),z=n.n(B),W=n(327),_=n.n(W),X=n(618),K=n(654),Q=n(659),Z=new K.a,$="default-alert",ee={onAlert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$;return Z.asObservable().pipe(Object(Q.a)((function(t){return t&&t.id===e})))},success:function(e,t){re(Object(s.a)(Object(s.a)({},t),{},{type:te,message:e}))},error:function(e,t){re(Object(s.a)(Object(s.a)({},t),{},{type:ne,message:e}))},info:function(e,t){re(Object(s.a)(Object(s.a)({},t),{},{type:ce,message:e}))},warn:function(e,t){re(Object(s.a)(Object(s.a)({},t),{},{type:ae,message:e}))},alert:re,clear:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$;Z.next({id:e})}},te="success",ne="danger",ce="info",ae="warning";function re(e){e.id=e.id||$,Z.next(e)}var ie="http://34.87.50.188:8080/api/router",se=function(){var e=Object(g.a)(x.a.mark((function e(t){var n,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(n=e.sent,t.ok){e.next=6;break}return c=n&&n.content||t.status,e.abrupt("return",Promise.reject(c));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getTable",content:{objName:"project",columns:e}})};return fetch(ie,t).then(se)},le=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getTable",content:{objName:"movementLog",columns:e,filters:t,startIndex:n,looseMatch:c}})};return fetch(ie,a).then(se)},je=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getTable",content:{objName:"deviceStatusLog",columns:e,filters:t,startIndex:n,looseMatch:c}})};return fetch(ie,a).then(se)},ue=function(e,t){var n={};null!==e&&(n={projectID:e});var c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getTable",content:{objName:"accessRule",columns:t,filters:n}})};return fetch(ie,c).then(se)},de=function(e,t){var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getTable",content:{objName:"gate",columns:t,filters:{projectID:e}}})};return fetch(ie,n).then(se)},he=function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getProject",content:{projectID:e}})};return fetch(ie,t).then(se)},be=function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"deleteProject",content:{projectID:e}})};return fetch(ie,t).then(se)},Oe=function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getGate",content:{gateID:e}})};return fetch(ie,t).then(se)},pe=function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"deleteGate",content:{gateID:e}})};return fetch(ie,t).then(se)},fe=function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"deleteDevice",content:{deviceID:e}})};return fetch(ie,t).then(se)},me=function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getObjectTypes",content:{objName:e}})};return fetch(ie,t).then(se)},xe=function(){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getWhitelistTags"})};return fetch(ie,e).then(se)},ge=function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"deleteAccessRule",content:{accessRuleID:e}})};return fetch(ie,t).then(se)},ve=function(e,t){var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getTable",content:{objName:"dbWhitelist",columns:e,filters:t}})};return fetch(ie,n).then(se)},ye=function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"deleteWhitelistEntry",content:{recordID:e}})};return fetch(ie,t).then(se)},we=function(e,t){var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"modifyUnit",content:{unitID:e,modifyParams:t}})};return fetch(ie,n).then(se)},Te=function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"deleteUnit",content:{unitID:e}})};return fetch(ie,t).then(se)},Ne=function(e,t){var n={};null!==e&&(n={projectID:e});var c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getTable",content:{objName:"unit",columns:t,filters:n}})};return fetch(ie,c).then(se)};function Ce(){var e=Object(c.useContext)(u),t=e.dispatch,n=e.state,a=n.toggled,r=n.user,i=Object(C.g)(),s=function(e){console.log("clicked",e),i.push(e)};return Object(l.jsxs)("div",{className:"h-100 fixed-top clickThrough",children:[Object(l.jsx)(v.c,{className:"clickAble navbar-default navbar-static-top sideBar",collapsed:a,width:"250px",children:Object(l.jsx)(v.d,{children:Object(l.jsxs)(v.a,{iconShape:"circle",children:[Object(l.jsx)(v.b,{style:{background:"#2c3b41",height:"60px","pointer-events":"none"},className:"d-flex justify-content-center align-items-center",children:Object(l.jsx)("div",{style:{"padding-top":"10px",color:"white"},children:Object(l.jsx)("h5",{children:"Admin"})})}),Object(l.jsx)(v.b,{icon:Object(l.jsx)(F.a,{fontSize:"large"}),style:{"pointer-events":"none","border-bottom":"1px solid gray"},children:Object(l.jsxs)("div",{style:{color:"white"},children:["Welcome, ",r]})}),Object(l.jsx)(v.b,{icon:Object(l.jsx)(k.a,{onClick:function(){return s("/home")}}),children:Object(l.jsx)("div",{onClick:function(){return s("/home")},children:"Home"})}),Object(l.jsx)(v.b,{icon:Object(l.jsx)(S.a,{onClick:function(){return s("/project")}}),children:Object(l.jsx)("div",{onClick:function(){return s("/project")},children:"Project"})}),Object(l.jsxs)(v.e,{title:"Plate Correction",icon:Object(l.jsx)(U.a,{}),children:[Object(l.jsx)(v.b,{onClick:function(){return s("/specialPlates")},children:"Special Plate Correction"}),Object(l.jsx)(v.b,{onClick:function(){return s("/regexPlates")},children:"Standard Plate Matching"})]}),Object(l.jsx)(v.b,{icon:Object(l.jsx)(G.a,{onClick:function(){return s("/records")}}),children:Object(l.jsx)("div",{onClick:function(){return s("/records")},children:"Exit/Entry Records"})}),Object(l.jsx)(v.b,{icon:Object(l.jsx)(L.a,{onClick:function(){return s("/parking")}}),children:Object(l.jsx)("div",{onClick:function(){return s("/parking")},children:"Parking Records"})}),Object(l.jsxs)(v.e,{title:"Access",icon:Object(l.jsx)(E.a,{}),children:[Object(l.jsx)(v.b,{onClick:function(){return s("/accessRules")},children:"Access Rules"}),Object(l.jsx)(v.b,{onClick:function(){return s("/whitelist")},children:"Whitelist Entries"})]}),Object(l.jsx)(v.b,{icon:Object(l.jsx)(V.a,{onClick:function(){return s("/units")}}),children:Object(l.jsx)("div",{onClick:function(){return s("/units")},children:"Units"})}),Object(l.jsx)(v.b,{icon:Object(l.jsx)(z.a,{onClick:function(){return s("/DeviceHistory")}}),children:Object(l.jsx)("div",{onClick:function(){return s("/DeviceHistory")},children:"Device History"})})]})})}),Object(l.jsxs)(w.a,{bg:"light",variant:"light",expand:"lg",className:"clickAble navBar"+(a?" navBar-collapsed":" navBar-expand"),children:[Object(l.jsx)(w.a.Brand,{className:"sideBar",onClick:function(){t({type:"setToggled"})},children:Object(l.jsx)(y.a,{})}),Object(l.jsx)(w.a.Toggle,{"aria-controls":"basic-navbar-nav",className:"nav-dropdown"}),Object(l.jsx)(w.a.Collapse,{id:"basic-navbar-nav",children:Object(l.jsxs)(T.a,{className:"mr-auto nav-dropdown",children:[Object(l.jsx)(T.a.Link,{children:Object(l.jsx)("div",{onClick:function(){return s("/home")},children:"Home"})}),Object(l.jsx)(T.a.Link,{children:Object(l.jsx)("div",{onClick:function(){return s("/project")},children:"Project"})}),Object(l.jsx)(T.a.Link,{children:Object(l.jsx)("div",{onClick:function(){return s("/regex")},children:"Plate Regex"})}),Object(l.jsx)(T.a.Link,{children:Object(l.jsx)("div",{onClick:function(){return s("/records")},children:"Exit/Entry Records"})}),Object(l.jsx)(T.a.Link,{children:Object(l.jsx)("div",{onClick:function(){return s("/parking")},children:"Parking Records"})}),Object(l.jsxs)(N.a,{title:"Access",id:"basic-nav-dropdown",children:[Object(l.jsx)(N.a.Item,{onClick:function(){return s("/accessRules")},children:"Access Rules"}),Object(l.jsx)(N.a.Item,{onClick:function(){return s("/whitelist")},children:"Whitelist Entries"})]}),Object(l.jsx)(T.a.Link,{children:Object(l.jsx)("div",{onClick:function(){return s("/units")},children:"Units"})})]})}),Object(l.jsxs)(w.a.Collapse,{className:"justify-content-end",children:[Object(l.jsx)(X.a,{onClick:function(){(function(){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"restartServer"})};return fetch(ie,e).then(se)})().then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ee.success("Restarting Server...",{time:5e3}),setTimeout((function(){window.location.reload(!1)}),5e3);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Get Project, there was an error!",e)}))},style:{marginRight:"10px"},endIcon:Object(l.jsx)(q.a,{}),children:"Restart Server"}),Object(l.jsx)(X.a,{onClick:function(){t({type:"setAuth",value:!1}),t({type:"setUser",value:""}),i.push("/")},variant:"outlined",endIcon:Object(l.jsx)(_.a,{}),children:"Logout"})]})]})]})}var De=n(650),Se=n(325);function Pe(e){var t=e.toggleModal,n=e.success,c=e.hide,a=e.body,r=e.title;return Object(l.jsxs)(De.a,{show:c,onHide:t,children:[Object(l.jsx)(De.a.Header,{closeButton:!0,children:Object(l.jsx)(De.a.Title,{children:r})}),Object(l.jsx)(De.a.Body,{children:a}),Object(l.jsxs)(De.a.Footer,{children:[Object(l.jsx)(Se.a,{variant:"secondary",onClick:t,children:"Cancel"}),Object(l.jsx)(Se.a,{variant:"primary",onClick:function(){n()},children:"Confirm"})]})]})}var ke=n(651);var Ie=n(14),Ge=n(619),Me=n(620),Le=n(328);function Re(e){var t=e.hide,n=e.gateID,a=e.toggleModal,r=e.success,i=e.deviceID,j=e.deviceTypes,u=Object(c.useState)(!1),d=Object(o.a)(u,2),h=d[0],b=d[1],O=Object(c.useState)({}),p=Object(o.a)(O,2),f=p[0],m=p[1],v=Object(c.useState)(!1),y=Object(o.a)(v,2),w=y[0],T=(y[1],Object(c.useState)([])),N=Object(o.a)(T,2),C=N[0],D=N[1],S=Object(c.useState)(""),P=Object(o.a)(S,2),k=P[0],I=P[1],G=Object(c.useState)([]),M=Object(o.a)(G,2),L=M[0],R=M[1],E=Object(c.useState)(!1),A=Object(o.a)(E,2),F=A[0],H=A[1];Object(c.useEffect)((function(){b(!1),null===i?m({gateID:n,deviceID:"",deviceName:"",deviceType:"",deviceCarpark:"",manufacturer:"",manufacturerCode:"",direction:"",isPrimaryDevice:!1,isGateControl:!1}):(H(!0),function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getDevice",content:{deviceID:e}})};return fetch(ie,t).then(se)}(i).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(t.message),H(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Get Device, There was an error!",e)})),null===n&&(q({target:{id:"gateID",value:""}}),oe(["projectID","projectName"]).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I(""),D(t.content);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Get Projects, There was an error!",e)}))))}),[w,t]),Object(c.useEffect)((function(){q({target:{id:"gateID",value:""}}),null===k?R([]):de(k,["gateID","gateName"]).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:R(t.content);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Get Gates, There was an error!",e)}))}),[k]);var q=function(e,t,n){var c,a;if(void 0===n?(c=e.target.id,a=e.target.value):(c=n.id,a=e),["isPrimaryDevice","isGateControl"].includes(c)){var r=e.target.checked;m((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(Ie.a)({},c,r))}))}else m((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(Ie.a)({},c,a))}))},Y=function(){console.log(f);var e=f;delete e.deviceStatus,function(e,t){var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"modifyDevice",content:{deviceID:e,modifyParams:t}})};return fetch(ie,n).then(se)}(i,e).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(!1),ee.success("Update Successful!"),r();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Update Device, There was an error!",e)}))},V=function(){(function(e,t){var n=Object(s.a)(Object(s.a)({},t),{},{gateID:e}),c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"createDevice",content:n})};return fetch(ie,c).then(se)})(n,f).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(!1),ee.success("Addition Successful!"),r();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Add Device, There was an error!",e)}))};return Object(l.jsxs)(De.a,{show:t,onHide:function(){b(!1),a()},children:[Object(l.jsx)(De.a.Header,{closeButton:!0,children:Object(l.jsx)(De.a.Title,{children:null===i?"Add Device":"Edit Device"})}),Object(l.jsx)("div",{className:"loadingModal"+(F?"":" invisible"),children:Object(l.jsx)(Ge.a,{animation:"border",role:"status",children:Object(l.jsx)("span",{className:"sr-only",children:"Loading..."})})}),Object(l.jsx)(De.a.Body,{children:Object(l.jsx)(ke.a,{id:"deviceModal",noValidate:!0,validated:h,onSubmit:function(e){e.preventDefault();var t=e.currentTarget;!1===t.checkValidity()&&(e.preventDefault(),e.stopPropagation()),b(!0),t.checkValidity()&&(null===i?V():Y())},children:Object(l.jsxs)("div",{children:[Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Device ID"}),Object(l.jsx)(Le.a,{sm:6,children:null===i?Object(l.jsxs)("div",{children:[Object(l.jsx)(ke.a.Control,{required:!0,placeholder:"ID",id:"deviceID",name:"deviceID",type:"text",value:f.deviceID,onChange:q}),Object(l.jsx)(ke.a.Control.Feedback,{type:"invalid",children:"Device ID is a required field."})]}):Object(l.jsx)(ke.a.Control,{type:"text",placeholder:f.deviceID,readOnly:!0})})]}),null===n?Object(l.jsxs)("div",{children:[Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Project"}),Object(l.jsxs)(Le.a,{sm:6,children:[Object(l.jsxs)(ke.a.Control,{custom:!0,required:!0,as:"select",id:"project",name:"project",value:k,onChange:function(e){I(e.target.value)},children:[Object(l.jsx)("option",{value:"",children:"--Select Project--"}),C.map((function(e){return Object(l.jsx)("option",{value:e.projectID,children:e.projectName})}))]}),Object(l.jsx)(ke.a.Control.Feedback,{type:"invalid",children:"Project is a required field."})]})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Gate"}),Object(l.jsxs)(Le.a,{sm:6,children:[Object(l.jsxs)(ke.a.Control,{disabled:""===k,custom:!0,required:!0,as:"select",id:"gateID",name:"gateID",value:null===f.gateID?"":f.gateID,onChange:q,children:[Object(l.jsx)("option",{value:"",children:"--Select Project--"}),L.map((function(e){return Object(l.jsx)("option",{value:e.gateID,children:e.gateName})}))]}),Object(l.jsx)(ke.a.Control.Feedback,{type:"invalid",children:"Gate is a required field."})]})]})]}):null,Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Device Name"}),Object(l.jsxs)(Le.a,{sm:6,children:[Object(l.jsx)(ke.a.Control,{required:!0,placeholder:"Name",id:"deviceName",name:"deviceName",value:f.deviceName,onChange:q}),Object(l.jsx)(ke.a.Control.Feedback,{type:"invalid",children:"Device Name is a required field."})]})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Device Type"}),Object(l.jsxs)(Le.a,{sm:6,children:[Object(l.jsxs)(ke.a.Control,{custom:!0,required:!0,as:"select",id:"deviceType",name:"deviceType",value:null===f.deviceType?null:f.deviceType,onChange:q,children:[Object(l.jsx)("option",{value:"",children:"--Select Type--"}),j.map((function(e){return Object(l.jsx)("option",{value:e.id,children:e.name})}))]}),Object(l.jsx)(ke.a.Control.Feedback,{type:"invalid",children:"Device Type is a required field."})]})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Carpark"}),Object(l.jsxs)(Le.a,{sm:6,children:[Object(l.jsx)(ke.a.Control,{required:!0,placeholder:"Carpark",id:"deviceCarpark",name:"deviceCarpark",value:f.deviceCarpark,onChange:q}),Object(l.jsx)(ke.a.Control.Feedback,{type:"invalid",children:"Capark is a required field."})]})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Manufacturer"}),Object(l.jsxs)(Le.a,{sm:6,children:[Object(l.jsx)(ke.a.Control,{required:!0,placeholder:"Manufacturer",id:"manufacturer",name:"manufacturer",value:f.manufacturer,onChange:q}),Object(l.jsx)(ke.a.Control.Feedback,{type:"invalid",children:"Manufacturer is a required field."})]})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Manufacturer Code"}),Object(l.jsxs)(Le.a,{sm:6,children:[Object(l.jsx)(ke.a.Control,{required:!0,placeholder:"Manufacturer Code",id:"manufacturerCode",name:"manufacturerCode",value:f.manufacturerCode,onChange:q}),Object(l.jsx)(ke.a.Control.Feedback,{type:"invalid",children:"Manufacturer Code is a required field."})]})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Direction"}),Object(l.jsxs)(Le.a,{sm:6,children:[Object(l.jsx)(ke.a.Control,{required:!0,placeholder:"Direction",id:"direction",name:"direction",value:f.direction,onChange:q}),Object(l.jsx)(ke.a.Control.Feedback,{type:"invalid",children:"Direction is a required field."})]})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Primary Device?"}),Object(l.jsx)(Le.a,{sm:6,className:"align-items-center d-flex justify-content-center",children:Object(l.jsx)(ke.a.Check,{checked:f.isPrimaryDevice,type:"switch",id:"isPrimaryDevice",onChange:q})})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Control Gate?"}),Object(l.jsx)(Le.a,{sm:6,className:"align-items-center d-flex justify-content-center",children:Object(l.jsx)(ke.a.Check,{checked:f.isGateControl,type:"switch",id:"isGateControl",onChange:q})})]})]})})}),Object(l.jsxs)(De.a.Footer,{children:[Object(l.jsx)(Se.a,{variant:"secondary",onClick:function(){b(!1),a()},children:"Cancel"}),Object(l.jsx)(Se.a,{form:"deviceModal",variant:"primary",type:"submit",children:"Confirm"})]})]})}var Ee=n(244),Ae=n.n(Ee),Fe=n(652);function He(e){var t=e.hide,n=e.gateID,a=e.toggleModal,r=e.success,i=e.newState,j=e.projectID,u=e.gateTypes,d=Object(c.useState)(!1),h=Object(o.a)(d,2),b=h[0],O=h[1],p=Object(c.useState)({}),f=Object(o.a)(p,2),m=f[0],v=f[1],y=Object(c.useState)(!1),w=Object(o.a)(y,2),T=w[0],N=(w[1],Object(c.useState)([])),C=Object(o.a)(N,2),D=C[0],S=C[1],P=Object(c.useState)(!1),k=Object(o.a)(P,2),I=k[0],G=k[1],M={gateName:"",gateType:"",isChargeable:!1,ledOnTime:"00:00:00",ledOffTime:"00:00:00",allowedTypes:[]};Object(c.useEffect)((function(){O(!1),console.log("gateModal",n,j,i),t?i?v(M):(G(!0),Oe(n).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!==t.message.allowedTypes?v(t.message):v(Object(s.a)(Object(s.a)({},t.message),{},{allowedTypes:[]})),G(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Get Gate, There was an error!",e)}))):v(M),xe().then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S(t.message.whitelistTags.map((function(e){return{label:e,value:e}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Get WhiteList Tags, There was an error!",e)}))}),[T,t]);var L=function(e,t,n){var c,a;if(void 0===n?(c=e.target.id,a=e.target.value):(c=n.id,a=e),["isChargeable"].includes(c)){var r=e.target.checked;v((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(Ie.a)({},c,r))}))}else v((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(Ie.a)({},c,a))}))},R=function(){(function(e,t){console.log(t);var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"modifyGate",content:{gateID:e,modifyParams:t}})};return fetch(ie,n).then(se)})(n,m).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(!1),ee.success("Update Successful!"),r();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Update Gate, There was an error!",e)}))},E=function(){(function(e,t){var n=Object(s.a)(Object(s.a)({},t),{},{projectID:e}),c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"createGate",content:n})};return fetch(ie,c).then(se)})(j,m).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(!1),ee.success("Addition Successful!"),r();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Add Gate, There was an error!",e)}))};return Object(l.jsxs)(De.a,{show:t,onHide:function(){O(!1),a()},children:[Object(l.jsx)(De.a.Header,{closeButton:!0,children:Object(l.jsx)(De.a.Title,{children:i?"Add Gate":"Edit Gate"})}),Object(l.jsx)("div",{className:"loadingModal"+(I?"":" invisible"),children:Object(l.jsx)(Ge.a,{animation:"border",role:"status",children:Object(l.jsx)("span",{className:"sr-only",children:"Loading..."})})}),Object(l.jsx)(De.a.Body,{children:Object(l.jsx)(ke.a,{id:"gateModal",noValidate:!0,validated:b,onSubmit:function(e){e.preventDefault();var t=e.currentTarget;!1===t.checkValidity()&&(e.preventDefault(),e.stopPropagation()),O(!0),t.checkValidity()&&(i?E():R())},children:Object(l.jsxs)("div",{children:[Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Gate Name"}),Object(l.jsxs)(Le.a,{sm:6,children:[Object(l.jsx)(ke.a.Control,{required:!0,placeholder:"Name",id:"gateName",name:"gateName",value:m.gateName,onChange:L}),Object(l.jsx)(ke.a.Control.Feedback,{type:"invalid",children:"Gate Name is a required field."})]})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Gate Type"}),Object(l.jsxs)(Le.a,{sm:6,children:[Object(l.jsxs)(ke.a.Control,{custom:!0,required:!0,as:"select",id:"gateType",name:"gateType",value:null===m.gateType?"":m.gateType,onChange:L,children:[Object(l.jsx)("option",{value:"",children:"--Select Type--"}),u.map((function(e){return Object(l.jsx)("option",{value:e.id,children:e.name})}))]}),Object(l.jsx)(ke.a.Control.Feedback,{type:"invalid",children:"Gate Type is a required field."})]})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Charge fee for entry"}),Object(l.jsx)(Le.a,{sm:6,className:"align-items-center d-flex justify-content-center",children:Object(l.jsx)(ke.a.Check,{checked:m.isChargeable,type:"switch",id:"isChargeable",onChange:L})})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Time to turn on the LPR camera\u2019s LED"}),Object(l.jsx)(ke.a.Label,{column:!0,sm:6,className:"align-items-center d-flex",children:Object(l.jsx)(Ae.a,{value:m.ledOnTime,onChange:L,showSeconds:!0,input:Object(l.jsx)(ke.a.Control,{required:!0,id:"ledOnTime",type:"text",name:"ledOnTime",placeholder:"Time"})})})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Time to turn off the LPR"}),Object(l.jsx)(ke.a.Label,{column:!0,className:"align-items-center d-flex",sm:6,children:Object(l.jsx)(Ae.a,{value:m.ledOffTime,onChange:L,showSeconds:!0,input:Object(l.jsx)(ke.a.Control,{required:!0,id:"ledOffTime",type:"text",name:"ledOffTime",placeholder:"Time"})})})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Whitelist Tags"}),Object(l.jsx)(Le.a,{sm:6,children:Object(l.jsx)(Fe.a,{sticky:!0,searchable:!1,data:D,defaultValue:[],style:{width:"100%"},value:m.allowedTypes,onChange:function(e){L({target:{id:"allowedTypes",value:e}})}})})]})]})})}),Object(l.jsxs)(De.a.Footer,{children:[Object(l.jsx)(Se.a,{variant:"secondary",onClick:function(){O(!1),a()},children:"Cancel"}),Object(l.jsx)(Se.a,{form:"gateModal",variant:"primary",type:"submit",children:"Confirm"})]})]})}var qe=n(365),Ye=n(342),Ve=n(624),Je=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(e){var c;return Object(O.a)(this,n),(c=t.call(this,e)).state={alerts:[]},c}return Object(Ye.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.subscription=ee.onAlert(this.props.id).subscribe((function(t){e.setState({alerts:[].concat(Object(qe.a)(e.state.alerts),[t])}),setTimeout((function(){return e.removeAlert(t)}),void 0===t.time?3e3:t.time)}))}},{key:"componentWillUnmount",value:function(){this.subscription.unsubscribe()}},{key:"removeAlert",value:function(e){this.setState({alerts:this.state.alerts.filter((function(t){return t!==e}))})}},{key:"render",value:function(){var e=this,t=this.state.alerts;return t.length?Object(l.jsx)("div",{className:"alertGrp",children:(console.log(t),t.map((function(t,n){return Object(l.jsx)(Ve.a,{variant:t.type,dismissible:!0,onClose:function(){e.removeAlert(t)},children:t.message},n)})))}):null}}]),n}(a.a.Component),Ue=n(625),Be=n(343),ze=n.n(Be),We=n(344),_e=n.n(We),Xe=n(345),Ke=n.n(Xe),Qe=n(346),Ze=n.n(Qe);function $e(e){var t=e.count,n=e.page,c=e.rowsPerPage,a=e.onChangePage;return Object(l.jsxs)("div",{style:{flexShrink:0,right:0},children:[Object(l.jsx)(Ue.a,{onClick:function(e){a(e,0)},disabled:0===n,"aria-label":"first page",children:Object(l.jsx)(ze.a,{})}),Object(l.jsx)(Ue.a,{onClick:function(e){a(e,n-1)},disabled:0===n,"aria-label":"previous page",children:Object(l.jsx)(_e.a,{})}),Object(l.jsx)(Ue.a,{onClick:function(e){a(e,n+1)},disabled:n>=Math.ceil(t/c)-1,"aria-label":"next page",children:Object(l.jsx)(Ke.a,{})}),Object(l.jsx)(Ue.a,{onClick:function(e){a(e,Math.max(0,Math.ceil(t/c)-1))},disabled:n>=Math.ceil(t/c)-1,"aria-label":"last page",children:Object(l.jsx)(Ze.a,{})})]})}function et(e){var t=e.hide,n=e.accessRuleID,a=e.projectID,r=e.success,i=e.projectName,j=e.toggleModal,u=Object(c.useState)(!1),d=Object(o.a)(u,2),h=d[0],b=d[1],O=Object(c.useState)({}),p=Object(o.a)(O,2),f=p[0],m=p[1],v=Object(c.useState)(!1),y=Object(o.a)(v,2),w=y[0],T=(y[1],Object(c.useState)([])),N=Object(o.a)(T,2),C=N[0],D=N[1],S=Object(c.useState)({}),P=Object(o.a)(S,2),k=P[0],I=P[1],G=Object(c.useState)([]),M=Object(o.a)(G,2),L=M[0],R=M[1],E=Object(c.useState)(!0),A=Object(o.a)(E,2),F=A[0],H=A[1],q=function(){var e=Object(g.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},t.forEach(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n[t.gateID]=!1;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),L.forEach(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n[t]=!0;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=5,n;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){b(!1),null===n?(H(!1),m({projectID:a,accessRuleName:"",isChargeable:!1,gates:[]}),R([])):(setTimeout((function(){return H(!1)}),600),function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getAccessRule",content:{accessRuleID:e}})};return fetch(ie,t).then(se)}(n).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(t.message),R(t.message.gates);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Get Access Rule, There was an error!",e)})))}),[w]),Object(c.useEffect)((function(){m((function(e){return Object(s.a)(Object(s.a)({},e),{},{gates:Object.keys(k).filter((function(e){return k[e]}))})}))}),[k]),Object(c.useEffect)((function(){de(a,["gateID","gateName"]).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D(t.content.map((function(e){return{value:String(e.gateID),label:e.gateName}}))),q(t.content).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=I,e.next=3,t;case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Get Gate Rule, There was an error!",e)}))}),[L]);var Y=function(e,t,n){var c,a;if(void 0===n?(c=e.target.id,a=e.target.value):(c=n.id,a=e),["isChargeable"].includes(c)){var r=e.target.checked;m((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(Ie.a)({},c,r))}))}else m((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(Ie.a)({},c,a))}))},V=function(){(function(e,t){console.log(t);var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"modifyAccessRule",content:{accessRuleID:e,modifyParams:t}})};return fetch(ie,n).then(se)})(n,Object(s.a)(Object(s.a)({},f),{},{gates:f.gates.map((function(e){return parseInt(e)}))})).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(!1),ee.success("Update Successful!"),r();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Update Access Rule, There was an error!",e)}))},J=function(){(function(e){var t=Object(s.a)({},e),n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"createAccessRule",content:t})};return fetch(ie,n).then(se)})(Object(s.a)(Object(s.a)({},f),{},{gates:f.gates.map((function(e){return parseInt(e)}))})).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(!1),ee.success("Addition Successful!"),r();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Add Access Rule, There was an error!",e)}))};return Object(l.jsx)(De.a,{show:t,onHide:function(){b(!1),j()},children:F?Object(l.jsx)(Me.a,{className:"d-flex justify-content-center",style:{margin:"200px"},children:Object(l.jsx)(Ge.a,{size:"lg",animation:"border",role:"status",children:Object(l.jsx)("span",{className:"sr-only",children:"Loading..."})})}):Object(l.jsxs)("div",{children:[Object(l.jsx)(De.a.Header,{closeButton:!0,children:Object(l.jsx)(De.a.Title,{children:null===n?"Add Rule":"Edit Rule"})}),Object(l.jsx)(De.a.Body,{children:Object(l.jsx)(ke.a,{id:"ruleModal",noValidate:!0,validated:h,onSubmit:function(e){e.preventDefault();var t=e.currentTarget;!1===t.checkValidity()&&(e.preventDefault(),e.stopPropagation()),b(!0),t.checkValidity()&&(null===n?J():V())},children:Object(l.jsxs)("div",{children:[Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Project Name"}),Object(l.jsx)(Le.a,{sm:6,className:"align-items-center d-flex justify-content-center",children:Object(l.jsx)(ke.a.Control,{type:"text",placeholder:i,readOnly:!0})})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Access Rule Name"}),Object(l.jsxs)(Le.a,{sm:6,children:[Object(l.jsx)(ke.a.Control,{required:!0,placeholder:"Name",id:"accessRuleName",name:"accessRuleName",value:f.accessRuleName,onChange:Y}),Object(l.jsx)(ke.a.Control.Feedback,{type:"invalid",children:"Rule Name is a required field."})]})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Gates"}),Object(l.jsx)(Le.a,{sm:6,children:Object(l.jsx)(Fe.a,{sticky:!0,searchable:!1,data:C,defaultValue:[],style:{width:"100%"},value:f.gates,onChange:function(e){Y({target:{id:"gates",value:e}})}})})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Is Chargeable"}),Object(l.jsx)(Le.a,{sm:6,className:"align-items-center d-flex justify-content-center",children:Object(l.jsx)(ke.a.Check,{checked:f.isChargeable,type:"switch",id:"isChargeable",onChange:Y})})]})]})})}),Object(l.jsxs)(De.a.Footer,{children:[Object(l.jsx)(Se.a,{variant:"secondary",onClick:function(){b(!1),j()},children:"Cancel"}),Object(l.jsx)(Se.a,{form:"ruleModal",variant:"primary",type:"submit",children:"Confirm"})]})]})})}function tt(e){var t=e.hide,n=e.unitID,a=e.projectID,r=e.success,i=e.projectName,j=e.toggleModal,u=Object(c.useState)(!1),d=Object(o.a)(u,2),h=d[0],b=d[1],O=Object(c.useState)({}),p=Object(o.a)(O,2),f=p[0],m=p[1],v=Object(c.useState)(!1),y=Object(o.a)(v,2),w=y[0],T=(y[1],Object(c.useState)([])),N=Object(o.a)(T,2),C=N[0],D=N[1],S=Object(c.useState)([]),P=Object(o.a)(S,2),k=P[0],I=P[1],G=Object(c.useState)({}),M=Object(o.a)(G,2),L=M[0],R=M[1],E=Object(c.useState)({}),A=Object(o.a)(E,2),F=A[0],H=A[1],q=Object(c.useState)([]),Y=Object(o.a)(q,2),V=Y[0],J=Y[1],U=Object(c.useState)([]),B=Object(o.a)(U,2),z=B[0],W=B[1],_=Object(c.useState)(!0),X=Object(o.a)(_,2),K=X[0],Q=X[1],Z=function(){var e=Object(g.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},t.forEach(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n[t.gateID]=!1;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),V.forEach(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n[t]=!0;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=5,n;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(g.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},t.forEach(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n[t.gateID]=!1;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),z.forEach(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n[t]=!0;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=5,n;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){b(!1),null===n?(Q(!1),m({projectID:a,unitName:"",entryGates:[],exitGates:[],maxPlates:0}),J([]),W([])):(setTimeout((function(){return Q(!1)}),600),function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getUnit",content:{unitID:e}})};return fetch(ie,t).then(se)}(n).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(t.message),J(t.message.entryGates),W(t.message.exitGates);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Get Unit, There was an error!",e)})))}),[w]),Object(c.useEffect)((function(){m((function(e){return Object(s.a)(Object(s.a)({},e),{},{entryGates:Object.keys(L).filter((function(e){return L[e]})),exitGates:Object.keys(F).filter((function(e){return F[e]}))})}))}),[L,F]),Object(c.useEffect)((function(){de(a,["gateID","gateName","gateType"]).then(function(){var e=Object(g.a)(x.a.mark((function e(t){var n,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.content.filter((function(e){return"entry"==e.gateType})),c=t.content.filter((function(e){return"exit"==e.gateType})),D(n.map((function(e){return{value:String(e.gateID),label:e.gateName}}))),I(c.map((function(e){return{value:String(e.gateID),label:e.gateName}}))),Z(n).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=R,e.next=3,t;case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),$(c).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=H,e.next=3,t;case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Get Unit Gates, There was an error!",e)}))}),[V,z]);var te=function(e,t,n){var c,a;if(void 0===n?(c=e.target.id,a=e.target.value):(c=n.id,a=e),["isChargeable"].includes(c)){var r=e.target.checked;m((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(Ie.a)({},c,r))}))}else m((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(Ie.a)({},c,a))}))},ne=function(){we(n,Object(s.a)(Object(s.a)({},f),{},{entryGates:f.entryGates.map((function(e){return parseInt(e)})),exitGates:f.exitGates.map((function(e){return parseInt(e)}))})).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(!1),ee.success("Update Successful!"),r();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Update Unit, There was an error!",e)}))},ce=function(){(function(e){var t=Object(s.a)({},e),n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"createUnit",content:t})};return fetch(ie,n).then(se)})(Object(s.a)(Object(s.a)({},f),{},{entryGates:f.entryGates.map((function(e){return parseInt(e)})),exitGates:f.exitGates.map((function(e){return parseInt(e)}))})).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(!1),ee.success("Addition Successful!"),r();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Add Unit, There was an error!",e)}))};return Object(l.jsx)(De.a,{show:t,onHide:function(){b(!1),j()},children:K?Object(l.jsx)(Me.a,{className:"d-flex justify-content-center",style:{margin:"200px"},children:Object(l.jsx)(Ge.a,{size:"lg",animation:"border",role:"status",children:Object(l.jsx)("span",{className:"sr-only",children:"Loading..."})})}):Object(l.jsxs)("div",{children:[Object(l.jsx)(De.a.Header,{closeButton:!0,children:Object(l.jsx)(De.a.Title,{children:null===n?"Add Unit":"Edit Unit"})}),Object(l.jsx)(De.a.Body,{children:Object(l.jsx)(ke.a,{id:"unitModal",noValidate:!0,validated:h,onSubmit:function(e){e.preventDefault();var t=e.currentTarget;!1===t.checkValidity()&&(e.preventDefault(),e.stopPropagation()),b(!0),t.checkValidity()&&(null===n?ce():ne())},children:Object(l.jsxs)("div",{children:[Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Project Name"}),Object(l.jsx)(Le.a,{sm:6,className:"align-items-center d-flex justify-content-center",children:Object(l.jsx)(ke.a.Control,{type:"text",placeholder:i,readOnly:!0})})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Unit Name"}),Object(l.jsxs)(Le.a,{sm:6,children:[Object(l.jsx)(ke.a.Control,{required:!0,placeholder:"Name",id:"unitName",name:"unitName",value:f.unitName,onChange:te}),Object(l.jsx)(ke.a.Control.Feedback,{type:"invalid",children:"Unit Name is a required field."})]})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Entry Gates"}),Object(l.jsx)(Le.a,{sm:6,children:Object(l.jsx)(Fe.a,{sticky:!0,searchable:!1,data:C,defaultValue:[],style:{width:"100%"},value:f.entryGates,onChange:function(e){te({target:{id:"entryGates",value:e}})}})})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Exit Gates"}),Object(l.jsx)(Le.a,{sm:6,children:Object(l.jsx)(Fe.a,{sticky:!0,searchable:!1,data:k,defaultValue:[],style:{width:"100%"},value:f.exitGates,onChange:function(e){te({target:{id:"exitGates",value:e}})}})})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Maximum Vehicles"}),Object(l.jsxs)(Le.a,{sm:6,children:[Object(l.jsx)(ke.a.Control,{required:!0,placeholder:"Number of vehicles",id:"maxPlates",name:"maxPlates",type:"number",value:f.maxPlates,onChange:te}),Object(l.jsx)(ke.a.Control.Feedback,{type:"invalid",children:"Maximum Vehicles is a required field."})]})]})]})})}),Object(l.jsxs)(De.a.Footer,{children:[Object(l.jsx)(Se.a,{variant:"secondary",onClick:function(){b(!1),j()},children:"Cancel"}),Object(l.jsx)(Se.a,{form:"unitModal",variant:"primary",type:"submit",children:"Confirm"})]})]})})}function nt(e){var t=e.toggleModal,n=e.src;return Object(l.jsx)(De.a,{size:"lg",centered:!0,show:null!==n,onHide:t,children:Object(l.jsx)("img",{src:n})})}var ct=n(649);function at(e){return e<10?"0"+e:e}function rt(e){return null===e?"":e.getFullYear().toString()+"-"+at(e.getMonth()+1)+"-"+at(e.getDate())+" "+at(e.getHours())+":"+at(e.getMinutes())+":"+at(e.getSeconds())}function it(e){var t=e.hide,n=e.ID,a=e.success,r=e.projectName,i=e.accessRules,j=e.units,u=e.toggleModal,d=Object(c.useState)(!1),h=Object(o.a)(d,2),b=h[0],O=h[1],p=Object(c.useState)({}),f=Object(o.a)(p,2),m=f[0],v=f[1],y=Object(c.useState)(!1),w=Object(o.a)(y,2),T=w[0],N=(w[1],Object(c.useState)([])),C=Object(o.a)(N,2),D=C[0],S=C[1],P=Object(c.useState)([]),k=Object(o.a)(P,2),I=k[0],G=k[1],M=Object(c.useState)(!1),L=Object(o.a)(M,2),R=L[0],E=L[1],A=function(){(function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getTable",content:{objName:"plate",columns:e}})};return fetch(ie,t).then(se)})(["plateNumber"]).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:G(t.content.map((function(e){return e.plateNumber})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Get Plate Number, There was an error!",e)}))};Object(c.useEffect)((function(){O(!1),xe().then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S(t.message.whitelistTags);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Get WhiteList Tags, There was an error!",e)})),A(),null===n?v({plateNumber:"",unitID:"",accessRuleID:"",tag:"",startDateTime:"",endDateTime:""}):(E(!0),function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getWhitelistEntry",content:{recordID:e}})};return fetch(ie,t).then(se)}(n).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t.message),v(t.message),E(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Get Whitelist entry info, There was an error!",e)})))}),[T]);var F=function(e,t,n){var c,a;void 0===n?(c=e.target.id,a=e.target.value):(c=n.id,a=e),"boolean"===typeof m[c]?(console.log("bool"),v((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(Ie.a)({},c,!m[c]))}))):v((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(Ie.a)({},c,a))}))},H=function(){E(!0),console.log(m),function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"editWhitelistEntry",content:e})};return fetch(ie,t).then(se)}(m).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(!1),E(!1),ee.success("Update Successful!"),a();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){E(!1),ee.error("There was an error!"),console.error("Update Whitelist Entry, There was an error!",e)}))},q=function(){E(!0),function(e){var t=Object(s.a)({},e),n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"editWhitelistEntry",content:t})};return fetch(ie,n).then(se)}(m).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E(!1),O(!1),ee.success("Addition Successful!"),a();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){E(!1),ee.error("There was an error!"),console.error("Add Whitelist Entry, There was an error!",e)}))};return Object(l.jsxs)(De.a,{show:t,onHide:function(){O(!1),u()},children:[Object(l.jsx)(De.a.Header,{closeButton:!0,children:Object(l.jsx)(De.a.Title,{children:null===n?"Add Entry":"Edit Entry"})}),Object(l.jsx)("div",{className:"loadingModal"+(R?"":" invisible"),children:Object(l.jsx)(Ge.a,{animation:"border",role:"status",children:Object(l.jsx)("span",{className:"sr-only",children:"Loading..."})})}),Object(l.jsx)(De.a.Body,{children:Object(l.jsx)(ke.a,{id:"whitelistModal",noValidate:!0,validated:b,onSubmit:function(e){e.preventDefault();var t=e.currentTarget;!1===t.checkValidity()&&(e.preventDefault(),e.stopPropagation()),O(!0),t.checkValidity()&&(null===n?q():H())},children:Object(l.jsxs)("div",{children:[Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Project Name"}),Object(l.jsx)(Le.a,{sm:6,className:"align-items-center d-flex justify-content-center",children:Object(l.jsx)(ke.a.Control,{type:"text",placeholder:r,readOnly:!0})})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Plate Number"}),Object(l.jsx)(Le.a,{sm:6,children:null===n?Object(l.jsxs)("div",{children:[Object(l.jsx)(ke.a.Control,{required:!0,placeholder:"Plate Number",id:"plateNumber",name:"plateNumber",value:m.plateNumber,onChange:F,isValid:I.includes(m.plateNumber),isInvalid:!I.includes(m.plateNumber)&&b}),Object(l.jsx)(ke.a.Control.Feedback,{type:"invalid",children:"Please enter a registered plate no."})]}):Object(l.jsx)(ke.a.Control,{type:"text",placeholder:m.plateNumber,readOnly:!0})})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Unit"}),Object(l.jsx)(Le.a,{sm:6,children:Object(l.jsxs)(ke.a.Control,{custom:!0,as:"select",id:"unitID",name:"unitID",value:null===m.unitID?"":m.unitID,onChange:F,children:[Object(l.jsx)("option",{value:"",children:"None"}),j.map((function(e){return Object(l.jsx)("option",{value:e.unitID,children:e.unitName})}))]})})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Access Rule"}),Object(l.jsxs)(Le.a,{sm:6,children:[Object(l.jsxs)(ke.a.Control,{custom:!0,required:!0,as:"select",id:"accessRuleID",name:"accessRuleID",value:null===m.accessRuleID?"":m.accessRuleID,onChange:F,children:[Object(l.jsx)("option",{value:"",children:"--Select Access Rule--"}),i.map((function(e){return Object(l.jsx)("option",{value:e.accessRuleID,children:e.accessRuleName})}))]}),Object(l.jsx)(ke.a.Control.Feedback,{type:"invalid",children:"Access Rule is a required field."})]})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Tag"}),Object(l.jsx)(Le.a,{sm:6,children:Object(l.jsxs)(ke.a.Control,{custom:!0,as:"select",id:"tag",name:"tag",value:null===m.tag?"":m.tag,onChange:F,children:[Object(l.jsx)("option",{value:"",children:"None"}),D.map((function(e){return Object(l.jsx)("option",{value:e,children:e})}))]})})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Start Date Time"}),Object(l.jsx)(Le.a,{sm:6,children:Object(l.jsx)(ct.a,{className:"width-100",value:m.startDateTime,onChange:function(e){var t,n;F({target:{id:"startDateTime",value:rt(e)}}),F({target:{id:"endDateTime",value:(t=rt(e),n=m.endDateTime,""===t?n:""===n?"":t<n?n:t)}})},format:"YYYY-MM-DD HH:mm:ss",ranges:[{label:"Now",value:new Date}],placeholder:"Start DateTime"})})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"End Date Time"}),Object(l.jsx)(Le.a,{sm:6,children:Object(l.jsx)(ct.a,{className:"width-100",value:m.endDateTime,onChange:function(e){var t,n;F({target:{id:"endDateTime",value:rt(e)}}),F({target:{id:"startDateTime",value:(t=rt(e),n=m.startDateTime,""===t?n:""===n?"":t>n?n:t)}})},format:"YYYY-MM-DD HH:mm:ss",ranges:[{label:"Now",value:new Date}],placeholder:"End DateTime"})})]})]})})}),Object(l.jsxs)(De.a.Footer,{children:[Object(l.jsx)(Se.a,{variant:"secondary",onClick:function(){O(!1),u()},children:"Cancel"}),Object(l.jsx)(Se.a,{form:"whitelistModal",variant:"primary",type:"submit",children:"Confirm"})]})]})}var st=n(193),ot=n(61),lt=function(e,t){console.log(e);var n=ot.utils.aoa_to_sheet([["Record ID","Plate Number","Project","Access Rule","Tag","Start DateTime","End DateTime"]]);ot.utils.sheet_add_json(n,e,{skipHeader:!0,origin:1});n["!cols"]=[{wch:10},{wch:15},{wch:15},{wch:15},{wch:10},{wch:20},{wch:20}];var c=ot.utils.book_new();ot.utils.book_append_sheet(c,n,"Whitelist");var a=ot.write(c,{bookType:"xlsx",type:"array"}),r=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});st.saveAs(r,t+".xlsx")};function jt(e){var t=e.hide,n=e.projects,a=e.toggleModal,r=e.projectNames,i=Object(c.useState)(null),s=Object(o.a)(i,2),j=s[0],u=s[1],d=Object(c.useState)(!1),h=Object(o.a)(d,2),b=(h[0],h[1],Object(c.useState)(null)),O=Object(o.a)(b,2),p=O[0],f=O[1],m=Object(c.useState)(!1),v=Object(o.a)(m,2),y=v[0],w=v[1],T=function(){var e=Object(g.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},t.forEach(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n[t.accessRuleID]={accessRuleName:t.accessRuleName,projectID:t.projectID};case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,n;case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){ue(j,["accessRuleID","accessRuleName","projectID"]).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T(t.content).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=f,e.next=3,t;case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Get Access Rule, there was an error!",e)}))}),[j]);return Object(l.jsxs)(De.a,{show:t,onHide:function(){a()},children:[Object(l.jsx)(De.a.Header,{closeButton:!0,children:Object(l.jsx)(De.a.Title,{children:"Export Whitelist Entries"})}),Object(l.jsx)("div",{className:"loadingModal"+(y?"":" invisible"),children:Object(l.jsx)(Ge.a,{animation:"border",role:"status",children:Object(l.jsx)("span",{className:"sr-only",children:"Loading..."})})}),Object(l.jsx)(De.a.Body,{children:Object(l.jsx)(ke.a,{children:Object(l.jsx)("div",{children:Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Project Name"}),Object(l.jsx)(Le.a,{sm:6,className:"align-items-center d-flex justify-content-center",children:Object(l.jsxs)(ke.a.Control,{custom:!0,required:!0,as:"select",id:"project",name:"project",value:j,onChange:function(e){u(e.target.value)},children:[Object(l.jsx)("option",{value:null,children:"All Projects"}),n.map((function(e){return Object(l.jsx)("option",{value:e.projectID,children:e.projectName})}))]})})]})})})}),Object(l.jsxs)(De.a.Footer,{children:[Object(l.jsx)(Se.a,{variant:"secondary",onClick:function(){a()},children:"Cancel"}),Object(l.jsx)(Se.a,{onClick:function(){w(!0),ve(["recordID","plateNumber","accessRuleID","tag","startDateTime","endDateTime"]).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:lt(t.content.filter((function(e){return null!==e.accessRuleID&&void 0!==p[e.accessRuleID]})).map((function(e){return{recordID:e.recordID,plateNumber:e.plateNumber,project:r[p[e.accessRuleID].projectID],accessRule:p[e.accessRuleID].accessRuleName,tag:e.tag,startDateTime:e.startDateTime,endDateTime:e.endDateTime}})),"Whitelist"),w(!1),a();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Get entry, there was an error!",e)}))},variant:"primary",children:"Download"})]})]})}var ut=n(656);function dt(e){return e<10?"0"+e:e}function ht(e){return null===e?"":e.getFullYear().toString()+"-"+dt(e.getMonth()+1)+"-"+dt(e.getDate())+" "+dt(e.getHours())+":"+dt(e.getMinutes())+":"+dt(e.getSeconds())}var bt=function(e,t){console.log(e);var n=ot.utils.aoa_to_sheet([["Project","Vehicle Type","Open","Gate Name","Gate Type","Detection Time","Confirmed Time","Original Plate","Actual Plate","Image","Plate Image"]]);ot.utils.sheet_add_json(n,e,{skipHeader:!0,origin:1});n["!cols"]=[{wch:15},{wch:15},{wch:10},{wch:15},{wch:10},{wch:20},{wch:20},{wch:15},{wch:15},{wch:15},{wch:15}];var c=ot.utils.book_new();ot.utils.book_append_sheet(c,n,"Records");var a=ot.write(c,{bookType:"xlsx",type:"array"}),r=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});st.saveAs(r,t+".xlsx")};function Ot(e){var t=e.hide,n=e.toggleModal,a=Object(c.useState)(null),r=Object(o.a)(a,2),i=r[0],j=r[1],u=Object(c.useState)(!1),d=Object(o.a)(u,2),h=(d[0],d[1],Object(c.useState)(!1)),b=Object(o.a)(h,2),O=b[0],p=b[1],f=Object(c.useState)({startTime:"",endTime:""}),m=Object(o.a)(f,2),v=m[0],y=m[1],w=Object(c.useState)([]),T=Object(o.a)(w,2),N=T[0],C=T[1];Object(c.useEffect)((function(){oe(["projectName"]).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C(t.content);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("There was an error!",e)}))}));var D=["projectName","vehicleType","isOpened","gateName","gateType","detectionTime","confirmedTime","originalPlate","confirmedPlate","image1","plateImage"],S=function(e,t){y((function(n){return Object(s.a)(Object(s.a)({},n),{},Object(Ie.a)({},t,e))}))};return Object(l.jsxs)(De.a,{show:t,size:"lg",onHide:function(){n()},children:[Object(l.jsx)(De.a.Header,{closeButton:!0,children:Object(l.jsx)(De.a.Title,{children:"Export Whitelist Entries"})}),Object(l.jsx)("div",{className:"loadingModal"+(O?"":" invisible"),children:Object(l.jsx)(Ge.a,{animation:"border",role:"status",children:Object(l.jsx)("span",{className:"sr-only",children:"Loading..."})})}),Object(l.jsx)(De.a.Body,{children:Object(l.jsx)(ke.a,{children:Object(l.jsxs)("div",{children:[Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:3,align:"right",children:"Project Name"}),Object(l.jsx)(Le.a,{sm:8,className:"align-items-center d-flex justify-content-center",children:Object(l.jsxs)(ke.a.Control,{custom:!0,required:!0,as:"select",id:"project",name:"project",value:i,onChange:function(e){j(e.target.value)},children:[Object(l.jsx)("option",{value:null,children:"All Projects"}),N.map((function(e){return Object(l.jsx)("option",{value:e.projectName,children:e.projectName})}))]})})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:3,align:"right",children:"Detection Time"}),Object(l.jsx)(Le.a,{sm:8,className:"align-items-center d-flex justify-content-center",children:Object(l.jsxs)(ut.a,{style:{"background-color":"white"},children:[Object(l.jsx)(ut.a.Addon,{children:"From"}),Object(l.jsx)(ct.a,{format:"YYYY-MM-DD HH:mm:ss",block:!0,appearance:"subtle",value:v.startTime,onChange:function(e){var t,n;S(ht(e),"startTime"),S((t=ht(e),n=v.endTime,""===t?n:""===n?"":t<n?n:t),"endTime")},ranges:[{label:"Now",value:new Date}],placeholder:"YYYY-MM-DD HH:MM:SS"}),Object(l.jsx)(ut.a.Addon,{children:"To"}),Object(l.jsx)(ct.a,{format:"YYYY-MM-DD HH:mm:ss",block:!0,appearance:"subtle",value:v.endTime,onChange:function(e){var t,n;S(ht(e),"endTime"),S((t=ht(e),n=v.startTime,""===t?n:""===n?"":t>n?n:t),"startTime")},ranges:[{label:"Now",value:new Date}],placeholder:"YYYY-MM-DD HH:MM:SS"})]})})]})]})})}),Object(l.jsxs)(De.a.Footer,{children:[Object(l.jsx)(Se.a,{variant:"secondary",onClick:function(){n()},children:"Cancel"}),Object(l.jsx)(Se.a,{onClick:function(){!function(){p(!0);var e=""===v.startTime&&""===v.endTime?{}:{detectionTime:v.startTime+"|"+v.endTime};null!==i&&(e.projectName=i),le(D,e).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(!1),bt(t.content,"Records"),n();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("There was an error!",e)}))}()},variant:"primary",children:"Download"})]})]})}var pt=n(42),ft=n(626),mt=n(660),xt=n(627),gt=n(628),vt=n(629),yt=n(630),wt=n(631),Tt=n(632),Nt=n(633),Ct=n(634),Dt=n(149),St=n.n(Dt),Pt=n(241),kt=n.n(Pt),It=n(356),Gt=n.n(It),Mt=n(355),Lt=n.n(Mt),Rt=n(33);function Et(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=(t[0],t[1],Object(c.useState)(null)),a=Object(o.a)(n,2),r=a[0],i=(a[1],Object(c.useState)([])),j=Object(o.a)(i,2),u=j[0],d=j[1],h=Object(c.useState)([]),b=Object(o.a)(h,2),O=b[0],p=b[1],f=Object(c.useState)([]),m=Object(o.a)(f,2),v=m[0],y=m[1],w=Object(c.useState)({}),T=Object(o.a)(w,2),N=T[0],D=T[1],S=Object(c.useState)(null),P=Object(o.a)(S,2),k=P[0],I=P[1],G=Object(c.useState)({edit:!1,delete:!1}),M=Object(o.a)(G,2),L=M[0],R=M[1],E=Object(C.g)(),A=function(){(function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getTable",content:{objName:"device",columns:e}})};return fetch(ie,t).then(se)})(["deviceID","deviceName","deviceType","deviceStatus","gateID","deviceIP"]).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(t.content.filter((function(e){return"online"!==e.deviceStatus&&null!==e.gateID})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Get All Device, there was an error!",e)})),function(){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getNewDevice"})};return fetch(ie,e).then(se)}().then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(t.message);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Get All Device, there was an error!",e)}))};Object(c.useEffect)((function(){A(),me("device").then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D(t.message),y(Object.entries(t.message).map((function(e){return{id:e[0],name:e[1].name}})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("There was an error Get Device Types!",e)}))}),[r]);var F=function(e){var t=L[e];R((function(n){return Object(s.a)(Object(s.a)({},n),{},Object(Ie.a)({},e,!t))}))},H=function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fe(t).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A(),F("delete"),ee.success("Device Deleted");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Delete Device, There was an error!",e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsxs)("div",{children:[Object(l.jsxs)(Rt.a,{children:[Object(l.jsx)("meta",{charSet:"utf-8"}),Object(l.jsx)("title",{children:"Home"})]}),Object(l.jsx)(Pe,{hide:L.delete,success:function(){H(k)},toggleModal:function(){F("delete")},title:"Confirm Deletion",body:"Delete this device?"}),Object(l.jsx)(Re,{deviceTypes:v,hide:L.edit,gateID:null,deviceID:k,success:function(){A(),F("edit")},toggleModal:function(){F("edit")}}),Object(l.jsx)(ft.a,{className:"dashboard",children:Object(l.jsxs)(Me.a,{children:[Object(l.jsx)(Le.a,{sm:3,children:Object(l.jsx)(mt.a,{children:Object(l.jsxs)("p",{className:"cardHomeText",children:[Object(l.jsx)("div",{className:"cardIconDiv success",children:Object(l.jsx)("span",{className:"cardIcon",children:Object(l.jsx)(St.a,{fontSize:"large",style:{color:"white"}})})}),"Sample",Object(l.jsx)("h3",{className:"cardHomeNumber",style:{color:"#66bb6a"},children:"~"})]})})}),Object(l.jsx)(Le.a,{sm:3,children:Object(l.jsx)(mt.a,{children:Object(l.jsxs)("p",{className:"cardHomeText",children:[Object(l.jsx)("div",{className:"cardIconDiv warning",children:Object(l.jsx)("span",{className:"cardIcon",children:Object(l.jsx)(St.a,{fontSize:"large",style:{color:"white"}})})}),"Sample",Object(l.jsx)("h3",{className:"cardHomeNumber",style:{color:"#ffa726"},children:"~"})]})})}),Object(l.jsx)(Le.a,{sm:3,children:Object(l.jsx)(mt.a,{children:Object(l.jsxs)("p",{className:"cardHomeText",children:[Object(l.jsx)("div",{className:"cardIconDiv info",children:Object(l.jsx)("span",{className:"cardIcon",children:Object(l.jsx)(St.a,{fontSize:"large",style:{color:"white"}})})}),"New Devices",Object(l.jsx)("h3",{className:"cardHomeNumber",style:{color:"#26c6da"},children:O.length})]})})}),Object(l.jsx)(Le.a,{sm:3,children:Object(l.jsx)(mt.a,{children:Object(l.jsxs)("p",{className:"cardHomeText",children:[Object(l.jsx)("div",{className:"cardIconDiv danger",children:Object(l.jsx)("span",{className:"cardIcon",children:Object(l.jsx)(St.a,{fontSize:"large",style:{color:"white"}})})}),"Disconnected Devices",Object(l.jsx)("h3",{className:"cardHomeNumber",style:{color:"#ef5350"},children:u.length})]})})})]})}),Object(l.jsx)("div",{className:"content",children:Object(l.jsxs)(Me.a,{children:[Object(l.jsx)(Le.a,{sm:4,children:Object(l.jsxs)(mt.a,{style:{height:"465px"},children:[Object(l.jsx)(xt.a,{className:"cardTitle",variant:"h6",component:"h2",children:"New Devices"}),Object(l.jsx)(gt.a,{component:vt.a,className:"scrollbar-grey",style:{"box-shadow":"none"},children:Object(l.jsxs)(yt.a,{stickyHeader:!0,"aria-label":"simple table",children:[Object(l.jsx)(wt.a,{children:Object(l.jsxs)(Tt.a,{children:[Object(l.jsx)(Nt.a,{align:"left",children:Object(l.jsx)("b",{children:"ID"})}),Object(l.jsx)(Nt.a,{align:"left",children:Object(l.jsx)("b",{children:"IP"})}),Object(l.jsx)(Nt.a,{align:"left"})]})}),Object(l.jsx)(Ct.a,{children:O.length>0?O.map((function(e,t){return Object(l.jsxs)(Tt.a,{children:[Object(l.jsx)(Nt.a,{align:"left",children:e.deviceID}),Object(l.jsx)(Nt.a,{align:"left",children:""==e.deviceIP||null==e.deviceIP?"-":e.deviceIP}),Object(l.jsx)(Nt.a,{align:"right",children:Object(l.jsx)(Ue.a,{style:{padding:0},onClick:function(){I(e.deviceID),F("edit")},children:Object(l.jsx)(Lt.a,{})})})]},e.deviceID)})):Object(l.jsx)(Tt.a,{children:Object(l.jsx)(Nt.a,{align:"center",colSpan:3,children:"No New Devices"})})})]})})]})}),Object(l.jsx)(Le.a,{sm:8,children:Object(l.jsxs)(mt.a,{style:{height:"465px"},children:[Object(l.jsx)(xt.a,{className:"cardTitle",variant:"h6",component:"h2",children:"Disconnected Devices"}),Object(l.jsx)(gt.a,{component:vt.a,className:"scrollbar-grey",style:{"box-shadow":"none"},children:Object(l.jsxs)(yt.a,{stickyHeader:!0,"aria-label":"simple table",children:[Object(l.jsx)(wt.a,{children:Object(l.jsxs)(Tt.a,{children:[Object(l.jsx)(Nt.a,{align:"left",children:Object(l.jsx)("b",{children:"ID"})}),Object(l.jsx)(Nt.a,{align:"left",children:Object(l.jsx)("b",{children:"Name"})}),Object(l.jsx)(Nt.a,{align:"left",children:Object(l.jsx)("b",{children:"Type"})}),Object(l.jsx)(Nt.a,{align:"left",children:Object(l.jsx)("b",{children:"IP"})}),Object(l.jsx)(Nt.a,{align:"left"})]})}),Object(l.jsx)(Ct.a,{children:u.length>0?u.map((function(e,t){return Object(l.jsxs)(Tt.a,{children:[Object(l.jsx)(Nt.a,{align:"left",children:e.deviceID}),Object(l.jsx)(Nt.a,{align:"left",children:e.deviceName}),Object(l.jsx)(Nt.a,{align:"left",children:null===e.deviceType?null:void 0===N[e.deviceType]?e.deviceType:N[e.deviceType].name}),Object(l.jsx)(Nt.a,{align:"left",children:""==e.deviceIP||null==e.deviceIP?"-":e.deviceIP}),Object(l.jsxs)(Nt.a,{align:"right",children:[Object(l.jsx)(Ue.a,{style:{padding:5},onClick:function(){var t;t=e.gateID,Oe(t).then(function(){var e=Object(g.a)(x.a.mark((function e(n){var c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=n.message.projectID,E.push("/project/"+String(c)+"/gate/"+String(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Get Gate Info, there was an error!",e)}))},children:Object(l.jsx)(kt.a,{})}),Object(l.jsx)(Ue.a,{style:{padding:5},onClick:function(){I(e.deviceID),F("delete")},children:Object(l.jsx)(Gt.a,{})})]})]},e.deviceID)})):Object(l.jsx)(Tt.a,{children:Object(l.jsx)(Nt.a,{align:"center",colSpan:5,children:"No Disconnected Devices"})})})]})})]})})]})})]})}function At(){var e=Object(c.useContext)(u),t=(e.state,e.dispatch),n=Object(C.g)(),a=Object(c.useState)({username:"",password:""}),r=Object(o.a)(a,2),i=r[0],j=r[1],d=function(e){var t=e.target,n=t.id,c=t.value;j((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(Ie.a)({},n,c))}))};return Object(l.jsxs)("div",{className:"maincontainer h-100",children:[Object(l.jsxs)(Rt.a,{children:[Object(l.jsx)("meta",{charSet:"utf-8"}),Object(l.jsx)("title",{children:"Login"})]}),Object(l.jsx)("div",{className:"container-fluid bg-light h-100",children:Object(l.jsx)("div",{className:"login d-flex align-items-center py-5",children:Object(l.jsx)("div",{className:"container",children:Object(l.jsx)("div",{className:"row",children:Object(l.jsxs)("div",{className:"col-xs-10 col-sm-6 col-md-5 col-xl-4 mx-auto ",children:[Object(l.jsx)("h3",{className:"display-4",children:"Login"}),Object(l.jsx)("p",{className:"text-muted mb-4",children:"Enter your credentials to login."}),Object(l.jsxs)("form",{children:[Object(l.jsx)("div",{className:"form-group mb-3",children:Object(l.jsx)("input",{id:"username",type:"username",placeholder:"Username",required:"required",className:"form-control rounded-pill border-0 shadow-sm px-4",onChange:d,value:i.username})}),Object(l.jsx)("div",{className:"form-group mb-3",children:Object(l.jsx)("input",{id:"password",type:"password",placeholder:"Password",required:"required",className:"form-control rounded-pill border-0 shadow-sm px-4 text-primary",onChange:d,value:i.password})}),Object(l.jsx)("p",{id:"login-error",className:"text-danger"}),Object(l.jsx)("button",{type:"submit",className:"btn btn-primary btn-block text-uppercase mb-2 rounded-pill shadow-sm",onClick:function(e){e.preventDefault();var c=i.username,a=i.password;"huajun"===c&&"huajun"===a?(t({type:"setAuth",value:!0}),t({type:"setUser",value:c}),n.push("/home")):0===c.length?document.getElementById("login-error").innerText="Username cannot be blank":0===a.length?document.getElementById("login-error").innerText="Password cannot be blank":document.getElementById("login-error").innerText="Invalid Username or Password"},children:"Sign in"})]})]})})})})})]})}var Ft=n(661),Ht=n(638),qt=n(648),Yt=n(635),Vt=n(636),Jt=n(637),Ut=n(38),Bt=n.n(Ut);function zt(e){e.match;var t=Object(C.g)(),n=Object(c.useState)([]),r=Object(o.a)(n,2),i=r[0],j=r[1],u=Object(c.useState)([]),d=Object(o.a)(u,2),h=d[0],b=d[1],O=Object(c.useState)(!1),p=Object(o.a)(O,2),f=p[0],m=p[1],v=Object(c.useState)({delete:!1,add:!1}),y=Object(o.a)(v,2),w=y[0],T=y[1],N=Object(c.useState)(""),D=Object(o.a)(N,2),S=D[0],P=D[1],k=Object(c.useState)({projectName:"",location:"",projectType:""}),I=Object(o.a)(k,2),G=I[0],M=I[1],L=Object(c.useState)({projectName:"",location:"",projectType:""}),R=Object(o.a)(L,2),E=R[0],A=R[1],F=Object(c.useState)(!1),H=Object(o.a)(F,2),q=H[0],Y=(H[1],function(){m(!0),oe(["projectID","projectName","location","projectType"]).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t.content),j(t.content),m(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("There was an error!",e)})),K(0)});Object(c.useEffect)((function(){Y()}),[q]),Object(c.useEffect)((function(){U()}),[i,E]);var V=function(e){var t=e.target,n=t.id,c=t.value;M((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(Ie.a)({},n,c))}))},J=function(e){var t=w[e];T((function(n){return Object(s.a)(Object(s.a)({},n),{},Object(Ie.a)({},e,!t))}))},U=function(e){var t=E.projectName,n=E.location,c=E.projectType,a=i;console.log(a),b(a.filter((function(e){return e.projectName.toLowerCase().indexOf(t.toLowerCase())>=0&&e.location.toLowerCase().indexOf(n.toLowerCase())>=0&&e.projectType.toLowerCase().indexOf(c.toLowerCase())>=0}))),K(0)},B=function(e){(function(){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"createProject",content:{projectName:"",projectType:"",location:"",contactNumber:"",maCompany:"",equipManu:""}})};return fetch(ie,e).then(se)})().then(function(){var e=Object(g.a)(x.a.mark((function e(n){var c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=n.message.projectID,t.push("/project/"+c);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("There was an error!",e)}))},z=function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:be(t).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Y(),J("delete"),ee.success("Project Deleted");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("There was an error!",e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=a.a.useState(0),_=Object(o.a)(W,2),X=_[0],K=_[1],Q=a.a.useState(10),Z=Object(o.a)(Q,2),$=Z[0],te=Z[1],ne=h.length>0&&!f?$-Math.min($,h.length-X*$):$-1;return Object(l.jsxs)("div",{children:[Object(l.jsxs)(Rt.a,{children:[Object(l.jsx)("meta",{charSet:"utf-8"}),Object(l.jsx)("title",{children:"Projects"})]}),Object(l.jsx)(Pe,{hide:w.delete,success:function(){z(S)},toggleModal:function(){J("delete")},title:"Confirm Deletion",body:"Delete this project?"}),Object(l.jsx)(Pe,{hide:w.add,success:function(){B()},toggleModal:function(){J("add")},title:"Confirm Addition",body:"Add a new project?"}),Object(l.jsxs)("div",{className:"content",children:[Object(l.jsxs)(Ft.a,{children:[Object(l.jsx)(Ft.a.Item,{href:"/home",children:"Home"}),Object(l.jsx)(Ft.a.Item,{active:!0,children:"Projects"})]}),Object(l.jsxs)(Me.a,{className:"d-flex",style:{padding:"10px 0px"},children:[Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsxs)(Se.a,{className:"btn btn-info align-items-center d-flex",type:"button",onClick:Y,children:[Object(l.jsx)(Bt.a,{}),"\xa0 Refresh"]})}),Object(l.jsx)("div",{style:{"flex-grow":"1"}}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsx)(Se.a,{className:"btn btn-success",type:"button",onClick:function(){J("add")},children:"Add +"})})]}),Object(l.jsx)(ke.a,{onSubmit:function(e){e.preventDefault()},children:Object(l.jsxs)(Me.a,{className:"d-flex",children:[Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsx)(ke.a.Control,{id:"projectName",placeholder:"Name",onChange:V,value:G.projectName})}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsx)(ke.a.Control,{id:"location",placeholder:"Location",onChange:V,value:G.location})}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsx)(ke.a.Control,{id:"projectType",placeholder:"Type",onChange:V,value:G.projectType})}),Object(l.jsx)("div",{style:{"flex-grow":"1"}}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsx)(Se.a,{type:"button",onClick:function(){A(G)},children:"Search"})}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsx)(Se.a,{type:"button",variant:"secondary",onClick:function(){M({projectName:"",location:"",projectType:""}),A({projectName:"",location:"",projectType:""})},children:"Cancel"})})]})})]}),Object(l.jsx)("div",{className:"content",children:Object(l.jsx)(gt.a,{component:vt.a,children:Object(l.jsxs)(yt.a,{"aria-label":"simple table",children:[Object(l.jsx)(wt.a,{children:Object(l.jsxs)(Tt.a,{children:[Object(l.jsx)(Nt.a,{children:Object(l.jsx)("b",{children:"Project"})}),Object(l.jsx)(Nt.a,{align:"left",children:Object(l.jsx)("b",{children:"Location"})}),Object(l.jsx)(Nt.a,{align:"left",children:Object(l.jsx)("b",{children:"Type"})}),Object(l.jsx)(Nt.a,{align:"right",children:Object(l.jsx)("b",{children:"Actions"})})]})}),Object(l.jsxs)(Ct.a,{children:[f?Object(l.jsx)(Tt.a,{children:Object(l.jsx)(Nt.a,{align:"center",colSpan:4,children:Object(l.jsx)(Ge.a,{animation:"border",role:"status",children:Object(l.jsx)("span",{className:"sr-only",children:"Loading..."})})})}):h.length>0?($>0?h.slice(X*$,X*$+$):h).map((function(e){return Object(l.jsxs)(Tt.a,{children:[Object(l.jsx)(Nt.a,{component:"th",scope:"row",children:e.projectName}),Object(l.jsx)(Nt.a,{align:"left",children:e.location}),Object(l.jsx)(Nt.a,{align:"left",children:e.projectType}),Object(l.jsxs)(Nt.a,{align:"right",style:{padding:0},children:[Object(l.jsx)(Ue.a,{onClick:function(){return n=e.projectID,void t.push("/project/"+n+"/gate");var n},children:Object(l.jsx)(Yt.a,{"data-value":e.projectID,size:21,color:"royalblue"})}),Object(l.jsx)(Ue.a,{onClick:function(){return n=e.projectID,void t.push("/project/"+n);var n},children:Object(l.jsx)(Vt.a,{"data-value":e.projectID,size:21,color:"royalblue"})}),Object(l.jsx)(Ue.a,{onClick:function(){return t=e.projectID,P(t),void J("delete");var t},children:Object(l.jsx)(Jt.a,{color:"red",size:21})})]})]},e.projectName)})):Object(l.jsx)(Tt.a,{children:Object(l.jsx)(Nt.a,{align:"center",colSpan:4,children:"No Projects Found"})}),ne>0&&Object(l.jsx)(Tt.a,{style:{height:53*ne},children:Object(l.jsx)(Nt.a,{colSpan:6})})]}),Object(l.jsx)(Ht.a,{children:Object(l.jsx)(Tt.a,{children:Object(l.jsx)(qt.a,{rowsPerPageOptions:[5,10,{label:"All",value:-1}],colSpan:4,count:h.length,rowsPerPage:$,page:X,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,t){K(t)},onChangeRowsPerPage:function(e){te(parseInt(e.target.value,10)),K(0)},ActionsComponent:$e})})})]})})})]})}var Wt=n(357),_t=n.n(Wt);n(573);function Xt(){var e=Object(C.i)().projectID,t=Object(c.useState)(!1),n=Object(o.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)({projectName:"",projectType:"",location:"",contactNumber:"",maCompany:"",equipManu:"",checkConditions:[],levDistance:""}),j=Object(o.a)(i,2),u=j[0],d=j[1],h=Object(c.useState)(!1),b=Object(o.a)(h,2),O=b[0],p=(b[1],Object(c.useState)([])),f=Object(o.a)(p,2),m=f[0],v=f[1],y=Object(c.useState)([]),w=Object(o.a)(y,2),T=w[0],N=w[1];Object(c.useEffect)((function(){he(e).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ee.info(String(t.message.levDistance)),d(t.message);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("There was an error Get Project Info!",e)})),me("project").then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(Object.entries(t.message).map((function(e){return{id:e[0],name:e[1].name}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("There was an error Get Project Types!",e)})),function(){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getCheckConditions"})};return fetch(ie,e).then(se)}().then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N(Object.entries(t.message).map((function(e){return{value:e[0],label:e[1].desc}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("There was an error Get Check Conditions!",e)}))}),[O]);var D=function(e){var t=e.target,n=t.id,c=t.value;d((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(Ie.a)({},n,c))}))},S=function(){(function(e,t){var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"modifyProject",content:{projectID:e,modifyParams:t}})};return fetch(ie,n).then(se)})(e,u).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ee.success("Update Successful!");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("There was an error!",e)}))};return Object(l.jsxs)("div",{children:[Object(l.jsxs)(Ft.a,{children:[Object(l.jsx)(Ft.a.Item,{href:"/home",children:"Home"}),Object(l.jsx)(Ft.a.Item,{href:"/project",children:"Projects"}),Object(l.jsx)(Ft.a.Item,{active:!0,children:"Project Info"})]}),Object(l.jsxs)(ke.a,{noValidate:!0,validated:a,onSubmit:function(e){e.preventDefault();var t=e.currentTarget;!1===t.checkValidity()&&(e.preventDefault(),e.stopPropagation()),r(!0),console.log(t.checkValidity()),t.checkValidity()&&S()},children:[Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:3,align:"right",children:"Project ID"}),Object(l.jsx)(Le.a,{sm:4,children:Object(l.jsx)(ke.a.Control,{type:"text",placeholder:e,readOnly:!0})})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:3,align:"right",children:"Project Name"}),Object(l.jsxs)(Le.a,{sm:4,children:[Object(l.jsx)(ke.a.Control,{required:!0,placeholder:"Name",id:"projectName",name:"projectName",value:u.projectName,onChange:D}),Object(l.jsx)(ke.a.Control.Feedback,{type:"invalid",children:"Project Name is a required field."})]})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:3,align:"right",children:"Project Type"}),Object(l.jsxs)(Le.a,{sm:4,children:[Object(l.jsxs)(ke.a.Control,{custom:!0,required:!0,as:"select",id:"projectType",name:"projectType",value:null===u.projectType?"":u.projectType,onChange:D,children:[Object(l.jsx)("option",{value:"",children:"--Select Type--"}),m.map((function(e){return Object(l.jsx)("option",{value:e.id,children:e.name})}))]}),Object(l.jsx)(ke.a.Control.Feedback,{type:"invalid",children:"Project Type is a required field."})]})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:3,align:"right",children:"Location"}),Object(l.jsxs)(Le.a,{sm:4,children:[Object(l.jsx)(ke.a.Control,{required:!0,id:"location",name:"location",value:u.location,onChange:D}),Object(l.jsx)(ke.a.Control.Feedback,{type:"invalid",children:"Location is a required field."})]})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:3,align:"right",children:"Equipment Manufacturer"}),Object(l.jsxs)(Le.a,{sm:4,children:[Object(l.jsx)(ke.a.Control,{required:!0,id:"equipManu",name:"equipManu",value:u.equipManu,onChange:D}),Object(l.jsx)(ke.a.Control.Feedback,{type:"invalid",children:"Equipment Manufacturer is a required field."})]})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:3,align:"right",children:"MA Company"}),Object(l.jsxs)(Le.a,{sm:4,children:[Object(l.jsx)(ke.a.Control,{required:!0,id:"maCompany",name:"maCompany",value:u.maCompany,onChange:D}),Object(l.jsx)(ke.a.Control.Feedback,{type:"invalid",children:"MA Company is a required field."})]})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:3,align:"right",children:"Contact No."}),Object(l.jsx)(ke.a.Label,{column:!0,sm:4,children:Object(l.jsx)(_t.a,{inputProps:{required:!0},placeholder:"+XX-XXXX-XXXX",id:"contactNumber",name:"contactNumber",country:"sg",value:String(u.contactNumber),onChange:function(e){d((function(t){return Object(s.a)(Object(s.a)({},t),{},Object(Ie.a)({},"contactNumber",parseInt(e)))}))},isValid:function(e,t){return 0!==e.length}})})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:3,align:"right",children:"Plate Check Conditions"}),Object(l.jsx)(Le.a,{sm:4,children:Object(l.jsx)(Fe.a,{sticky:!0,searchable:!1,data:T,defaultValue:[],style:{width:"100%"},value:u.checkConditions,onChange:function(e){D({target:{id:"checkConditions",value:e}})}})})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:3,align:"right",children:"Maximum Levenshtein Distance"}),Object(l.jsxs)(Le.a,{sm:4,children:[Object(l.jsx)(ke.a.Control,{required:!0,id:"levDistance",name:"levDistance",type:"number",value:u.levDistance,onChange:D}),Object(l.jsx)(ke.a.Control.Feedback,{type:"invalid",children:"Maximum Levenshtein Distance is a required field."})]})]}),Object(l.jsx)(ke.a.Group,{as:Me.a,children:Object(l.jsx)(Le.a,{sm:8,className:"d-flex justify-content-end",children:Object(l.jsx)(Se.a,{type:"submit",children:"Update"})})})]})]})}var Kt=n(641),Qt=n(252),Zt=n.n(Qt);function $t(e){var t=Object(C.i)().projectID,n=Object(c.useState)(""),a=Object(o.a)(n,2),r=a[0],i=a[1],j=Object(c.useState)({barrierDelay:5,networkWarningDuration:5,instantImgUpload:!1,vehicleColorDetect:!1,localImgStore:!1}),u=Object(o.a)(j,2),d=u[0],h=u[1],b=Object(c.useState)(!1),O=Object(o.a)(b,2),p=O[0];O[1];Object(c.useEffect)((function(){he(t).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(t.message.projectName);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Get Project Info, there was an error!",e)}));h({barrierDelay:5,networkWarningDuration:5,instantImgUpload:!1,vehicleColorDetect:!1,localImgStore:!1})}),[p]);var f=function(e,t,n){var c,a;void 0===n?(c=e.target.id,a=e.target.value):(c=n.id,a=e),"boolean"===typeof d[c]?h((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(Ie.a)({},c,!d[c]))})):h((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(Ie.a)({},c,a))}))},m=function(){};function v(e){return e+" mins"}return Object(l.jsxs)("div",{children:[Object(l.jsxs)(Ft.a,{children:[Object(l.jsx)(Ft.a.Item,{href:"/home",children:"Home"}),Object(l.jsx)(Ft.a.Item,{href:"/project",children:"Projects"}),Object(l.jsx)(Ft.a.Item,{active:!0,children:"Business Details"})]}),Object(l.jsx)(Ft.a,{children:Object(l.jsx)("h5",{style:{color:"#6c757d"},children:r})}),Object(l.jsxs)(ke.a,{onSubmit:function(e){e.preventDefault(),m()},children:[Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,children:"Barrier Opening Delay"}),Object(l.jsx)(Le.a,{sm:4,className:"align-items-center d-flex justify-content-center",children:Object(l.jsx)(Kt.a,{children:Object(l.jsx)(Zt.a,{strict:!0,id:"barrierDelay",format:v,className:"form-control",value:d.barrierDelay,min:0,max:100,onChange:f})})})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,children:"Duration before issuing network down warning"}),Object(l.jsx)(Le.a,{sm:4,className:"align-items-center d-flex justify-content-center",children:Object(l.jsx)(Kt.a,{children:Object(l.jsx)(Zt.a,{strict:!0,id:"networkWarningDuration",format:v,className:"form-control",value:d.networkWarningDuration,min:0,max:100,onChange:f})})})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,children:"Enable Instant Image Upload to Server"}),Object(l.jsx)(Le.a,{sm:4,className:"align-items-center d-flex justify-content-center",children:Object(l.jsx)(ke.a.Check,{checked:d.instantImgUpload,type:"switch",id:"instantImgUpload",onChange:f})})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,children:"Enable Local Storage of images after uploading"}),Object(l.jsx)(Le.a,{sm:4,className:" align-items-center d-flex justify-content-center",children:Object(l.jsx)(ke.a.Check,{checked:d.localImgStore,type:"switch",id:"localImgStore",onChange:f})})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,children:"Enable Vehicle Colour Detection"}),Object(l.jsx)(Le.a,{sm:4,className:" align-items-center d-flex justify-content-center",children:Object(l.jsx)(ke.a.Check,{checked:d.vehicleColorDetect,type:"switch",id:"vehicleColorDetect",onChange:f})})]}),Object(l.jsx)(ke.a.Group,{as:Me.a,children:Object(l.jsx)(Le.a,{sm:8,className:"d-flex justify-content-end",children:Object(l.jsx)(Se.a,{type:"submit",children:"Update"})})})]})]})}var en=n(663),tn=n(359),nn=n.n(tn),cn=n(360),an=n.n(cn);function rn(){var e=Object(C.i)(),t=e.projectID,n=e.gateID,r=(Object(C.g)(),Object(C.h)().pathname,Object(c.useState)([])),i=Object(o.a)(r,2),j=i[0],u=i[1],d=Object(c.useState)(!1),h=Object(o.a)(d,2),b=h[0],O=h[1],p=Object(c.useState)({delete:!1,edit:!1}),f=Object(o.a)(p,2),m=f[0],v=f[1],y=Object(c.useState)(""),w=Object(o.a)(y,2),T=w[0],N=w[1],D=Object(c.useState)(""),S=Object(o.a)(D,2),P=S[0],k=S[1],I=Object(c.useState)(!0),G=Object(o.a)(I,2),M=(G[0],G[1],Object(c.useState)(null)),L=Object(o.a)(M,2),R=L[0],E=L[1],A=Object(c.useState)(!1),F=Object(o.a)(A,2),H=F[0],q=(F[1],Object(c.useState)([])),Y=Object(o.a)(q,2),V=Y[0],J=Y[1],U=Object(c.useState)([]),B=Object(o.a)(U,2),z=B[0],W=B[1],_=function(){O(!0),he(t).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N(t.message.projectName);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Get Project Info, there was an error!",e)})),Oe(n).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(t.message.gateName);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Get Gate Info, there was an error!",e)})),function(e,t){var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getTable",content:{objName:"device",columns:t,filters:{gateID:e}}})};return fetch(ie,n).then(se)}(n,["deviceID","deviceName","deviceType","deviceStatus","deviceIP"]).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(!1),console.log(t.content),u(t.content);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Get Device, there was an error!",e)})),me("device").then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:W(t.message),J(Object.entries(t.message).map((function(e){return{id:e[0],name:e[1].name}})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("There was an error Get Device Types!",e)})),te(0)};Object(c.useEffect)((function(){_()}),[H]);var X=function(e){var t=m[e];v((function(n){return Object(s.a)(Object(s.a)({},n),{},Object(Ie.a)({},e,!t))}))},K=function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fe(t).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_(),X("delete"),ee.success("Device Deleted");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Delete Device, There was an error!",e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=a.a.useState(0),Z=Object(o.a)(Q,2),$=Z[0],te=Z[1],ne=a.a.useState(10),ce=Object(o.a)(ne,2),ae=ce[0],re=ce[1],oe=j.length>0&&!b?ae-Math.min(ae,j.length-$*ae):ae-1;return Object(l.jsxs)("div",{children:[Object(l.jsx)(Pe,{hide:m.delete,success:function(){K(R)},toggleModal:function(){X("delete")},title:"Confirm Deletion",body:"Delete this device?"}),Object(l.jsx)(Re,{deviceTypes:V,hide:m.edit,deviceID:R,gateID:n,success:function(){_(),X("edit")},toggleModal:function(){X("edit")}}),Object(l.jsxs)("div",{className:"content",children:[Object(l.jsxs)(Ft.a,{children:[Object(l.jsx)(Ft.a.Item,{href:"/home",children:"Home"}),Object(l.jsx)(Ft.a.Item,{href:"/project",children:"Projects"}),Object(l.jsx)(Ft.a.Item,{href:"/project/"+t+"/gate",children:"Gates"}),Object(l.jsx)(Ft.a.Item,{active:!0,children:"Devices"})]}),Object(l.jsxs)("div",{className:"d-flex align-items-center",children:[Object(l.jsxs)("h5",{style:{color:"#6c757d"},children:[T," / ",P]}),Object(l.jsx)("div",{style:{"flex-grow":"1"}}),Object(l.jsx)(ke.a,{inline:!0,className:"rightFlex",onSubmit:function(e){e.preventDefault()},children:Object(l.jsxs)(Me.a,{children:[Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsxs)(Se.a,{className:"btn btn-info align-items-center d-flex",type:"button",onClick:_,children:[Object(l.jsx)(Bt.a,{}),"\xa0 Refresh"]})}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsx)(Se.a,{className:"btn btn-success",type:"button",onClick:function(){E(null),X("edit")},children:"+ Add"})})]})})]})]}),Object(l.jsx)("div",{className:"content",children:Object(l.jsx)(gt.a,{component:vt.a,children:Object(l.jsxs)(yt.a,{"aria-label":"simple table",children:[Object(l.jsx)(wt.a,{children:Object(l.jsxs)(Tt.a,{children:[Object(l.jsx)(Nt.a,{align:"left",children:Object(l.jsx)("b",{children:"ID"})}),Object(l.jsx)(Nt.a,{align:"center",children:Object(l.jsx)("b",{children:"Name"})}),Object(l.jsx)(Nt.a,{align:"center",children:Object(l.jsx)("b",{children:"Type"})}),Object(l.jsx)(Nt.a,{align:"center",children:Object(l.jsx)("b",{children:"IP"})}),Object(l.jsx)(Nt.a,{align:"center",children:Object(l.jsx)("b",{children:"Status"})}),Object(l.jsx)(Nt.a,{align:"right",children:Object(l.jsx)("b",{children:"Actions"})})]})}),Object(l.jsxs)(Ct.a,{children:[b?Object(l.jsx)(Tt.a,{children:Object(l.jsx)(Nt.a,{align:"center",colSpan:6,children:Object(l.jsx)(Ge.a,{animation:"border",role:"status",children:Object(l.jsx)("span",{className:"sr-only",children:"Loading..."})})})}):j.length>0?(ae>0?j.slice($*ae,$*ae+ae):j).map((function(e,t){return Object(l.jsxs)(Tt.a,{children:[Object(l.jsx)(Nt.a,{align:"left",children:e.deviceID}),Object(l.jsx)(Nt.a,{align:"center",children:e.deviceName}),Object(l.jsx)(Nt.a,{align:"center",children:null===e.deviceType||void 0===z[e.deviceType]?null:z[e.deviceType].name}),Object(l.jsx)(Nt.a,{align:"center",children:""==e.deviceIP||null==e.deviceIP?"-":e.deviceIP}),Object(l.jsx)(Nt.a,{align:"center",children:"online"===e.deviceStatus?Object(l.jsx)(en.a,{title:"Online",children:Object(l.jsx)(nn.a,{style:{color:"#4caf50"}})}):Object(l.jsx)(en.a,{title:"Offline",children:Object(l.jsx)(an.a,{style:{color:"#f44336"}})})}),Object(l.jsxs)(Nt.a,{align:"right",style:{padding:0},children:[Object(l.jsx)(en.a,{title:"Edit",children:Object(l.jsx)(Ue.a,{onClick:function(){E(e.deviceID),X("edit")},children:Object(l.jsx)(Vt.a,{size:21,color:"royalblue"})})}),Object(l.jsx)(en.a,{title:"Delete",children:Object(l.jsx)(Ue.a,{onClick:function(){E(e.deviceID),X("delete")},children:Object(l.jsx)(Jt.a,{color:"red",size:21})})})]})]},e.gateName)})):Object(l.jsx)(Tt.a,{children:Object(l.jsx)(Nt.a,{align:"center",colSpan:6,children:"No Devices Found"})}),oe>0&&Object(l.jsx)(Tt.a,{style:{height:53*oe},children:Object(l.jsx)(Nt.a,{colSpan:6})})]}),Object(l.jsx)(Ht.a,{children:Object(l.jsx)(Tt.a,{children:Object(l.jsx)(qt.a,{rowsPerPageOptions:[5,10,{label:"All",value:-1}],colSpan:6,count:j.length,rowsPerPage:ae,page:$,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,t){te(t)},onChangeRowsPerPage:function(e){re(parseInt(e.target.value,10)),te(0)},ActionsComponent:$e})})})]})})})]})}var sn=n(642),on=n(643);function ln(){var e=Object(C.i)().projectID,t=Object(C.g)(),n=Object(C.h)().pathname,r=Object(c.useState)([]),i=Object(o.a)(r,2),j=i[0],u=i[1],d=Object(c.useState)(!1),h=Object(o.a)(d,2),b=h[0],O=h[1],p=Object(c.useState)([]),f=Object(o.a)(p,2),m=f[0],v=f[1],y=Object(c.useState)([]),w=Object(o.a)(y,2),T=w[0],N=w[1],D=Object(c.useState)(""),S=Object(o.a)(D,2),P=S[0],k=S[1],I=Object(c.useState)({delete:!1,edit:!1}),G=Object(o.a)(I,2),M=G[0],L=G[1],R=Object(c.useState)(!0),E=Object(o.a)(R,2),A=E[0],F=E[1],H=Object(c.useState)(""),q=Object(o.a)(H,2),Y=q[0],V=q[1],J=Object(c.useState)(!1),U=Object(o.a)(J,2),B=U[0],z=(U[1],function(){O(!0),he(e).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(t.message.projectName);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Get Project Info, there was an error!",e)})),de(e,["gateID","gateName","gateType"]).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(!1),console.log(t.content),u(t.content);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Get Gate, there was an error!",e)})),me("gate").then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N(t.message),v(Object.entries(t.message).map((function(e){return{id:e[0],name:e[1].name}})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("There was an error Get Gate Types!",e)})),$(0)});Object(c.useEffect)((function(){z()}),[B]);var W=function(e,t){(function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"openGate",content:{gateID:e}})};return fetch(ie,t).then(se)})(e).then(function(){var e=Object(g.a)(x.a.mark((function e(n){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ee.success("Opened Gate "+t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("There was an error Open Gate!",e)}))},_=function(e){var t=M[e];L((function(n){return Object(s.a)(Object(s.a)({},n),{},Object(Ie.a)({},e,!t))}))},X=function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:pe(t).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:z(),_("delete"),ee.success("Gate Deleted");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Delete Gate, There was an error!",e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=a.a.useState(0),Q=Object(o.a)(K,2),Z=Q[0],$=Q[1],te=a.a.useState(10),ne=Object(o.a)(te,2),ce=ne[0],ae=ne[1],re=j.length>0&&!b?ce-Math.min(ce,j.length-Z*ce):ce-1;return Object(l.jsxs)("div",{children:[Object(l.jsx)(Pe,{hide:M.delete,success:function(){X(Y)},toggleModal:function(){_("delete")},title:"Confirm Deletion",body:"Delete this gate?"}),Object(l.jsx)(He,{gateTypes:m,hide:M.edit,gateID:Y,newState:A,projectID:e,success:function(){z(),_("edit")},toggleModal:function(){_("edit")}}),Object(l.jsxs)("div",{className:"content",children:[Object(l.jsxs)(Ft.a,{children:[Object(l.jsx)(Ft.a.Item,{href:"/home",children:"Home"}),Object(l.jsx)(Ft.a.Item,{href:"/project",children:"Projects"}),Object(l.jsx)(Ft.a.Item,{active:!0,children:"Gates"})]}),Object(l.jsxs)("div",{className:"d-flex align-items-center",children:[Object(l.jsx)("h5",{style:{color:"#6c757d"},children:P}),Object(l.jsx)("div",{style:{"flex-grow":"1"}}),Object(l.jsx)(ke.a,{inline:!0,onSubmit:function(e){e.preventDefault()},children:Object(l.jsxs)(Me.a,{children:[Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsxs)(Se.a,{className:"btn btn-info align-items-center d-flex",type:"button",onClick:z,children:[Object(l.jsx)(Bt.a,{}),"\xa0 Refresh"]})}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsx)(Se.a,{className:"btn btn-success",type:"button",onClick:function(){F(!0),_("edit")},children:"+ Add"})})]})})]})]}),Object(l.jsx)("div",{className:"content",children:Object(l.jsx)(gt.a,{component:vt.a,children:Object(l.jsxs)(yt.a,{"aria-label":"simple table",children:[Object(l.jsx)(wt.a,{children:Object(l.jsxs)(Tt.a,{children:[Object(l.jsx)(Nt.a,{align:"left",children:Object(l.jsx)("b",{children:"ID"})}),Object(l.jsx)(Nt.a,{align:"center",children:Object(l.jsx)("b",{children:"Name"})}),Object(l.jsx)(Nt.a,{align:"center",children:Object(l.jsx)("b",{children:"Type"})}),Object(l.jsx)(Nt.a,{align:"right",children:Object(l.jsx)("b",{children:"Actions"})})]})}),Object(l.jsxs)(Ct.a,{children:[b?Object(l.jsx)(Tt.a,{children:Object(l.jsx)(Nt.a,{align:"center",colSpan:4,children:Object(l.jsx)(Ge.a,{animation:"border",role:"status",children:Object(l.jsx)("span",{className:"sr-only",children:"Loading..."})})})}):j.length>0?(ce>0?j.slice(Z*ce,Z*ce+ce):j).map((function(e,c){return Object(l.jsxs)(Tt.a,{children:[Object(l.jsx)(Nt.a,{align:"left",children:e.gateID}),Object(l.jsx)(Nt.a,{align:"center",children:e.gateName}),Object(l.jsx)(Nt.a,{align:"center",children:null===e.gateType||void 0===T[e.gateType]?null:T[e.gateType].name}),Object(l.jsxs)(Nt.a,{align:"right",style:{padding:0},children:[Object(l.jsx)(en.a,{title:"Devices",children:Object(l.jsx)(Ue.a,{style:{padding:"5px 10px"},onClick:function(){var c;c=e.gateID,t.push(n+"/"+String(c))},children:Object(l.jsx)(sn.a,{size:21,color:"royalblue"})})}),Object(l.jsx)(en.a,{title:"Edit",children:Object(l.jsx)(Ue.a,{style:{padding:"5px 10px"},onClick:function(){V(e.gateID),F(!1),_("edit")},children:Object(l.jsx)(Vt.a,{size:21,color:"royalblue"})})}),Object(l.jsx)(en.a,{title:"Open Gate",children:Object(l.jsx)(Ue.a,{style:{padding:"5px 10px"},onClick:function(){W(e.gateID,e.gateName)},children:Object(l.jsx)(on.a,{size:21,color:"green"})})}),Object(l.jsx)(en.a,{title:"Delete",children:Object(l.jsx)(Ue.a,{style:{padding:"5px 10px"},onClick:function(){V(e.gateID),_("delete")},children:Object(l.jsx)(Jt.a,{color:"red",size:21})})})]})]},e.gateName)})):Object(l.jsx)(Tt.a,{children:Object(l.jsx)(Nt.a,{align:"center",colSpan:6,children:"No Gates Found"})}),re>0&&Object(l.jsx)(Tt.a,{style:{height:53*re},children:Object(l.jsx)(Nt.a,{colSpan:6})})]}),Object(l.jsx)(Ht.a,{children:Object(l.jsx)(Tt.a,{children:Object(l.jsx)(qt.a,{rowsPerPageOptions:[5,10,{label:"All",value:-1}],colSpan:4,count:j.length,rowsPerPage:ce,page:Z,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,t){$(t)},onChangeRowsPerPage:function(e){ae(parseInt(e.target.value,10)),$(0)},ActionsComponent:$e})})})]})})})]})}var jn=n(639),un=n(361),dn=n.n(un),hn=n(362),bn=n.n(hn);function On(e){var t=Object(C.i)().projectID,n=Object(c.useState)([]),r=Object(o.a)(n,2),i=r[0],j=r[1],u=Object(c.useState)(null),d=Object(o.a)(u,2),h=d[0],b=d[1],O=Object(c.useState)(""),p=Object(o.a)(O,2),f=p[0],m=p[1],v=Object(c.useState)({trigger:"",voiceMsg:"",textMsg:""}),y=Object(o.a)(v,2),w=y[0],T=y[1],N=Object(c.useState)(!1),D=Object(o.a)(N,2),S=D[0];D[1];Object(c.useEffect)((function(){he(t).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(t.message.projectName);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Get Project Info, there was an error!",e)}));j([{id:1,trigger:"Trigger 1",voiceMsg:"Sample 1",textMsg:"Sample 01"},{id:2,trigger:"Trigger 2",voiceMsg:"Sample 2",textMsg:"Sample 02"},{id:3,trigger:"Trigger 3",voiceMsg:"Sample 3",textMsg:"Sample 03"},{id:4,trigger:"Trigger 4",voiceMsg:"Sample 4",textMsg:"Sample 04"},{id:5,trigger:"Trigger 5",voiceMsg:"Sample 5",textMsg:"Sample 05"},{id:6,trigger:"Trigger 6",voiceMsg:"Sample 6",textMsg:"Sample 06"}])}),[S]);var P=function(e){var t=e.target,n=t.id,c=t.value;T((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(Ie.a)({},n,c))}))},k=a.a.useState(0),I=Object(o.a)(k,2),G=I[0],M=I[1],L=a.a.useState(5),R=Object(o.a)(L,2),E=R[0],A=R[1],F=E-Math.min(E,i.length-G*E);return Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{className:"content",children:[Object(l.jsxs)(Ft.a,{children:[Object(l.jsx)(Ft.a.Item,{href:"/home",children:"Home"}),Object(l.jsx)(Ft.a.Item,{href:"/project",children:"Projects"}),Object(l.jsx)(Ft.a.Item,{active:!0,children:"LED Configuration"})]}),Object(l.jsx)(Ft.a,{children:Object(l.jsx)("h5",{style:{color:"#6c757d"},children:f})})]}),Object(l.jsx)("div",{className:"content",children:Object(l.jsx)(gt.a,{component:vt.a,children:Object(l.jsxs)(yt.a,{"aria-label":"simple table",children:[Object(l.jsx)(wt.a,{children:Object(l.jsxs)(Tt.a,{children:[Object(l.jsx)(Nt.a,{align:"center",children:"Trigger"}),Object(l.jsx)(Nt.a,{align:"center",children:"Voice Message"}),Object(l.jsx)(Nt.a,{align:"center",children:"Text Message"}),Object(l.jsx)(Nt.a,{align:"right",children:"Actions"})]})}),Object(l.jsxs)(Ct.a,{children:[(E>0?i.slice(G*E,G*E+E):i).map((function(e){return Object(l.jsxs)(Tt.a,{children:[Object(l.jsx)(Nt.a,{component:"th",scope:"row",align:"center",children:e.trigger}),Object(l.jsx)(Nt.a,{align:"center",children:h===e.id?Object(l.jsx)(jn.a,{id:"voiceMsg",label:"Standard",value:w.voiceMsg,onChange:P}):e.voiceMsg}),Object(l.jsx)(Nt.a,{align:"center",children:h===e.id?Object(l.jsx)(jn.a,{id:"textMsg",label:"Standard",value:w.textMsg,onChange:P}):e.textMsg}),Object(l.jsx)(Nt.a,{align:"right",style:{padding:0},children:null===h?Object(l.jsx)(Ue.a,{onClick:function(){return function(e){var t=e.id,n=e.trigger,c=e.voiceMsg,a=e.textMsg;T({trigger:n,voiceMsg:c,textMsg:a}),b(t)}(e)},children:Object(l.jsx)(Vt.a,{size:21,color:"royalblue"})}):h===e.id?Object(l.jsxs)("div",{children:[Object(l.jsx)(Ue.a,{onClick:function(){},children:Object(l.jsx)(dn.a,{size:21,color:"primary"})}),Object(l.jsx)(Ue.a,{onClick:function(){return b(null)},children:Object(l.jsx)(bn.a,{size:21,color:"error"})})]}):Object(l.jsx)(Ue.a,{disabled:!0,children:Object(l.jsx)(Vt.a,{size:21})})})]},e.id)})),F>0&&Object(l.jsx)(Tt.a,{style:{height:53*F},children:Object(l.jsx)(Nt.a,{colSpan:6})})]}),Object(l.jsx)(Ht.a,{children:Object(l.jsx)(Tt.a,{children:Object(l.jsx)(qt.a,{rowsPerPageOptions:[5,10,{label:"All",value:-1}],colSpan:4,count:i.length,rowsPerPage:E,page:G,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,t){b(null),M(t)},onChangeRowsPerPage:function(e){A(parseInt(e.target.value,10)),M(0)},ActionsComponent:$e})})})]})})})]})}var pn=n(657);function fn(e){var t=Object(C.g)(),n=Object(C.j)(),c=n.path,a=n.url,r=Object(C.h)().pathname.split("/")[3],i=function(e){t.push(a+e)};return Object(l.jsxs)("div",{className:"tabModal",style:{background:"transparent"},children:[Object(l.jsxs)(Rt.a,{children:[Object(l.jsx)("meta",{charSet:"utf-8"}),Object(l.jsx)("title",{children:"Projects"})]}),Object(l.jsx)(pn.a.Container,{id:"left-tabs-example",children:Object(l.jsxs)(Me.a,{children:[Object(l.jsx)(Le.a,{xs:"auto",children:Object(l.jsxs)(T.a,{variant:"pills",className:"flex-column",children:[Object(l.jsx)(T.a.Item,{children:Object(l.jsx)(T.a.Link,{onClick:function(){i("/info")},active:"info"===r,children:"Infomation"})}),Object(l.jsx)(T.a.Item,{children:Object(l.jsx)(T.a.Link,{onClick:function(){i("/business")},active:"business"===r,children:"Business"})}),Object(l.jsx)(T.a.Item,{children:Object(l.jsx)(T.a.Link,{onClick:function(){i("/gate")},active:"gate"===r,children:"Gates"})}),Object(l.jsx)(T.a.Item,{children:Object(l.jsx)(T.a.Link,{onClick:function(){i("/ledconfig")},active:"ledconfig"===r,children:"LED Config"})})]})}),Object(l.jsx)(Le.a,{sm:9,children:Object(l.jsxs)(C.d,{children:[Object(l.jsx)(C.b,{exact:!0,path:"".concat(c,"/info"),children:Object(l.jsx)(Xt,{})}),Object(l.jsx)(C.b,{exact:!0,path:"".concat(c,"/business"),children:Object(l.jsx)($t,{})}),Object(l.jsx)(C.b,{exact:!0,path:"".concat(c,"/gate/:gateID"),children:Object(l.jsx)(rn,{})}),Object(l.jsx)(C.b,{exact:!0,path:"".concat(c,"/gate"),children:Object(l.jsx)(ln,{})}),Object(l.jsx)(C.b,{exact:!0,path:"".concat(c,"/ledconfig"),children:Object(l.jsx)(On,{})}),Object(l.jsx)(C.b,{path:c,children:Object(l.jsx)(C.a,{to:"".concat(a,"/info")})})]})})]})})]})}function mn(e){e.match;var t=Object(c.useState)([]),n=Object(o.a)(t,2),r=n[0],i=n[1],j=Object(c.useState)(!1),u=Object(o.a)(j,2),d=u[0],h=u[1],b=Object(c.useState)(""),O=Object(o.a)(b,2),p=O[0],f=O[1],m=Object(c.useState)([]),v=Object(o.a)(m,2),y=v[0],w=v[1],T=Object(c.useState)({delete:!1,add:!1,edit:!1}),N=Object(o.a)(T,2),C=N[0],D=N[1],S=Object(c.useState)({projectID:NaN,actualPlate:""}),P=Object(o.a)(S,2),k=P[0],I=P[1],G=Object(c.useState)({projectID:NaN,actualPlate:""}),M=Object(o.a)(G,2),L=M[0],R=M[1],E=Object(c.useState)({projectID:NaN,matchPlate:"",actualPlate:""}),A=Object(o.a)(E,2),F=A[0],H=A[1],q=Object(c.useState)(!1),Y=Object(o.a)(q,2),V=Y[0],J=(Y[1],Object(c.useState)([])),U=Object(o.a)(J,2),B=U[0],z=U[1],W=Object(c.useState)({}),_=Object(o.a)(W,2),X=_[0],K=_[1],Q=Object(c.useState)(!1),Z=Object(o.a)(Q,2),$=Z[0],ee=Z[1],te=function(){ee(!0),function(e,t){var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getTable",content:{objName:"specialPlate",columns:e,filters:t}})};return fetch(ie,n).then(se)}(["projectID","matchPlate","actualPlate"]).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ee(!1),console.log(t.content),i(t.content);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("There was an error!",e)})),be(0)},ne=function(){var e=Object(g.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},t.forEach(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n[t.projectID]=t.projectName;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,n;case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){oe(["projectID","projectName"]).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:z(t.content),ne(t.content).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=K,e.next=3,t;case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("There was an error!",e)}))}),[V]),Object(c.useEffect)((function(){te()}),X),Object(c.useEffect)((function(){le()}),[r,L]);var ce=function(e){var t=e.target,n=t.id,c=t.value;"projectID"===n&&(c=parseInt(c)),I((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(Ie.a)({},n,c))}))},ae=function(e){var t=e.target,n=t.id,c=t.value;"projectID"===n&&(c=parseInt(c)),H((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(Ie.a)({},n,c))}))},re=function(e){var t=C[e];D((function(n){return Object(s.a)(Object(s.a)({},n),{},Object(Ie.a)({},e,!t))}))},le=function(e){var t=L.projectID,n=L.actualPlate;w(r.filter((function(e){return(Number.isNaN(t)||e.projectID===t)&&String(e.actualPlate).toLowerCase().indexOf(n.toLowerCase())>=0}))),be(0)},je=function(e){(function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"deleteSpecialPlate",content:{matchPlate:e}})};return fetch(ie,t).then(se)})(e).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:te(),re("delete");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("There was an error!",e)}))},ue=a.a.useState(0),de=Object(o.a)(ue,2),he=de[0],be=de[1],Oe=a.a.useState(10),pe=Object(o.a)(Oe,2),fe=pe[0],me=pe[1],xe=fe-Math.min(fe,y.length-he*fe);return Object(l.jsxs)("div",{children:[Object(l.jsxs)(Rt.a,{children:[Object(l.jsx)("meta",{charSet:"utf-8"}),Object(l.jsx)("title",{children:"Special Plates"})]}),Object(l.jsx)(Pe,{hide:C.delete,success:function(){je(p)},toggleModal:function(){re("delete")},title:"Confirm Deletion",body:"Delete this special plate?"}),Object(l.jsxs)(De.a,{show:C.add,onHide:function(){return re("add")},centered:!0,children:[Object(l.jsx)(De.a.Header,{closeButton:!0,children:Object(l.jsx)(De.a.Title,{children:"Add Special Plate"})}),Object(l.jsx)(De.a.Body,{children:Object(l.jsxs)(ke.a,{noValidate:!0,validated:d,onSubmit:function(e){e.preventDefault();var t=e.currentTarget;!1===t.checkValidity()&&(e.preventDefault(),e.stopPropagation()),h(!0),console.log(t.checkValidity()),t.checkValidity()&&function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"createSpecialPlate",content:e})};return fetch(ie,t).then(se)}(F).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:te(),re("add");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("There was an error!",e)}))},children:[Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Project Name"}),Object(l.jsxs)(Le.a,{sm:6,children:[Object(l.jsxs)(ke.a.Control,{custom:!0,required:!0,as:"select",id:"projectID",placeholder:"Name",onChange:ae,value:F.projectID,children:[Object(l.jsx)("option",{value:null,children:"--Select a Project--"}),B.map((function(e){return Object(l.jsx)("option",{value:e.projectID,children:e.projectName})}))]}),Object(l.jsx)(ke.a.Control.Feedback,{type:"invalid",children:"Project Name is a required field."})]})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Plate Pattern"}),Object(l.jsxs)(Le.a,{sm:6,children:[Object(l.jsx)(ke.a.Control,{required:!0,placeholder:"Pattern",id:"matchPlate",name:"matchPlate",value:F.matchPlate,onChange:ae}),Object(l.jsx)(ke.a.Control.Feedback,{type:"invalid",children:"Plate Pattern is a required field."}),Object(l.jsx)(ke.a.Text,{muted:!0,children:"'%' matches a single character"}),Object(l.jsx)(ke.a.Text,{muted:!0,children:"'@' matches multiple characters"})]})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Corrected Plate"}),Object(l.jsxs)(Le.a,{sm:6,children:[Object(l.jsx)(ke.a.Control,{required:!0,placeholder:"Plate Number",id:"actualPlate",name:"actualPlate",value:F.actualPlate,onChange:ae}),Object(l.jsx)(ke.a.Control.Feedback,{type:"invalid",children:"Corrected Plate is a required field."}),Object(l.jsx)(ke.a.Text,{muted:!0,children:"The plate number to correct to"})]})]}),Object(l.jsxs)(De.a.Footer,{children:[Object(l.jsx)(Se.a,{variant:"secondary",onClick:function(){return re("add")},children:"Cancel"}),Object(l.jsx)(Se.a,{variant:"primary",type:"submit",children:"Confirm"})]})]})})]}),Object(l.jsxs)(De.a,{show:C.edit,onHide:function(){return re("edit")},centered:!0,children:[Object(l.jsx)(De.a.Header,{closeButton:!0,children:Object(l.jsx)(De.a.Title,{children:"Edit Special Plate"})}),Object(l.jsx)(De.a.Body,{children:Object(l.jsxs)(ke.a,{noValidate:!0,validated:d,onSubmit:function(e){e.preventDefault();var t=e.currentTarget;!1===t.checkValidity()&&(e.preventDefault(),e.stopPropagation()),h(!0),console.log(t.checkValidity()),t.checkValidity()&&function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"modifySpecialPlate",content:{matchPlate:e.matchPlate,modifyParams:e}})};return fetch(ie,t).then(se)}(F).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:te(),re("edit");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("There was an error!",e)}))},children:[Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Plate Pattern"}),Object(l.jsxs)(Le.a,{sm:6,children:[Object(l.jsx)(ke.a.Control,{disabled:!0,required:!0,placeholder:"Pattern",id:"matchPlate",name:"matchPlate",value:F.matchPlate,onChange:ae}),Object(l.jsx)(ke.a.Control.Feedback,{type:"invalid",children:"Plate Pattern is a required field."}),Object(l.jsx)(ke.a.Text,{muted:!0,children:"'%' matches a single character"}),Object(l.jsx)(ke.a.Text,{muted:!0,children:"'@' matches multiple characters"})]})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Corrected Plate"}),Object(l.jsxs)(Le.a,{sm:6,children:[Object(l.jsx)(ke.a.Control,{required:!0,placeholder:"Plate Number",id:"actualPlate",name:"actualPlate",value:F.actualPlate,onChange:ae}),Object(l.jsx)(ke.a.Control.Feedback,{type:"invalid",children:"Corrected Plate is a required field."}),Object(l.jsx)(ke.a.Text,{muted:!0,children:"The plate number to correct to"})]})]}),Object(l.jsxs)(De.a.Footer,{children:[Object(l.jsx)(Se.a,{variant:"secondary",onClick:function(){return re("edit")},children:"Cancel"}),Object(l.jsx)(Se.a,{variant:"primary",type:"submit",children:"Confirm"})]})]})})]}),Object(l.jsxs)("div",{className:"content",children:[Object(l.jsxs)(Ft.a,{children:[Object(l.jsx)(Ft.a.Item,{href:"/home",children:"Home"}),Object(l.jsx)(Ft.a.Item,{active:!0,children:"Special Plate Correction"})]}),Object(l.jsx)(ke.a,{onSubmit:function(e){e.preventDefault()},children:Object(l.jsxs)(Me.a,{className:"d-flex",children:[Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsxs)(Se.a,{className:"btn btn-info align-items-center d-flex",type:"button",onClick:te,children:[Object(l.jsx)(Bt.a,{}),"\xa0 Refresh"]})}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsx)(Se.a,{className:"btn btn-success",type:"button",onClick:function(){H({projectID:"",matchPlate:"",actualPlate:""}),h(!1),re("add")},children:"Add +"})}),Object(l.jsx)("div",{style:{"flex-grow":"1"}}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsxs)(ke.a.Control,{custom:!0,as:"select",id:"projectID",placeholder:"Name",onChange:ce,value:k.projectID,children:[Object(l.jsx)("option",{value:null,children:"All Projects"}),B.map((function(e){return Object(l.jsx)("option",{value:e.projectID,children:e.projectName})}))]})}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsx)(ke.a.Control,{id:"actualPlate",placeholder:"Corrected Plate",onChange:ce,value:k.actualPlate})}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsx)(Se.a,{type:"button",onClick:function(){R(k)},children:"Search"})}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsx)(Se.a,{type:"button",variant:"secondary",onClick:function(){I({projectID:NaN,actualPlate:""}),R({projectID:NaN,actualPlate:""})},children:"Cancel"})})]})})]}),Object(l.jsx)("div",{className:"content",children:Object(l.jsx)(gt.a,{component:vt.a,children:Object(l.jsxs)(yt.a,{"aria-label":"simple table",children:[Object(l.jsx)(wt.a,{children:Object(l.jsxs)(Tt.a,{children:[Object(l.jsx)(Nt.a,{align:"left",children:Object(l.jsx)("b",{children:"Project"})}),Object(l.jsx)(Nt.a,{align:"center",children:Object(l.jsx)("b",{children:"Plate Pattern"})}),Object(l.jsx)(Nt.a,{align:"center",children:Object(l.jsx)("b",{children:"Corrected Plate"})}),Object(l.jsx)(Nt.a,{align:"right",children:Object(l.jsx)("b",{children:"Actions"})})]})}),Object(l.jsxs)(Ct.a,{children:[$?Object(l.jsx)(Tt.a,{children:Object(l.jsx)(Nt.a,{align:"center",colSpan:6,children:Object(l.jsx)(Ge.a,{animation:"border",role:"status",children:Object(l.jsx)("span",{className:"sr-only",children:"Loading..."})})})}):y.length>0?(fe>0?y.slice(he*fe,he*fe+fe):y).map((function(e){return Object(l.jsxs)(Tt.a,{children:[Object(l.jsx)(Nt.a,{component:"th",scope:"row",align:"left",children:X[e.projectID]}),Object(l.jsx)(Nt.a,{align:"center",children:Object(l.jsx)("div",{className:"outerPlate",children:Object(l.jsx)("div",{className:"innerPlate",children:Object(l.jsx)("u",{children:e.matchPlate})})})}),Object(l.jsx)(Nt.a,{align:"center",children:Object(l.jsx)("div",{className:"outerPlate",children:Object(l.jsx)("div",{className:"innerPlate",children:Object(l.jsx)("u",{children:e.actualPlate})})})}),Object(l.jsxs)(Nt.a,{align:"right",style:{padding:0},children:[Object(l.jsx)(Ue.a,{onClick:function(){!function(e){var t=e.projectID,n=e.matchPlate,c=e.actualPlate;h(!1),H({projectID:t,matchPlate:n,actualPlate:c}),re("edit")}(e)},children:Object(l.jsx)(Vt.a,{size:21,color:"royalblue"})}),Object(l.jsx)(Ue.a,{onClick:function(){f(e.matchPlate),re("delete")},children:Object(l.jsx)(Jt.a,{color:"red",size:21})})]})]},e.matchPlate)})):Object(l.jsx)(Tt.a,{children:Object(l.jsx)(Nt.a,{align:"center",colSpan:4,children:"No Special Plates Found"})}),xe>0&&Object(l.jsx)(Tt.a,{style:{height:53*xe},children:Object(l.jsx)(Nt.a,{colSpan:6})})]}),Object(l.jsx)(Ht.a,{children:Object(l.jsx)(Tt.a,{children:Object(l.jsx)(qt.a,{rowsPerPageOptions:[5,10,{label:"All",value:-1}],colSpan:4,count:y.length,rowsPerPage:fe,page:he,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,t){be(t)},onChangeRowsPerPage:function(e){me(parseInt(e.target.value,10)),be(0)},ActionsComponent:$e})})})]})})})]})}function xn(e){e.match;var t=Object(c.useState)([]),n=Object(o.a)(t,2),r=n[0],i=n[1],j=Object(c.useState)(!1),u=Object(o.a)(j,2),d=u[0],h=u[1],b=Object(c.useState)(""),O=Object(o.a)(b,2),p=O[0],f=O[1],m=Object(c.useState)([]),v=Object(o.a)(m,2),y=v[0],w=v[1],T=Object(c.useState)({delete:!1,add:!1,edit:!1}),N=Object(o.a)(T,2),C=N[0],D=N[1],S=Object(c.useState)({matchType:"",matchName:""}),P=Object(o.a)(S,2),k=P[0],I=P[1],G=Object(c.useState)({matchType:"",matchName:""}),M=Object(o.a)(G,2),L=M[0],R=M[1],E=Object(c.useState)({matchName:"",matchPlate:"",matchType:""}),A=Object(o.a)(E,2),F=A[0],H=A[1],q=Object(c.useState)(!1),Y=Object(o.a)(q,2),V=Y[0],J=(Y[1],Object(c.useState)([])),U=Object(o.a)(J,2),B=U[0],z=U[1],W=Object(c.useState)(!1),_=Object(o.a)(W,2),X=_[0],K=_[1],Q=function(){K(!0),function(e,t){var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"getTable",content:{objName:"regexPlate",columns:e,filters:t}})};return fetch(ie,n).then(se)}(["matchPlate","matchName","matchType"]).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:K(!1),console.log(t.content),i(t.content);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("There was an error!",e)})),oe(0)};Object(c.useEffect)((function(){me("regexPlate").then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:z(t.message);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("There was an error!",e)}))}),[V]),Object(c.useEffect)((function(){Q()}),[B]),Object(c.useEffect)((function(){te()}),[r,L]);var Z=function(e){var t=e.target,n=t.id,c=t.value;I((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(Ie.a)({},n,c))}))},$=function(e){var t=e.target,n=t.id,c=t.value;H((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(Ie.a)({},n,c))}))},ee=function(e){var t=C[e];D((function(n){return Object(s.a)(Object(s.a)({},n),{},Object(Ie.a)({},e,!t))}))},te=function(e){var t=L.matchType,n=L.matchName;w(r.filter((function(e){return(!t||e.matchType===t)&&String(e.matchName).toLowerCase().includes(n.toLowerCase())}))),oe(0)},ne=function(e){(function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"deleteRegexPlate",content:{matchPlate:e}})};return fetch(ie,t).then(se)})(e).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Q(),ee("delete");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("There was an error!",e)}))},ce=a.a.useState(0),ae=Object(o.a)(ce,2),re=ae[0],oe=ae[1],le=a.a.useState(10),je=Object(o.a)(le,2),ue=je[0],de=je[1],he=ue-Math.min(ue,y.length-re*ue);return Object(l.jsxs)("div",{children:[Object(l.jsxs)(Rt.a,{children:[Object(l.jsx)("meta",{charSet:"utf-8"}),Object(l.jsx)("title",{children:"Standard Plates"})]}),Object(l.jsx)(Pe,{hide:C.delete,success:function(){ne(p)},toggleModal:function(){ee("delete")},title:"Confirm Deletion",body:"Delete this special plate?"}),Object(l.jsxs)(De.a,{show:C.add,onHide:function(){return ee("add")},centered:!0,children:[Object(l.jsx)(De.a.Header,{closeButton:!0,children:Object(l.jsx)(De.a.Title,{children:"Add Standard Plate"})}),Object(l.jsx)(De.a.Body,{children:Object(l.jsxs)(ke.a,{noValidate:!0,validated:d,onSubmit:function(e){e.preventDefault();var t=e.currentTarget;!1===t.checkValidity()&&(e.preventDefault(),e.stopPropagation()),h(!0),console.log(t.checkValidity()),t.checkValidity()&&function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"createRegexPlate",content:e})};return fetch(ie,t).then(se)}(F).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Q(),ee("add");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("There was an error!",e)}))},children:[Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Pattern Name"}),Object(l.jsxs)(Le.a,{sm:6,children:[Object(l.jsx)(ke.a.Control,{required:!0,placeholder:"Name",id:"matchName",name:"matchName",value:F.matchName,onChange:$}),Object(l.jsx)(ke.a.Control.Feedback,{type:"invalid",children:"Pattern Name is a required field."})]})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Plate Pattern"}),Object(l.jsxs)(Le.a,{sm:6,children:[Object(l.jsx)(ke.a.Control,{required:!0,placeholder:"Pattern",id:"matchPlate",name:"matchPlate",value:F.matchPlate,onChange:$}),Object(l.jsx)(ke.a.Control.Feedback,{type:"invalid",children:"Plate Pattern is a required field."}),Object(l.jsx)(ke.a.Text,{muted:!0,children:"'%' matches a single character"}),Object(l.jsx)(ke.a.Text,{muted:!0,children:"'@' matches multiple characters"})]})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Plate Type"}),Object(l.jsxs)(Le.a,{sm:6,children:[Object(l.jsxs)(ke.a.Control,{custom:!0,required:!0,as:"select",id:"matchType",placeholder:"Type",onChange:$,value:F.matchType,children:[Object(l.jsx)("option",{value:"",children:"--Select a Plate Type--"}),Object.entries(B).map((function(e){var t=Object(o.a)(e,2),n=t[0],c=t[1];return Object(l.jsx)("option",{value:n,children:c.name})}))]}),Object(l.jsx)(ke.a.Control.Feedback,{type:"invalid",children:"Plate Type is a required field."})]})]}),Object(l.jsxs)(De.a.Footer,{children:[Object(l.jsx)(Se.a,{variant:"secondary",onClick:function(){return ee("add")},children:"Cancel"}),Object(l.jsx)(Se.a,{variant:"primary",type:"submit",children:"Confirm"})]})]})})]}),Object(l.jsxs)(De.a,{show:C.edit,onHide:function(){return ee("edit")},centered:!0,children:[Object(l.jsx)(De.a.Header,{closeButton:!0,children:Object(l.jsx)(De.a.Title,{children:"Edit Special Plate"})}),Object(l.jsx)(De.a.Body,{children:Object(l.jsxs)(ke.a,{noValidate:!0,validated:d,onSubmit:function(e){e.preventDefault();var t=e.currentTarget;!1===t.checkValidity()&&(e.preventDefault(),e.stopPropagation()),h(!0),console.log(t.checkValidity()),t.checkValidity()&&function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authID:"",serviceName:"modifyRegexPlate",content:{matchPlate:e.matchPlate,modifyParams:e}})};return fetch(ie,t).then(se)}(F).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Q(),ee("edit");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("There was an error!",e)}))},children:[Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Pattern Name"}),Object(l.jsxs)(Le.a,{sm:6,children:[Object(l.jsx)(ke.a.Control,{required:!0,placeholder:"Name",id:"matchName",name:"matchName",value:F.matchName,onChange:$}),Object(l.jsx)(ke.a.Control.Feedback,{type:"invalid",children:"Pattern Name is a required field."})]})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Plate Pattern"}),Object(l.jsxs)(Le.a,{sm:6,children:[Object(l.jsx)(ke.a.Control,{disabled:!0,required:!0,placeholder:"Pattern",id:"matchPlate",name:"matchPlate",value:F.matchPlate,onChange:$}),Object(l.jsx)(ke.a.Control.Feedback,{type:"invalid",children:"Plate Pattern is a required field."}),Object(l.jsx)(ke.a.Text,{muted:!0,children:"'%' matches a single character"}),Object(l.jsx)(ke.a.Text,{muted:!0,children:"'@' matches multiple characters"})]})]}),Object(l.jsxs)(ke.a.Group,{as:Me.a,children:[Object(l.jsx)(ke.a.Label,{column:!0,sm:4,align:"right",children:"Plate Type"}),Object(l.jsxs)(Le.a,{sm:6,children:[Object(l.jsxs)(ke.a.Control,{custom:!0,required:!0,as:"select",id:"matchType",placeholder:"Type",onChange:$,value:F.matchType,children:[Object(l.jsx)("option",{value:"",children:"--Select a Plate Type--"}),Object.entries(B).map((function(e){var t=Object(o.a)(e,2),n=t[0],c=t[1];return Object(l.jsx)("option",{value:n,children:c.name})}))]}),Object(l.jsx)(ke.a.Control.Feedback,{type:"invalid",children:"Plate Type is a required field."})]})]}),Object(l.jsxs)(De.a.Footer,{children:[Object(l.jsx)(Se.a,{variant:"secondary",onClick:function(){return ee("edit")},children:"Cancel"}),Object(l.jsx)(Se.a,{variant:"primary",type:"submit",children:"Confirm"})]})]})})]}),Object(l.jsxs)("div",{className:"content",children:[Object(l.jsxs)(Ft.a,{children:[Object(l.jsx)(Ft.a.Item,{href:"/home",children:"Home"}),Object(l.jsx)(Ft.a.Item,{active:!0,children:"Standard Plate Matching"})]}),Object(l.jsx)(ke.a,{onSubmit:function(e){e.preventDefault()},children:Object(l.jsxs)(Me.a,{className:"d-flex",children:[Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsxs)(Se.a,{className:"btn btn-info align-items-center d-flex",type:"button",onClick:Q,children:[Object(l.jsx)(Bt.a,{}),"\xa0 Refresh"]})}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsx)(Se.a,{className:"btn btn-success",type:"button",onClick:function(){H({matchName:"",matchPlate:"",matchType:""}),h(!1),ee("add")},children:"Add +"})}),Object(l.jsx)("div",{style:{"flex-grow":"1"}}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsxs)(ke.a.Control,{custom:!0,as:"select",id:"matchType",placeholder:"Plate Type",onChange:Z,value:k.matchType,children:[Object(l.jsx)("option",{value:"",children:"All Plate Types"}),Object.entries(B).map((function(e){var t=Object(o.a)(e,2),n=t[0],c=t[1];return Object(l.jsx)("option",{value:n,children:c.name})}))]})}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsx)(ke.a.Control,{id:"matchName",placeholder:"Pattern Name",onChange:Z,value:k.matchName})}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsx)(Se.a,{type:"button",onClick:function(){R(k)},children:"Search"})}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsx)(Se.a,{type:"button",variant:"secondary",onClick:function(){I({matchType:"",matchName:""}),R({matchType:"",matchName:""})},children:"Cancel"})})]})})]}),Object(l.jsx)("div",{className:"content",children:Object(l.jsx)(gt.a,{component:vt.a,children:Object(l.jsxs)(yt.a,{"aria-label":"simple table",children:[Object(l.jsx)(wt.a,{children:Object(l.jsxs)(Tt.a,{children:[Object(l.jsx)(Nt.a,{align:"left",children:Object(l.jsx)("b",{children:"Pattern Name"})}),Object(l.jsx)(Nt.a,{align:"center",children:Object(l.jsx)("b",{children:"Plate Pattern"})}),Object(l.jsx)(Nt.a,{align:"center",children:Object(l.jsx)("b",{children:"Plate Type"})}),Object(l.jsx)(Nt.a,{align:"right",children:Object(l.jsx)("b",{children:"Actions"})})]})}),Object(l.jsxs)(Ct.a,{children:[X?Object(l.jsx)(Tt.a,{children:Object(l.jsx)(Nt.a,{align:"center",colSpan:6,children:Object(l.jsx)(Ge.a,{animation:"border",role:"status",children:Object(l.jsx)("span",{className:"sr-only",children:"Loading..."})})})}):y.length>0?(ue>0?y.slice(re*ue,re*ue+ue):y).map((function(e){return Object(l.jsxs)(Tt.a,{children:[Object(l.jsx)(Nt.a,{align:"left",children:e.matchName}),Object(l.jsx)(Nt.a,{align:"center",children:Object(l.jsx)("div",{className:"outerPlate",children:Object(l.jsx)("div",{className:"innerPlate",children:Object(l.jsx)("u",{children:e.matchPlate})})})}),Object(l.jsx)(Nt.a,{align:"center",children:B[e.matchType].name}),Object(l.jsxs)(Nt.a,{align:"right",style:{padding:0},children:[Object(l.jsx)(Ue.a,{onClick:function(){!function(e){var t=e.matchName,n=e.matchPlate,c=e.matchType;h(!1),H({matchName:t,matchPlate:n,matchType:c}),ee("edit")}(e)},children:Object(l.jsx)(Vt.a,{size:21,color:"royalblue"})}),Object(l.jsx)(Ue.a,{onClick:function(){f(e.matchPlate),ee("delete")},children:Object(l.jsx)(Jt.a,{color:"red",size:21})})]})]},e.matchPlate)})):Object(l.jsx)(Tt.a,{children:Object(l.jsx)(Nt.a,{align:"center",colSpan:4,children:"No Special Plates Found"})}),he>0&&Object(l.jsx)(Tt.a,{style:{height:53*he},children:Object(l.jsx)(Nt.a,{colSpan:6})})]}),Object(l.jsx)(Ht.a,{children:Object(l.jsx)(Tt.a,{children:Object(l.jsx)(qt.a,{rowsPerPageOptions:[5,10,{label:"All",value:-1}],colSpan:4,count:y.length,rowsPerPage:ue,page:re,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,t){oe(t)},onChangeRowsPerPage:function(e){de(parseInt(e.target.value,10)),oe(0)},ActionsComponent:$e})})})]})})})]})}var gn=n(644),vn=n(645),yn=n(93),wn=n.n(yn);function Tn(e){return e<10?"0"+e:e}function Nn(e){return null===e?"":e.getFullYear().toString()+"-"+Tn(e.getMonth()+1)+"-"+Tn(e.getDate())+" "+Tn(e.getHours())+":"+Tn(e.getMinutes())+":"+Tn(e.getSeconds())}function Cn(e){e.match;var t=Object(c.useState)([]),n=Object(o.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)(!1),j=Object(o.a)(i,2),u=(j[0],j[1],Object(c.useState)([])),d=Object(o.a)(u,2),h=d[0],b=d[1],O=Object(c.useState)({}),p=Object(o.a)(O,2),f=p[0],m=p[1],v=Object(c.useState)(!1),y=Object(o.a)(v,2),w=y[0],T=y[1],N=Object(c.useState)(null),C=Object(o.a)(N,2),D=C[0],S=C[1],P=Object(c.useState)(!1),k=Object(o.a)(P,2),I=k[0],G=k[1],M=Object(c.useState)({}),L=Object(o.a)(M,2),R=L[0],E=L[1],A=["projectName","vehicleType","gateName","gateType","originalPlate","confirmedPlate"],F={projectName:"Project",vehicleType:"Vehicle Type",isOpened:"Opened?",gateName:"Gate Name",gateType:"Gate Type",originalPlate:"Original Plate",confirmedPlate:"Actual Plate",detectionTime:"Detection Time",confirmedTime:"Confirmed Time",image1:"Image",plateImage:"Plate Image"},H=["projectName","vehicleType","isOpened","gateName","gateType","detectionTime","confirmedTime","originalPlate","confirmedPlate"],q={projectName:"120px",vehicleType:"120px",isOpened:"0px",gateName:"120px",gateType:"100px",originalPlate:"140px",confirmedPlate:"140px",detectionTime:"160px",confirmedTime:"160px",image1:"90px",plateImage:"90px"},Y="50px",V="50px",J=Object(c.useState)({curField:"projectName",val:"",curField2:"gateName",val2:""}),U=Object(o.a)(J,2),B=U[0],z=U[1],W=Object(c.useState)({startTime:"",endTime:""}),_=Object(o.a)(W,2),X=_[0],K=_[1],Q=Object(c.useState)({startTime:"",endTime:""}),Z=Object(o.a)(Q,2),$=Z[0],te=Z[1],ne=Object(c.useState)({curField:"projectName",val:"",curField2:"gateName",val2:""}),ce=Object(o.a)(ne,2),ae=ce[0],re=ce[1],ie=Object(c.useState)(!1),se=Object(o.a)(ie,2),oe=se[0],je=(se[1],Object(c.useState)([])),ue=Object(o.a)(je,2),de=(ue[0],ue[1],function(){var e=""===X.startTime&&""===X.endTime?{}:{detectionTime:X.startTime+"|"+X.endTime};B.val.length&&(e[B.curField]=B.val),B.val2.length&&(e[B.curField2]=B.val2),G(!0),le(H.concat("logID"),e,0,!0).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:G(!1),r(t.content);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("There was an error!",e)})),ye(0)});Object(c.useEffect)((function(){de(),me("gate").then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(t.message);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("There was an error Get Gate Types!",e)}))}),[oe]),Object(c.useEffect)((function(){Oe()}),[a]),Object(c.useEffect)((function(){de()}),[$,ae]),Object(c.useEffect)((function(){!I&&(null===h||void 0===h?void 0:h.length)&&ee.info("".concat(h.length," entries loaded"))}),[h]);var he=function(e){var t=e.target,n=t.id,c=t.value;z("curField"===n?function(e){return Object(s.a)(Object(s.a)({},e),{},{curField:c,val:""})}:"curField2"===n?function(e){return Object(s.a)(Object(s.a)({},e),{},{curField2:c,val2:""})}:function(e){return Object(s.a)(Object(s.a)({},e),{},Object(Ie.a)({},n,c))})},be=function(e,t){K((function(n){return Object(s.a)(Object(s.a)({},n),{},Object(Ie.a)({},t,e))}))},Oe=function(e){b(a.sort((function(e,t){return e.detectionTime<t.detectionTime?1:-1}))),ye(0)},pe=function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:z((function(e){return Object(s.a)(Object(s.a)({},e),{},{val:"",val2:""})})),re((function(e){return Object(s.a)(Object(s.a)({},e),{},{val:"",val2:""})})),te({startTime:"",endTime:""}),K({startTime:"",endTime:""});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(e){le(["image1","plateImage"],{logID:e}).then(function(){var t=Object(g.a)(x.a.mark((function t(n){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:E((function(t){return Object(s.a)(Object(s.a)({},t),{},Object(Ie.a)({},e,n.content[0]))}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("There was an error!",e)})),console.log(R)},xe=Object(c.useState)(0),ge=Object(o.a)(xe,2),ve=ge[0],ye=ge[1],we=Object(c.useState)(10),Te=Object(o.a)(we,2),Ne=Te[0],Ce=Te[1],De=h.length>0&&!I?Ne-Math.min(Ne,h.length-ve*Ne):Ne-1;return Object(c.useEffect)((function(){if(h.length/Ne-1==ve){var e=""===X.startTime&&""===X.endTime?{}:{detectionTime:X.startTime+"|"+X.endTime};B.val.length&&(e[B.curField]=B.val),B.val2.length&&(e[B.curField2]=B.val2),G(!0),le(H.concat("logID"),e,h.length,!0).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:G(!1),b(h.concat(t.content.sort((function(e,t){return e.detectionTime<t.detectionTime?1:-1}))));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("There was an error!",e)}))}}),[ve]),Object(l.jsxs)("div",{children:[Object(l.jsxs)(Rt.a,{children:[Object(l.jsx)("meta",{charSet:"utf-8"}),Object(l.jsx)("title",{children:"Records"})]}),Object(l.jsx)(nt,{src:D,toggleModal:function(){S(null)}}),w?Object(l.jsx)(Ot,{hide:w,toggleModal:function(){T(!1)}}):null,Object(l.jsxs)("div",{className:"content",children:[Object(l.jsxs)(Ft.a,{children:[Object(l.jsx)(Ft.a.Item,{href:"/home",children:"Home"}),Object(l.jsx)(Ft.a.Item,{active:!0,children:"Entry Exit Records"})]}),Object(l.jsxs)(Me.a,{className:"d-flex",style:{padding:"10px 0px"},children:[Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsxs)(ut.a,{style:{"background-color":"white"},children:[Object(l.jsx)(ut.a.Addon,{children:"From"}),Object(l.jsx)(ct.a,{format:"YYYY-MM-DD HH:mm:ss",block:!0,appearance:"subtle",value:X.startTime,onChange:function(e){var t,n;be(Nn(e),"startTime"),be((t=Nn(e),n=X.endTime,""===t?n:""===n?"":t<n?n:t),"endTime")},ranges:[{label:"Now",value:new Date}],placeholder:"YYYY-MM-DD HH:MM:SS"}),Object(l.jsx)(ut.a.Addon,{children:"To"}),Object(l.jsx)(ct.a,{format:"YYYY-MM-DD HH:mm:ss",block:!0,appearance:"subtle",value:X.endTime,onChange:function(e){var t,n;be(Nn(e),"endTime"),be((t=Nn(e),n=X.startTime,""===t?n:""===n?"":t>n?n:t),"startTime")},ranges:[{label:"Now",value:new Date}],placeholder:"YYYY-MM-DD HH:MM:SS"})]})}),Object(l.jsx)("div",{style:{"flex-grow":"1"}}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsxs)(Se.a,{className:"btn btn-info align-items-center d-flex",type:"button",onClick:function(){G(!0),de()},children:[Object(l.jsx)(Bt.a,{}),"\xa0 Refresh"]})}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsxs)(Se.a,{className:"btn btn-success align-items-center d-flex",type:"button",onClick:function(){return T(!0)},children:[Object(l.jsx)(wn.a,{}),"\xa0 Export"]})})]}),Object(l.jsx)(ke.a,{onSubmit:function(e){e.preventDefault()},children:Object(l.jsxs)(Me.a,{className:"d-flex",children:[Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsx)(ke.a.Control,{custom:!0,as:"select",id:"curField",onChange:he,value:B.curField,children:A.map((function(e){return Object(l.jsx)("option",{value:e,children:F[e]})}))})}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsx)(ke.a.Control,{id:"val",placeholder:F[B.curField],onChange:he,value:B.val})}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsx)(ke.a.Control,{custom:!0,as:"select",id:"curField2",onChange:he,value:B.curField2,children:A.map((function(e){return Object(l.jsx)("option",{value:e,children:F[e]})}))})}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsx)(ke.a.Control,{id:"val2",placeholder:F[B.curField2],onChange:he,value:B.val2})}),Object(l.jsx)("div",{style:{"flex-grow":"1"}}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsx)(Se.a,{type:"button",onClick:function(){re(B),te(X)},children:"Search"})}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsx)(Se.a,{type:"button",variant:"secondary",onClick:pe,children:"Cancel"})})]})})]}),Object(l.jsxs)("div",{className:"content",children:[Object(l.jsx)(gt.a,{component:vt.a,className:"overflowTable scrollbar-grey",children:Object(l.jsxs)(yt.a,{"aria-label":"simple table",children:[Object(l.jsx)(wt.a,{children:Object(l.jsxs)(Tt.a,{children:[H.map((function(e){return Object(l.jsx)(Nt.a,{align:"center",style:{"min-width":q[e]},children:Object(l.jsx)("b",{children:F[e]})})})),Object(l.jsx)(Nt.a,{align:"center",style:{"min-width":q.image1},children:Object(l.jsx)("b",{children:F.image1})}),Object(l.jsx)(Nt.a,{align:"center",style:{"min-width":q.plateImage},children:Object(l.jsx)("b",{children:F.plateImage})})]})}),I?Object(l.jsxs)(Ct.a,{children:[Object(l.jsx)("div",{className:"loadingTable",style:{height:53*Ne},children:Object(l.jsx)(Ge.a,{animation:"border",role:"status",children:Object(l.jsx)("span",{className:"sr-only",children:"Loading..."})})}),Object(l.jsx)(Tt.a,{style:{height:53*Ne},children:Object(l.jsx)(Nt.a,{colSpan:13})})]}):Object(l.jsxs)(Ct.a,{children:[h.length>0?(Ne>0?h.slice(ve*Ne,ve*Ne+Ne):h).map((function(e){return Object(l.jsxs)(Tt.a,{children:[Object(l.jsx)(Nt.a,{className:"padding-0",align:"center",children:e.projectName}),Object(l.jsx)(Nt.a,{className:"padding-0",align:"center",children:e.vehicleType}),Object(l.jsx)(Nt.a,{className:"padding-0",align:"center",children:!0===e.isOpened?Object(l.jsx)(gn.a,{color:"#64D381",size:25}):Object(l.jsx)(vn.a,{color:"red",size:25})}),Object(l.jsx)(Nt.a,{className:"padding-0",align:"center",children:e.gateName}),Object(l.jsx)(Nt.a,{className:"padding-0",align:"center",children:null===e.gateType||void 0===f[e.gateType]?null:f[e.gateType].name}),Object(l.jsx)(Nt.a,{className:"padding-0",align:"center",children:e.detectionTime}),Object(l.jsx)(Nt.a,{className:"padding-0",align:"center",children:e.confirmedTime}),Object(l.jsx)(Nt.a,{className:"padding-0",align:"center",children:Object(l.jsx)("div",{className:"outerPlate",children:Object(l.jsx)("div",{className:"innerPlate",children:Object(l.jsx)("u",{children:e.originalPlate})})})}),Object(l.jsx)(Nt.a,{className:"padding-0",align:"center",children:null===e.confirmedPlate||""==e.confirmedPlate?null:Object(l.jsx)("div",{className:"outerPlate",children:Object(l.jsx)("div",{className:"innerPlate",children:Object(l.jsx)("u",{children:e.confirmedPlate})})})}),Object(l.jsx)(Nt.a,{style:{padding:"0 10px"},align:"center",children:void 0===R[e.logID]?Object(l.jsx)(Ue.a,{onClick:function(){return fe(e.logID)},children:Object(l.jsx)(wn.a,{})}):Object(l.jsx)("img",{className:"imageClick",onClick:function(){return S(R[e.logID].image1)},style:{height:Y},src:R[e.logID].image1})}),Object(l.jsx)(Nt.a,{style:{padding:"0 10px"},align:"center",children:void 0===R[e.logID]?Object(l.jsx)(Ue.a,{onClick:function(){return fe(e.logID)},children:Object(l.jsx)(wn.a,{})}):Object(l.jsx)("img",{className:"imageClick",onClick:function(){return S(R[e.logID].plateImage)},style:{height:V},src:R[e.logID].plateImage})})]},e.logID)})):Object(l.jsx)(Tt.a,{children:Object(l.jsx)(Nt.a,{align:"center",colSpan:11,children:"No Records Found"})}),De>0&&Object(l.jsx)(Tt.a,{style:{height:50*De},children:Object(l.jsx)(Nt.a,{colSpan:11})})]})]})}),Object(l.jsx)(Tt.a,{className:"d-flex justify-content-center",children:Object(l.jsx)(qt.a,{rowsPerPageOptions:[5,10,50],colSpan:11,count:h.length,rowsPerPage:Ne,page:ve,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,t){ye(t)},onChangeRowsPerPage:function(e){Ce(parseInt(e.target.value,10)),ye(0)},ActionsComponent:$e})})]})]})}function Dn(e){e.match;return Object(l.jsx)("div",{className:"d-flex justify-content-center",children:Object(l.jsx)("h1",{children:"Pending API"})})}var Sn=n(364),Pn=n.n(Sn),kn=n(363),In=n.n(kn);function Gn(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)({delete:!1,edit:!1}),j=Object(o.a)(i,2),u=j[0],d=j[1],h=Object(c.useState)(""),b=Object(o.a)(h,2),O=b[0],p=b[1],f=Object(c.useState)(""),m=Object(o.a)(f,2),v=m[0],y=m[1],w=Object(c.useState)(!1),T=Object(o.a)(w,2),N=T[0],C=(T[1],Object(c.useState)({})),D=Object(o.a)(C,2),S=D[0],P=D[1],k=Object(c.useState)({}),I=Object(o.a)(k,2),G=I[0],M=I[1],L=Object(c.useState)(!1),R=Object(o.a)(L,2),E=R[0],A=R[1],F=Object(c.useState)([]),H=Object(o.a)(F,2),q=H[0],Y=H[1],V=function(){var e=Object(g.a)(x.a.mark((function e(t,n,c){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},t.forEach(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a[t[n]]=t[c];case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,a;case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){oe(["projectID","projectName"]).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t.content),Y(t.content),V(t.content,"projectID","projectName").then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=P,e.next=3,t;case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Get Gate, there was an error!",e)}))}),[N]);var J=function(){""===O?r([]):(A(!0),ue(O,["accessRuleID","accessRuleName","isChargeable","gates"]).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A(!1),console.log(t.content),r(t.content);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Get Gate, there was an error!",e)}))),X(0)};Object(c.useEffect)((function(){J(),de(O,["gateID","gateName"]).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:V(t.content,"gateID","gateName").then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=M,e.next=3,t;case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Get Gate, there was an error!",e)}))}),[O]);var U=function(e){var t=u[e];d((function(n){return Object(s.a)(Object(s.a)({},n),{},Object(Ie.a)({},e,!t))}))},B=function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ge(t).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:J(),U("delete"),ee.success("Rule Deleted");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Delete Rule, There was an error!",e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=a.a.useState(0),W=Object(o.a)(z,2),_=W[0],X=W[1],K=a.a.useState(10),Q=Object(o.a)(K,2),Z=Q[0],$=Q[1],te=n.length>0?Z-Math.min(Z,n.length-_*Z):Z-1;return Object(l.jsxs)("div",{children:[Object(l.jsxs)(Rt.a,{children:[Object(l.jsx)("meta",{charSet:"utf-8"}),Object(l.jsx)("title",{children:"Rules"})]}),Object(l.jsx)(Pe,{hide:u.delete,success:function(){B(v)},toggleModal:function(){U("delete")},title:"Confirm Deletion",body:"Delete this rule?"}),u.edit?Object(l.jsx)(et,{hide:u.edit,projectID:O,projectName:S[O],accessRuleID:v,success:function(){J(),U("edit")},toggleModal:function(){U("edit")}}):null,Object(l.jsxs)("div",{className:"content",children:[Object(l.jsxs)(Ft.a,{children:[Object(l.jsx)(Ft.a.Item,{href:"/home",children:"Home"}),Object(l.jsx)(Ft.a.Item,{active:!0,children:"Access Rules"})]}),Object(l.jsx)(ke.a,{onSubmit:function(e){e.preventDefault()},children:Object(l.jsxs)(Me.a,{className:"d-flex",children:[Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsxs)(ke.a.Control,{custom:!0,as:"select",id:"projectID",onChange:function(e){p(e.target.value)},value:O,children:[Object(l.jsx)("option",{value:"",children:"--Select a Project--"}),q.map((function(e){return Object(l.jsx)("option",{value:e.projectID,children:e.projectName})}))]})}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsx)(Se.a,{disabled:""===O,className:"btn btn-success",type:"button",onClick:function(){y(null),U("edit")},children:"+ Add"})}),Object(l.jsx)("div",{style:{"flex-grow":"1"}}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsxs)(Se.a,{className:"btn btn-info align-items-center d-flex",type:"button",onClick:J,children:[Object(l.jsx)(Bt.a,{}),"\xa0 Refresh"]})})]})})]}),Object(l.jsx)("div",{className:"content",children:Object(l.jsx)(gt.a,{component:vt.a,children:Object(l.jsxs)(yt.a,{"aria-label":"simple table",children:[Object(l.jsx)(wt.a,{children:Object(l.jsxs)(Tt.a,{children:[Object(l.jsx)(Nt.a,{align:"left",children:Object(l.jsx)("b",{children:"Project"})}),Object(l.jsx)(Nt.a,{align:"center",children:Object(l.jsx)("b",{children:"Name"})}),Object(l.jsx)(Nt.a,{align:"center",children:Object(l.jsx)("b",{children:"Gates"})}),Object(l.jsx)(Nt.a,{align:"center",children:Object(l.jsx)("b",{children:"Chargeable"})}),Object(l.jsx)(Nt.a,{align:"right",children:Object(l.jsx)("b",{children:"Actions"})})]})}),Object(l.jsxs)(Ct.a,{children:[E?Object(l.jsx)(Tt.a,{children:Object(l.jsx)(Nt.a,{align:"center",colSpan:5,children:Object(l.jsx)(Ge.a,{animation:"border",role:"status",children:Object(l.jsx)("span",{className:"sr-only",children:"Loading..."})})})}):n.length>0?(Z>0?n.slice(_*Z,_*Z+Z):n).map((function(e,t){return Object(l.jsxs)(Tt.a,{children:[Object(l.jsx)(Nt.a,{align:"left",children:S[O]}),Object(l.jsx)(Nt.a,{align:"center",children:e.accessRuleName}),Object(l.jsx)(Nt.a,{align:"center",children:null===e.gates?null:e.gates.map((function(e){return Object(l.jsxs)("div",{children:[null===e?null:G[e]," ",Object(l.jsx)("br",{})]})}))}),Object(l.jsx)(Nt.a,{align:"center",children:e.isChargeable?Object(l.jsx)(In.a,{style:{color:"#66bb6a"}}):Object(l.jsx)(Pn.a,{style:{color:"red"}})}),Object(l.jsxs)(Nt.a,{align:"right",style:{padding:0},children:[Object(l.jsx)(Ue.a,{onClick:function(){y(e.accessRuleID),U("edit")},children:Object(l.jsx)(Vt.a,{size:21,color:"royalblue"})}),Object(l.jsx)(Ue.a,{onClick:function(){y(e.accessRuleID),U("delete")},children:Object(l.jsx)(Jt.a,{color:"red",size:21})})]})]},e.gateName)})):Object(l.jsx)(Tt.a,{children:Object(l.jsx)(Nt.a,{align:"center",colSpan:5,children:"No Rules Found"})}),te>0&&Object(l.jsx)(Tt.a,{style:{height:53*te},children:Object(l.jsx)(Nt.a,{colSpan:5})})]}),Object(l.jsx)(Ht.a,{children:Object(l.jsx)(Tt.a,{children:Object(l.jsx)(qt.a,{rowsPerPageOptions:[5,10,{label:"All",value:-1}],colSpan:5,count:n.length,rowsPerPage:Z,page:_,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,t){X(t)},onChangeRowsPerPage:function(e){$(parseInt(e.target.value,10)),X(0)},ActionsComponent:$e})})})]})})})]})}function Mn(e){return e<10?"0"+e:e}function Ln(e){return null===e?"":e.getFullYear().toString()+"-"+Mn(e.getMonth()+1)+"-"+Mn(e.getDate())+" "+Mn(e.getHours())+":"+Mn(e.getMinutes())+":"+Mn(e.getSeconds())}function Rn(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(!1),j=Object(o.a)(i,2),u=j[0],d=j[1],h=Object(c.useState)({plateNumber:"",tag:""}),b=Object(o.a)(h,2),O=b[0],p=b[1],f=Object(c.useState)({plateNumber:"",tag:""}),m=Object(o.a)(f,2),v=m[0],y=m[1],w=Object(c.useState)([]),T=Object(o.a)(w,2),N=T[0],C=T[1],D=Object(c.useState)({delete:!1,edit:!1,export:!1}),S=Object(o.a)(D,2),P=S[0],k=S[1],I=Object(c.useState)(""),G=Object(o.a)(I,2),M=G[0],L=G[1],R=Object(c.useState)(null),E=Object(o.a)(R,2),A=E[0],F=E[1],H=Object(c.useState)(!1),q=Object(o.a)(H,2),Y=q[0],V=(q[1],Object(c.useState)([])),J=Object(o.a)(V,2),U=J[0],B=J[1],z=Object(c.useState)({}),W=Object(o.a)(z,2),_=W[0],X=W[1],K=Object(c.useState)([]),Q=Object(o.a)(K,2),Z=Q[0],$=Q[1],te=Object(c.useState)({}),ne=Object(o.a)(te,2),ce=ne[0],ae=ne[1],re=Object(c.useState)("startDateTime"),ie=Object(o.a)(re,2),se=ie[0],le=ie[1],je=Object(c.useState)("startDateTime"),de=Object(o.a)(je,2),he=de[0],be=de[1],Oe=Object(c.useState)({}),pe=Object(o.a)(Oe,2),fe=pe[0],me=pe[1],xe=Object(c.useState)([]),ge=Object(o.a)(xe,2),we=ge[0],Te=ge[1],Ce=function(){var e=Object(g.a)(x.a.mark((function e(t,n,c){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},t.forEach(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a[t[n]]=t[c];case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,a;case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),De=Object(c.useState)({startTime:"",endTime:""}),Re=Object(o.a)(De,2),Ee=Re[0],Ae=Re[1],Fe=Object(c.useState)({startTime:"",endTime:""}),He=Object(o.a)(Fe,2),qe=He[0],Ye=He[1],Ve=function(){console.log("reseting"),Ae({startTime:"",endTime:""}),Ye({startTime:"",endTime:""}),p({plateNumber:"",tag:""}),y({plateNumber:"",tag:""})};Object(c.useEffect)((function(){oe(["projectID","projectName"]).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t.content),Te(t.content),Ce(t.content,"projectID","projectName").then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=me,e.next=3,t;case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Get Project, there was an error!",e)}))}),[Y]);Object(c.useEffect)((function(){ue(M,["accessRuleID","accessRuleName","projectID"]).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:B(t.content),Ce(t.content,"accessRuleID","accessRuleName").then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=X,e.next=3,t;case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Get Access Rule, there was an error!",e)})),Ne(M,["unitID","unitName"]).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$(t.content),Ce(t.content,"unitID","unitName").then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=ae,e.next=3,t;case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Get Unit, there was an error!",e)})),Ve()}),[M]);var Je=function(){if(""===M)r([]);else{d(!0);var e=""===Ee.startTime&&""===Ee.endTime?{}:Object(Ie.a)({},he,Ee.startTime+"|"+Ee.endTime);ve(["recordID","plateNumber","accessRuleID","tag","startDateTime","endDateTime","unitID"],e).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r(t.content.filter((function(e){return null!==e.accessRuleID&&void 0!==_[e.accessRuleID]}))),d(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Get entry, there was an error!",e)}))}Ze(0)};Object(c.useEffect)((function(){Je()}),[_,ce,qe,he]);Object(c.useEffect)((function(){!function(){var e=n,t=v.plateNumber,c=v.tag;console.log(e),console.log(t,c),C(e.filter((function(e){return e.plateNumber.toLowerCase().indexOf(t.toLowerCase())>=0&&e.tag.toLowerCase().indexOf(c.toLowerCase())>=0}))),Ze(0)}()}),[n,v]);var Be=function(e){var t=P[e];k((function(n){return Object(s.a)(Object(s.a)({},n),{},Object(Ie.a)({},e,!t))}))},ze=function(e){var t=e.target,n=t.id,c=t.value;p((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(Ie.a)({},n,c))}))},We=function(e,t){Ae((function(n){return Object(s.a)(Object(s.a)({},n),{},Object(Ie.a)({},t,e))}))},_e=function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ye(t).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Je(),Be("delete"),ee.success("Entry Deleted");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Delete Entry, There was an error!",e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xe=a.a.useState(0),Ke=Object(o.a)(Xe,2),Qe=Ke[0],Ze=Ke[1],et=a.a.useState(10),tt=Object(o.a)(et,2),nt=tt[0],at=tt[1],rt=nt-Math.min(nt,N.length-Qe*nt);return Object(l.jsxs)("div",{children:[Object(l.jsxs)(Rt.a,{children:[Object(l.jsx)("meta",{charSet:"utf-8"}),Object(l.jsx)("title",{children:"Whitelists"})]}),Object(l.jsx)(Pe,{hide:P.delete,success:function(){_e(A)},toggleModal:function(){Be("delete")},title:"Confirm Deletion",body:"Delete this entry?"}),P.edit?Object(l.jsx)(it,{hide:P.edit,projectName:fe[M],ID:A,accessRules:U,units:Z,success:function(){Je(),Be("edit")},toggleModal:function(){Be("edit")}}):null,P.export?Object(l.jsx)(jt,{hide:P.export,projects:we,projectNames:fe,toggleModal:function(){Be("export")}}):null,Object(l.jsxs)("div",{className:"content",children:[Object(l.jsxs)(Ft.a,{children:[Object(l.jsx)(Ft.a.Item,{href:"/home",children:"Home"}),Object(l.jsx)(Ft.a.Item,{active:!0,children:"Whitelist Entries"})]}),Object(l.jsxs)(ke.a,{onSubmit:function(e){e.preventDefault()},children:[Object(l.jsxs)(Me.a,{className:"d-flex",style:{padding:"10px 0px"},children:[Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsxs)(ke.a.Control,{custom:!0,as:"select",id:"projectID",onChange:function(e){L(e.target.value)},value:M,children:[Object(l.jsx)("option",{value:"",children:"--Select a Project--"}),we.map((function(e){return Object(l.jsx)("option",{value:e.projectID,children:e.projectName})}))]})}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsx)(Se.a,{disabled:""===M,className:"btn btn-success",type:"button",onClick:function(){F(null),Be("edit")},children:"+ Add"})})]}),Object(l.jsxs)(Me.a,{className:"d-flex",style:{padding:"10px 0px"},children:[Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsx)(ke.a.Control,{placeholder:"Plate No.",id:"plateNumber",onChange:ze,value:O.plateNumber})}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsx)(ke.a.Control,{placeholder:"Tag",id:"tag",onChange:ze,value:O.tag})}),Object(l.jsx)("div",{style:{"flex-grow":"1"}}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsxs)(Se.a,{className:"btn btn-info align-items-center d-flex",type:"button",onClick:Je,children:[Object(l.jsx)(Bt.a,{}),"\xa0 Refresh"]})}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsxs)(Se.a,{className:"btn btn-success align-items-center d-flex",type:"button",onClick:function(){return Be("export")},children:[Object(l.jsx)(wn.a,{}),"\xa0 Export"]})})]}),Object(l.jsxs)(Me.a,{className:"d-flex",style:{padding:"10px 0px"},children:[Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsxs)(ke.a.Control,{custom:!0,as:"select",onChange:function(e){le(e.target.value)},value:se,children:[Object(l.jsx)("option",{value:"startDateTime",children:"Start Date"}),Object(l.jsx)("option",{value:"endDateTime",children:"End Date"})]})}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsxs)(ut.a,{style:{"background-color":"white"},children:[Object(l.jsx)(ut.a.Addon,{children:"From"}),Object(l.jsx)(ct.a,{format:"YYYY-MM-DD HH:mm:ss",block:!0,appearance:"subtle",value:Ee.startTime,onChange:function(e){var t,n;We(Ln(e),"startTime"),We((t=Ln(e),n=Ee.endTime,""===t?n:""===n?"":t<n?n:t),"endTime")},ranges:[{label:"Now",value:new Date}],placeholder:"YYYY-MM-DD HH:MM:SS"}),Object(l.jsx)(ut.a.Addon,{children:"To"}),Object(l.jsx)(ct.a,{format:"YYYY-MM-DD HH:mm:ss",block:!0,appearance:"subtle",value:Ee.endTime,onChange:function(e){var t,n;We(Ln(e),"endTime"),We((t=Ln(e),n=Ee.startTime,""===t?n:""===n?"":t>n?n:t),"startTime")},ranges:[{label:"Now",value:new Date}],placeholder:"YYYY-MM-DD HH:MM:SS"})]})}),Object(l.jsx)("div",{style:{"flex-grow":"1"}}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsx)(Se.a,{className:"btn btn-primary",type:"button",onClick:function(){Ye(Ee),y(O),be(se)},children:"Search"})}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsx)(Se.a,{type:"button",variant:"secondary",onClick:function(){return Ve()},children:"Cancel"})})]})]})]}),Object(l.jsx)("div",{className:"content",children:Object(l.jsx)(gt.a,{component:vt.a,children:Object(l.jsxs)(yt.a,{"aria-label":"simple table",children:[Object(l.jsx)(wt.a,{children:Object(l.jsxs)(Tt.a,{children:[Object(l.jsx)(Nt.a,{align:"center",children:Object(l.jsx)("b",{children:"Plate Number"})}),Object(l.jsx)(Nt.a,{align:"center",children:Object(l.jsx)("b",{children:"Project"})}),Object(l.jsx)(Nt.a,{align:"center",children:Object(l.jsx)("b",{children:"Unit Name"})}),Object(l.jsx)(Nt.a,{align:"center",children:Object(l.jsx)("b",{children:"Access Rule"})}),Object(l.jsx)(Nt.a,{align:"center",children:Object(l.jsx)("b",{children:"Tag"})}),Object(l.jsx)(Nt.a,{align:"center",children:Object(l.jsx)("b",{children:"Start Date"})}),Object(l.jsx)(Nt.a,{align:"center",children:Object(l.jsx)("b",{children:"End Date"})}),Object(l.jsx)(Nt.a,{align:"right",children:Object(l.jsx)("b",{children:"Actions"})})]})}),Object(l.jsxs)(Ct.a,{children:[u?Object(l.jsx)(Tt.a,{children:Object(l.jsx)(Nt.a,{align:"center",colSpan:8,children:Object(l.jsx)(Ge.a,{animation:"border",role:"status",children:Object(l.jsx)("span",{className:"sr-only",children:"Loading..."})})})}):N.length>0?(nt>0?N.slice(Qe*nt,Qe*nt+nt):N).map((function(e,t){return Object(l.jsxs)(Tt.a,{children:[Object(l.jsx)(Nt.a,{align:"center",children:Object(l.jsx)("div",{className:"outerPlate",children:Object(l.jsx)("div",{className:"innerPlate",children:Object(l.jsx)("u",{children:e.plateNumber})})})}),Object(l.jsx)(Nt.a,{align:"center",children:fe[M]}),Object(l.jsx)(Nt.a,{align:"center",children:Number.isInteger(e.unitID)?ce[String(e.unitID)]:"-"}),Object(l.jsx)(Nt.a,{align:"center",children:null===e.accessRuleID?null:_[e.accessRuleID]}),Object(l.jsx)(Nt.a,{align:"center",children:e.tag}),Object(l.jsx)(Nt.a,{align:"center",children:e.startDateTime}),Object(l.jsx)(Nt.a,{align:"center",children:e.endDateTime}),Object(l.jsxs)(Nt.a,{align:"right",style:{padding:0},children:[Object(l.jsx)(Ue.a,{onClick:function(){F(e.recordID),Be("edit")},children:Object(l.jsx)(Vt.a,{size:21,color:"royalblue"})}),Object(l.jsx)(Ue.a,{onClick:function(){F(e.recordID),Be("delete")},children:Object(l.jsx)(Jt.a,{color:"red",size:21})})]})]},e.gateName)})):Object(l.jsx)(Tt.a,{children:Object(l.jsx)(Nt.a,{align:"center",colSpan:8,children:"No Entries Found"})}),rt>0&&Object(l.jsx)(Tt.a,{style:{height:53*rt},children:Object(l.jsx)(Nt.a,{colSpan:8})})]}),Object(l.jsx)(Ht.a,{children:Object(l.jsx)(Tt.a,{children:Object(l.jsx)(qt.a,{rowsPerPageOptions:[5,10,{label:"All",value:-1}],colSpan:8,count:N.length,rowsPerPage:nt,page:Qe,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,t){Ze(t)},onChangeRowsPerPage:function(e){at(parseInt(e.target.value,10)),Ze(0)},ActionsComponent:$e})})})]})})})]})}var En=n(646);function An(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)({delete:!1,edit:!1}),j=Object(o.a)(i,2),u=j[0],d=j[1],h=Object(c.useState)(""),b=Object(o.a)(h,2),O=b[0],p=b[1],f=Object(c.useState)(""),m=Object(o.a)(f,2),v=m[0],y=m[1],w=Object(c.useState)(!1),T=Object(o.a)(w,2),N=T[0],C=(T[1],Object(c.useState)({})),D=Object(o.a)(C,2),S=D[0],P=D[1],k=Object(c.useState)({}),I=Object(o.a)(k,2),G=I[0],M=I[1],L=Object(c.useState)(!1),R=Object(o.a)(L,2),E=R[0],A=R[1],F=Object(c.useState)([]),H=Object(o.a)(F,2),q=H[0],Y=H[1],V=function(){var e=Object(g.a)(x.a.mark((function e(t,n,c){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},t.forEach(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a[t[n]]=t[c];case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,a;case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){oe(["projectID","projectName"]).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t.content),Y(t.content),V(t.content,"projectID","projectName").then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=P,e.next=3,t;case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Get Project, there was an error!",e)}))}),[N]);var J=function(){""===O?r([]):(A(!0),Ne(O,["unitID","unitName","entryGates","exitGates","maxPlates","currentPlates"]).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A(!1),r(t.content);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Get Unit, there was an error!",e)}))),X(0)};Object(c.useEffect)((function(){J(),de(O,["gateID","gateName"]).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:V(t.content,"gateID","gateName").then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=M,e.next=3,t;case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Get Gate, there was an error!",e)}))}),[O]);var U=function(e){var t=u[e];d((function(n){return Object(s.a)(Object(s.a)({},n),{},Object(Ie.a)({},e,!t))}))},B=function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Te(t).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:J(),U("delete"),ee.success("Unit Deleted");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Delete Unit, There was an error!",e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=a.a.useState(0),W=Object(o.a)(z,2),_=W[0],X=W[1],K=a.a.useState(10),Q=Object(o.a)(K,2),Z=Q[0],$=Q[1],te=n.length>0?Z-Math.min(Z,n.length-_*Z):Z-1;return Object(l.jsxs)("div",{children:[Object(l.jsxs)(Rt.a,{children:[Object(l.jsx)("meta",{charSet:"utf-8"}),Object(l.jsx)("title",{children:"Units"})]}),Object(l.jsx)(Pe,{hide:u.delete,success:function(){B(v)},toggleModal:function(){U("delete")},title:"Confirm Deletion",body:"Delete this unit?"}),u.edit?Object(l.jsx)(tt,{hide:u.edit,projectID:O,projectName:S[O],unitID:v,success:function(){J(),U("edit")},toggleModal:function(){U("edit")}}):null,Object(l.jsxs)("div",{className:"content",children:[Object(l.jsxs)(Ft.a,{children:[Object(l.jsx)(Ft.a.Item,{href:"/home",children:"Home"}),Object(l.jsx)(Ft.a.Item,{active:!0,children:"Units"})]}),Object(l.jsx)(ke.a,{onSubmit:function(e){e.preventDefault()},children:Object(l.jsxs)(Me.a,{className:"d-flex",children:[Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsxs)(ke.a.Control,{custom:!0,as:"select",id:"projectID",onChange:function(e){p(e.target.value)},value:O,children:[Object(l.jsx)("option",{value:"",children:"--Select a Project--"}),q.map((function(e){return Object(l.jsx)("option",{value:e.projectID,children:e.projectName})}))]})}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsx)(Se.a,{disabled:""===O,className:"btn btn-success",type:"button",onClick:function(){y(null),U("edit")},children:"+ Add"})}),Object(l.jsx)("div",{style:{"flex-grow":"1"}}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsxs)(Se.a,{className:"btn btn-info align-items-center d-flex",type:"button",onClick:J,children:[Object(l.jsx)(Bt.a,{}),"\xa0 Refresh"]})})]})})]}),Object(l.jsx)("div",{className:"content",children:Object(l.jsx)(gt.a,{component:vt.a,children:Object(l.jsxs)(yt.a,{"aria-label":"simple table",children:[Object(l.jsx)(wt.a,{children:Object(l.jsxs)(Tt.a,{children:[Object(l.jsx)(Nt.a,{align:"left",children:Object(l.jsx)("b",{children:"Project"})}),Object(l.jsx)(Nt.a,{align:"center",children:Object(l.jsx)("b",{children:"Name"})}),Object(l.jsx)(Nt.a,{align:"center",children:Object(l.jsx)("b",{children:"Entry Gates"})}),Object(l.jsx)(Nt.a,{align:"center",children:Object(l.jsx)("b",{children:"Exit Gates"})}),Object(l.jsx)(Nt.a,{align:"center",children:Object(l.jsx)("b",{children:"Maximum Vehicles"})}),Object(l.jsx)(Nt.a,{align:"center",children:Object(l.jsx)("b",{children:"Current Vehicles"})}),Object(l.jsx)(Nt.a,{align:"right",children:Object(l.jsx)("b",{children:"Actions"})})]})}),Object(l.jsxs)(Ct.a,{children:[E?Object(l.jsx)(Tt.a,{children:Object(l.jsx)(Nt.a,{align:"center",colSpan:5,children:Object(l.jsx)(Ge.a,{animation:"border",role:"status",children:Object(l.jsx)("span",{className:"sr-only",children:"Loading..."})})})}):n.length>0?(Z>0?n.slice(_*Z,_*Z+Z):n).map((function(e,t){return Object(l.jsxs)(Tt.a,{children:[Object(l.jsx)(Nt.a,{align:"left",children:S[O]}),Object(l.jsx)(Nt.a,{align:"center",children:e.unitName}),Object(l.jsx)(Nt.a,{align:"center",children:null===e.entryGates?null:e.entryGates.map((function(e){return Object(l.jsxs)("div",{children:[null===e?null:G[e]," ",Object(l.jsx)("br",{})]})}))}),Object(l.jsx)(Nt.a,{align:"center",children:null===e.exitGates?null:e.exitGates.map((function(e){return Object(l.jsxs)("div",{children:[null===e?null:G[e]," ",Object(l.jsx)("br",{})]})}))}),Object(l.jsx)(Nt.a,{align:"center",children:e.maxPlates}),Object(l.jsx)(Nt.a,{align:"center",children:Array.isArray(e.currentPlates)?e.currentPlates.map((function(e){return Object(l.jsxs)("div",{children:[e," ",Object(l.jsx)("br",{})]})})):null}),Object(l.jsxs)(Nt.a,{align:"right",style:{padding:0},children:[Object(l.jsx)(Ue.a,{onClick:function(){var t;t=e.unitID,we(t,{currentPlates:[]}).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ee.success("Current Vehicles Reset Successful!"),J();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("Reset Current Plate, There was an error!",e)}))},children:Object(l.jsx)(En.a,{size:21,color:"grey"})}),Object(l.jsx)(Ue.a,{onClick:function(){y(e.unitID),U("edit")},children:Object(l.jsx)(Vt.a,{size:21,color:"royalblue"})}),Object(l.jsx)(Ue.a,{onClick:function(){y(e.unitID),U("delete")},children:Object(l.jsx)(Jt.a,{color:"red",size:21})})]})]},e.unitID)})):Object(l.jsx)(Tt.a,{children:Object(l.jsx)(Nt.a,{align:"center",colSpan:7,children:"No Units Found"})}),te>0&&Object(l.jsx)(Tt.a,{style:{height:53*te},children:Object(l.jsx)(Nt.a,{colSpan:7})})]}),Object(l.jsx)(Ht.a,{children:Object(l.jsx)(Tt.a,{children:Object(l.jsx)(qt.a,{rowsPerPageOptions:[5,10,{label:"All",value:-1}],colSpan:7,count:n.length,rowsPerPage:Z,page:_,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,t){X(t)},onChangeRowsPerPage:function(e){$(parseInt(e.target.value,10)),X(0)},ActionsComponent:$e})})})]})})})]})}function Fn(e){return e<10?"0"+e:e}function Hn(e){return null===e?"":e.getFullYear().toString()+"-"+Fn(e.getMonth()+1)+"-"+Fn(e.getDate())+" "+Fn(e.getHours())+":"+Fn(e.getMinutes())+":"+Fn(e.getSeconds())}function qn(e){e.match;var t=Object(c.useState)([]),n=Object(o.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)(!1),j=Object(o.a)(i,2),u=(j[0],j[1],Object(c.useState)([])),d=Object(o.a)(u,2),h=d[0],b=d[1],O=Object(c.useState)({}),p=Object(o.a)(O,2),f=p[0],m=p[1],v=Object(c.useState)({}),y=Object(o.a)(v,2),w=y[0],T=y[1],N=Object(c.useState)(!1),C=Object(o.a)(N,2),D=C[0],S=C[1],P=Object(c.useState)(!1),k=Object(o.a)(P,2),I=k[0],G=k[1],M=["deviceID","deviceName","deviceType","deviceStatus","projectName","gateName","gateType"],L={logDateTime:"Timestamp",deviceID:"Device ID",deviceName:"Device Name",deviceType:"Device Type",deviceStatus:"Device Status",projectName:"Project",gateName:"Gate Name",gateType:"Gate Type"},R=["logDateTime","deviceID","deviceName","deviceType","deviceStatus","projectName","gateName","gateType"],E=Object(c.useState)({curField:"deviceID",val:"",curField2:"projectName",val2:""}),A=Object(o.a)(E,2),F=A[0],H=A[1],q=Object(c.useState)({startTime:"",endTime:""}),Y=Object(o.a)(q,2),V=Y[0],J=Y[1],U=Object(c.useState)({startTime:"",endTime:""}),B=Object(o.a)(U,2),z=B[0],W=B[1],_=Object(c.useState)({curField:"deviceID",val:"",curField2:"projectName",val2:""}),X=Object(o.a)(_,2),K=X[0],Q=X[1],Z=Object(c.useState)(!1),$=Object(o.a)(Z,2),te=$[0],ne=($[1],function(){var e=""===V.startTime&&""===V.endTime?{}:{logDateTime:V.startTime+"|"+V.endTime};F.val.length&&(e[F.curField]=F.val),F.val2.length&&(e[F.curField2]=F.val2),G(!0),je(R.concat("logID"),e,0,!0).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:G(!1),r(t.content);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!")})),ue(0)});Object(c.useEffect)((function(){ne(),me("gate").then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(t.message);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("There was an error Get Gate Types!",e)})),me("device").then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T(t.message);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("There was an error Get Device Types!",e)}))}),[te]),Object(c.useEffect)((function(){re()}),[a]),Object(c.useEffect)((function(){ne()}),[z,K]),Object(c.useEffect)((function(){!I&&(null===h||void 0===h?void 0:h.length)&&ee.info("".concat(h.length," entries loaded"))}),[h]);var ce=function(e){var t=e.target,n=t.id,c=t.value;H("curField"===n?function(e){return Object(s.a)(Object(s.a)({},e),{},{curField:c,val:""})}:"curField2"===n?function(e){return Object(s.a)(Object(s.a)({},e),{},{curField2:c,val2:""})}:function(e){return Object(s.a)(Object(s.a)({},e),{},Object(Ie.a)({},n,c))})},ae=function(e,t){J((function(n){return Object(s.a)(Object(s.a)({},n),{},Object(Ie.a)({},t,e))}))},re=function(e){b(a.sort((function(e,t){return e.logDateTime<t.logDateTime?1:-1}))),ue(0)},ie=function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:H((function(e){return Object(s.a)(Object(s.a)({},e),{},{val:"",val2:""})})),Q((function(e){return Object(s.a)(Object(s.a)({},e),{},{val:"",val2:""})})),W({startTime:"",endTime:""}),J({startTime:"",endTime:""});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=Object(c.useState)(0),oe=Object(o.a)(se,2),le=oe[0],ue=oe[1],de=Object(c.useState)(10),he=Object(o.a)(de,2),be=he[0],Oe=he[1],pe=h.length>0&&!I?be-Math.min(be,h.length-le*be):be-1;return Object(c.useEffect)((function(){if(h.length/be-1==le){var e=""===V.startTime&&""===V.endTime?{}:{logDateTime:V.startTime+"|"+V.endTime};F.val.length&&(e[F.curField]=F.val),F.val2.length&&(e[F.curField2]=F.val2),G(!0),je(R.concat("logID"),e,h.length,!0).then(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:G(!1),b(h.concat(t.content.sort((function(e,t){return e.logDateTime<t.logDateTime?1:-1}))));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ee.error("There was an error!"),console.error("There was an error!",e)}))}}),[le]),Object(l.jsxs)("div",{children:[Object(l.jsxs)(Rt.a,{children:[Object(l.jsx)("meta",{charSet:"utf-8"}),Object(l.jsx)("title",{children:"Device History"})]}),D?Object(l.jsx)(Ot,{hide:D,toggleModal:function(){S(!1)}}):null,Object(l.jsxs)("div",{className:"content",children:[Object(l.jsxs)(Ft.a,{children:[Object(l.jsx)(Ft.a.Item,{href:"/home",children:"Home"}),Object(l.jsx)(Ft.a.Item,{active:!0,children:"Device History"})]}),Object(l.jsxs)(Me.a,{className:"d-flex",style:{padding:"10px 0px"},children:[Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsxs)(ut.a,{style:{"background-color":"white"},children:[Object(l.jsx)(ut.a.Addon,{children:"From"}),Object(l.jsx)(ct.a,{format:"YYYY-MM-DD HH:mm:ss",block:!0,appearance:"subtle",value:V.startTime,onChange:function(e){var t,n;ae(Hn(e),"startTime"),ae((t=Hn(e),n=V.endTime,""===t?n:""===n?"":t<n?n:t),"endTime")},ranges:[{label:"Now",value:new Date}],placeholder:"YYYY-MM-DD HH:MM:SS"}),Object(l.jsx)(ut.a.Addon,{children:"To"}),Object(l.jsx)(ct.a,{format:"YYYY-MM-DD HH:mm:ss",block:!0,appearance:"subtle",value:V.endTime,onChange:function(e){var t,n;ae(Hn(e),"endTime"),ae((t=Hn(e),n=V.startTime,""===t?n:""===n?"":t>n?n:t),"startTime")},ranges:[{label:"Now",value:new Date}],placeholder:"YYYY-MM-DD HH:MM:SS"})]})}),Object(l.jsx)("div",{style:{"flex-grow":"1"}}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsxs)(Se.a,{className:"btn btn-info align-items-center d-flex",type:"button",onClick:function(){G(!0),ne()},children:[Object(l.jsx)(Bt.a,{}),"\xa0 Refresh"]})}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsxs)(Se.a,{className:"btn btn-success align-items-center d-flex",type:"button",onClick:function(){return S(!0)},children:[Object(l.jsx)(wn.a,{}),"\xa0 Export"]})})]}),Object(l.jsx)(ke.a,{onSubmit:function(e){e.preventDefault()},children:Object(l.jsxs)(Me.a,{className:"d-flex",children:[Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsx)(ke.a.Control,{custom:!0,as:"select",id:"curField",onChange:ce,value:F.curField,children:M.map((function(e){return Object(l.jsx)("option",{value:e,children:L[e]})}))})}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsx)(ke.a.Control,{id:"val",placeholder:L[F.curField],onChange:ce,value:F.val})}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsx)(ke.a.Control,{custom:!0,as:"select",id:"curField2",onChange:ce,value:F.curField2,children:M.map((function(e){return Object(l.jsx)("option",{value:e,children:L[e]})}))})}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsx)(ke.a.Control,{id:"val2",placeholder:L[F.curField2],onChange:ce,value:F.val2})}),Object(l.jsx)("div",{style:{"flex-grow":"1"}}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsx)(Se.a,{type:"button",onClick:function(){Q(F),W(V)},children:"Search"})}),Object(l.jsx)(Le.a,{sm:"auto",children:Object(l.jsx)(Se.a,{type:"button",variant:"secondary",onClick:ie,children:"Cancel"})})]})})]}),Object(l.jsxs)("div",{className:"content",children:[Object(l.jsx)(gt.a,{component:vt.a,className:"overflowTable scrollbar-grey",children:Object(l.jsxs)(yt.a,{"aria-label":"simple table",children:[Object(l.jsx)(wt.a,{children:Object(l.jsx)(Tt.a,{children:R.map((function(e){return Object(l.jsx)(Nt.a,{align:"center",children:Object(l.jsx)("b",{children:L[e]})})}))})}),I?Object(l.jsxs)(Ct.a,{children:[Object(l.jsx)("div",{className:"loadingTable",style:{height:53*be},children:Object(l.jsx)(Ge.a,{animation:"border",role:"status",children:Object(l.jsx)("span",{className:"sr-only",children:"Loading..."})})}),Object(l.jsx)(Tt.a,{style:{height:53*be},children:Object(l.jsx)(Nt.a,{colSpan:13})})]}):Object(l.jsxs)(Ct.a,{children:[h.length>0?(be>0?h.slice(le*be,le*be+be):h).map((function(e){return Object(l.jsxs)(Tt.a,{children:[Object(l.jsx)(Nt.a,{align:"center",children:e.logDateTime}),Object(l.jsx)(Nt.a,{align:"center",children:e.deviceID}),Object(l.jsx)(Nt.a,{align:"center",children:e.deviceName}),Object(l.jsx)(Nt.a,{align:"center",children:null===e.deviceType?null:void 0===w[e.deviceType]?e.deviceType:w[e.deviceType].name}),Object(l.jsx)(Nt.a,{align:"center",children:e.deviceStatus}),Object(l.jsx)(Nt.a,{align:"center",children:e.projectName}),Object(l.jsx)(Nt.a,{align:"center",children:e.gateName}),Object(l.jsx)(Nt.a,{align:"center",children:null===e.gateType?null:void 0===f[e.gateType]?e.gateType:f[e.gateType].name})]},e.logID)})):Object(l.jsx)(Tt.a,{children:Object(l.jsx)(Nt.a,{align:"center",colSpan:11,children:"No Records Found"})}),pe>0&&Object(l.jsx)(Tt.a,{style:{height:50*pe},children:Object(l.jsx)(Nt.a,{colSpan:11})})]})]})}),Object(l.jsx)(Tt.a,{className:"d-flex justify-content-center",children:Object(l.jsx)(qt.a,{rowsPerPageOptions:[5,10,50],colSpan:11,count:h.length,rowsPerPage:be,page:le,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,t){ue(t)},onChangeRowsPerPage:function(e){Oe(parseInt(e.target.value,10)),ue(0)},ActionsComponent:$e})})]})]})}pt.a;function Yn(e){var t=e.children,n=Object(b.a)(e,["children"]),r=Object(c.useContext)(u).state,i=r.auth,o=r.toggled;return Object(l.jsx)(C.b,Object(s.a)(Object(s.a)({},n),{},{render:function(e){return i?Object(l.jsxs)("div",{className:"h-100",children:[Object(l.jsx)(Je,{}),Object(l.jsx)(Ce,{}),Object(l.jsx)("div",{id:"content-body",className:o?"content-body-collapsed":"content-body-expand",children:a.a.cloneElement(t,{params:e.match.params})})]}):Object(l.jsx)(C.a,{to:{pathname:"/",state:{from:e.location}}})}}))}function Vn(e){var t=e.children,n=Object(b.a)(e,["children"]),a=Object(c.useContext)(u).state.auth;return Object(l.jsx)(C.b,Object(s.a)(Object(s.a)({},n),{},{render:function(e){var n=e.location;return a?Object(l.jsx)(C.a,{to:{pathname:"/home",state:{from:n}}}):Object(l.jsxs)("div",{className:"h-100",children:[Object(l.jsx)(Je,{}),t]})}}))}var Jn=function(){return Object(l.jsx)(pt.a,{children:Object(l.jsxs)(C.d,{children:[Object(l.jsx)(Yn,{path:"/home",children:Object(l.jsx)(Et,{})}),Object(l.jsx)(Yn,{path:"/project/:projectID",children:Object(l.jsx)(fn,{})}),Object(l.jsx)(Yn,{path:"/project",children:Object(l.jsx)(zt,{})}),Object(l.jsx)(Yn,{path:"/specialPlates",children:Object(l.jsx)(mn,{})}),Object(l.jsx)(Yn,{path:"/regexPlates",children:Object(l.jsx)(xn,{})}),Object(l.jsx)(Yn,{path:"/records",children:Object(l.jsx)(Cn,{})}),Object(l.jsx)(Yn,{path:"/parking",children:Object(l.jsx)(Dn,{})}),Object(l.jsx)(Yn,{path:"/accessRules",children:Object(l.jsx)(Gn,{})}),Object(l.jsx)(Yn,{path:"/whitelist",children:Object(l.jsx)(Rn,{})}),Object(l.jsx)(Yn,{path:"/units",children:Object(l.jsx)(An,{})}),Object(l.jsx)(Yn,{path:"/deviceHistory",children:Object(l.jsx)(qn,{})}),Object(l.jsx)(Vn,{path:"/",children:Object(l.jsx)(At,{})})]})})},Un=document.getElementById("root");i.a.render(Object(l.jsx)(h,{children:Object(l.jsx)(c.StrictMode,{children:Object(l.jsx)(Jn,{})})}),Un)}},[[574,1,2]]]);
//# sourceMappingURL=main.b1a2b53c.chunk.js.map