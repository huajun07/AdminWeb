{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\teowh\\\\Desktop\\\\Projects\\\\Admin_Web\\\\AdminWeb\\\\src\\\\pages\\\\projectSubPages\\\\Devices.js\",\n    _s = $RefreshSig$();\n\nimport { Card, Button, CardDeck, ButtonGroup } from \"react-bootstrap\";\nimport { useState, useEffect, useContext } from \"react\";\nimport { DeviceModal, GateModal } from \"../../components/index.js\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport HighlightOffIcon from \"@material-ui/icons/HighlightOff\";\nimport { store } from \"../../store.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function Devices(props) {\n  _s();\n\n  const storeContext = useContext(store);\n  const globalState = storeContext.state;\n  const server_URL = globalState.server_URL;\n  let ID = parseInt(props.ID);\n  const [dummy, setDummy] = useState(false);\n  const [gates, setGates] = useState([]);\n  const [devices, setDevices] = useState([]);\n  const [curGate, setCurGate] = useState(null);\n  const [info, setInfo] = useState({\n    type: \"gate\",\n    id: 2\n  });\n  let cardMenu = [];\n  useEffect(() => {\n    const requestOptions = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        authID: \"\",\n        serviceName: \"getTable\",\n        content: {\n          objName: \"gate\",\n          columns: [\"gateID\", \"gateName\", \"gateType\"],\n          filters: {\n            projectID: ID\n          }\n        }\n      })\n    };\n    fetch(server_URL, requestOptions).then(async response => {\n      const data = await response.json(); // check for error response\n\n      if (!response.ok) {\n        // get error message from body or default to response status\n        const error = data && data.content || response.status;\n        return Promise.reject(error);\n      }\n\n      setGates(data.content);\n    }).catch(error => {\n      this.setState({\n        errorMessage: error.toString()\n      });\n      console.error(\"There was an error!\", error);\n    });\n  }, [dummy]);\n  useEffect(() => {\n    const requestOptions = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        authID: \"\",\n        serviceName: \"getTable\",\n        content: {\n          objName: \"device\",\n          columns: [\"deviceID\", \"deviceName\", \"deviceType\", \"deviceStatus\"],\n          filters: {\n            gateID: curGate\n          }\n        }\n      })\n    };\n    fetch(server_URL, requestOptions).then(async response => {\n      const data = await response.json(); // check for error response\n\n      if (!response.ok) {\n        // get error message from body or default to response status\n        const error = data && data.content || response.status;\n        return Promise.reject(error);\n      }\n\n      setDevices(data.content);\n    }).catch(error => {\n      this.setState({\n        errorMessage: error.toString()\n      });\n      console.error(\"There was an error!\", error);\n    });\n  }, [curGate]);\n\n  const handleAddGate = () => {\n    const newGateReq = {\n      gateName: \"Gate\",\n      gateType: \"entry\",\n      isOpenForInvalid: false,\n      isOpenForTemp: false,\n      isChargeable: false,\n      ledOnTime: \"00:00:00\",\n      ledOffTime: \"00:00:00\"\n    };\n    const requestOptions = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        authID: \"\",\n        serviceName: \"createGate\",\n        content: newGateReq\n      })\n    };\n    fetch(server_URL, requestOptions).then(async response => {\n      const data = await response.json(); // check for error response\n\n      if (!response.ok) {\n        // get error message from body or default to response status\n        const error = data && data.message || response.status;\n        return Promise.reject(error);\n      }\n\n      let newGate = { ...newGateReq,\n        gateID: data.message.gateID\n      };\n      setGates(prevGates => prevGates.concat(newGate));\n    }).catch(error => {\n      this.setState({\n        errorMessage: error.toString()\n      });\n      console.error(\"There was an error!\", error);\n    });\n  };\n\n  const handleAddDevice = () => {\n    const newDeviceReq = {\n      gateName: \"Gate\",\n      gateType: \"entry\",\n      isOpenForInvalid: false,\n      isOpenForTemp: false,\n      isChargeable: false,\n      ledOnTime: \"00:00:00\",\n      ledOffTime: \"00:00:00\"\n    };\n    const requestOptions = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        authID: \"\",\n        serviceName: \"createDevice\",\n        content: newDeviceReq\n      })\n    };\n    fetch(server_URL, requestOptions).then(async response => {\n      const data = await response.json(); // check for error response\n\n      if (!response.ok) {\n        // get error message from body or default to response status\n        const error = data && data.message || response.status;\n        return Promise.reject(error);\n      }\n\n      let newDevice = { ...newDeviceReq,\n        gateID: data.message.gateID\n      };\n      setDevices(prevDevices => prevDevices.concat(newDevice));\n    }).catch(error => {\n      this.setState({\n        errorMessage: error.toString()\n      });\n      console.error(\"There was an error!\", error);\n    });\n  };\n\n  const delGate = id => {};\n\n  const delDevice = id => {};\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: info.type === null ? null : info.type === \"gate\" ? /*#__PURE__*/_jsxDEV(GateModal, {\n        id: info.id,\n        toggleModal: () => setInfo({\n          type: null,\n          id: null\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 9\n      }, this) : null\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"gateContainer\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"gateHeader\",\n        children: /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Gates\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"addGate\",\n        children: /*#__PURE__*/_jsxDEV(IconButton, {\n          \"aria-label\": \"add\",\n          onClick: handleAddGate,\n          children: /*#__PURE__*/_jsxDEV(AddIcon, {\n            style: {\n              color: \"#4caf50\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"deviceTab cardDiv align-items-center d-flex\",\n        children: /*#__PURE__*/_jsxDEV(CardDeck, {\n          children: gates.map(gate => /*#__PURE__*/_jsxDEV(Card, {\n            style: {\n              width: \"200px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"delGate\",\n              children: /*#__PURE__*/_jsxDEV(IconButton, {\n                onClick: () => delGate(gates.gateID),\n                children: /*#__PURE__*/_jsxDEV(HighlightOffIcon, {\n                  style: {\n                    color: \"#d32f2f\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 217,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n              children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n                children: gate.gateName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Card.Img, {\n                variant: \"top\",\n                src: gate.gateType === \"Entry\" ? \"../../assets/entry.jpg\" : \"../../assets/exit.png\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(ButtonGroup, {\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                variant: \"primary\",\n                onClick: () => {\n                  setCurGate(gate.gateID);\n                },\n                children: \"Devices\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"warning\",\n                onClick: () => {\n                  setInfo({\n                    type: \"gate\",\n                    id: gate.gateID\n                  });\n                },\n                children: \"Info\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 240,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 7\n    }, this), curGate === null ? null : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"deviceContainter\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"gateHeader\",\n        children: /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Devices\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"addGate\",\n        children: /*#__PURE__*/_jsxDEV(IconButton, {\n          \"aria-label\": \"add\",\n          onClick: handleAddDevice,\n          children: /*#__PURE__*/_jsxDEV(AddIcon, {\n            style: {\n              color: \"#4caf50\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"deviceTab cardDiv align-items-center d-flex\",\n        children: /*#__PURE__*/_jsxDEV(CardDeck, {\n          children: devices.map(device => /*#__PURE__*/_jsxDEV(Card, {\n            style: {\n              width: \"200px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"delGate\",\n              children: /*#__PURE__*/_jsxDEV(IconButton, {\n                onClick: () => delDevice(device.deviceID),\n                children: /*#__PURE__*/_jsxDEV(HighlightOffIcon, {\n                  style: {\n                    color: \"#d32f2f\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 273,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n              children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n                children: device.deviceName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Card.Img, {\n                variant: \"top\",\n                src: device.deviceType === \"Entry\" ? \"../../assets/entry.jpg\" : \"../../assets/exit.png\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 186,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Devices, \"+ck8qNd2Mfre0GEiS4KQPsYzBbE=\");\n\n_c = Devices;\nexport default {\n  Devices\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"Devices\");","map":{"version":3,"sources":["C:/Users/teowh/Desktop/Projects/Admin_Web/AdminWeb/src/pages/projectSubPages/Devices.js"],"names":["Card","Button","CardDeck","ButtonGroup","useState","useEffect","useContext","DeviceModal","GateModal","IconButton","AddIcon","HighlightOffIcon","store","Devices","props","storeContext","globalState","state","server_URL","ID","parseInt","dummy","setDummy","gates","setGates","devices","setDevices","curGate","setCurGate","info","setInfo","type","id","cardMenu","requestOptions","method","headers","body","JSON","stringify","authID","serviceName","content","objName","columns","filters","projectID","fetch","then","response","data","json","ok","error","status","Promise","reject","catch","setState","errorMessage","toString","console","gateID","handleAddGate","newGateReq","gateName","gateType","isOpenForInvalid","isOpenForTemp","isChargeable","ledOnTime","ledOffTime","message","newGate","prevGates","concat","handleAddDevice","newDeviceReq","newDevice","prevDevices","delGate","delDevice","color","map","gate","width","device","deviceID","deviceName","deviceType"],"mappings":"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","sourcesContent":["import { Card, Button, CardDeck, ButtonGroup } from \"react-bootstrap\";\r\nimport { useState, useEffect, useContext } from \"react\";\r\nimport { DeviceModal, GateModal } from \"../../components/index.js\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport HighlightOffIcon from \"@material-ui/icons/HighlightOff\";\r\nimport { store } from \"../../store.js\";\r\n\r\nexport function Devices(props) {\r\n  const storeContext = useContext(store);\r\n  const globalState = storeContext.state;\r\n  const server_URL = globalState.server_URL;\r\n  let ID = parseInt(props.ID);\r\n  const [dummy, setDummy] = useState(false);\r\n  const [gates, setGates] = useState([]);\r\n  const [devices, setDevices] = useState([]);\r\n  const [curGate, setCurGate] = useState(null);\r\n  const [info, setInfo] = useState({\r\n    type: \"gate\",\r\n    id: 2\r\n  });\r\n  let cardMenu = [];\r\n  useEffect(() => {\r\n    const requestOptions = {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        authID: \"\",\r\n        serviceName: \"getTable\",\r\n        content: {\r\n          objName: \"gate\",\r\n          columns: [\"gateID\", \"gateName\", \"gateType\"],\r\n          filters:{\r\n            projectID: ID\r\n          }\r\n        }\r\n      })\r\n    };\r\n    \r\n    fetch(server_URL, requestOptions)\r\n    .then(async (response) => {\r\n      const data = await response.json();\r\n  \r\n      // check for error response\r\n      if (!response.ok) {\r\n        // get error message from body or default to response status\r\n        const error = (data && data.content) || response.status;\r\n        return Promise.reject(error);\r\n      }\r\n      setGates(data.content);\r\n    })\r\n    .catch((error) => {\r\n      this.setState({ errorMessage: error.toString() });\r\n      console.error(\"There was an error!\", error);\r\n    });\r\n  }, [dummy]);\r\n\r\n  useEffect(() => {\r\n    const requestOptions = {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        authID: \"\",\r\n        serviceName: \"getTable\",\r\n        content: {\r\n          objName: \"device\",\r\n          columns: [\"deviceID\", \"deviceName\", \"deviceType\", \"deviceStatus\"],\r\n          filters:{\r\n            gateID: curGate\r\n          }\r\n        }\r\n      })\r\n    };\r\n    \r\n    fetch(server_URL, requestOptions)\r\n    .then(async (response) => {\r\n      const data = await response.json();\r\n  \r\n      // check for error response\r\n      if (!response.ok) {\r\n        // get error message from body or default to response status\r\n        const error = (data && data.content) || response.status;\r\n        return Promise.reject(error);\r\n      }\r\n      setDevices(data.content);\r\n    })\r\n    .catch((error) => {\r\n      this.setState({ errorMessage: error.toString() });\r\n      console.error(\"There was an error!\", error);\r\n    });\r\n  }, [curGate]);\r\n\r\n  const handleAddGate = () => {\r\n    const newGateReq = {\r\n      gateName: \"Gate\",\r\n      gateType: \"entry\",\r\n      isOpenForInvalid: false,\r\n      isOpenForTemp: false,\r\n      isChargeable: false,\r\n      ledOnTime: \"00:00:00\",\r\n      ledOffTime: \"00:00:00\"\r\n    }\r\n    const requestOptions = {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        authID: \"\",\r\n        serviceName: \"createGate\",\r\n        content: newGateReq\r\n      })\r\n    };\r\n    \r\n    fetch(server_URL, requestOptions)\r\n    .then(async (response) => {\r\n      const data = await response.json();\r\n  \r\n      // check for error response\r\n      if (!response.ok) {\r\n        // get error message from body or default to response status\r\n        const error = (data && data.message) || response.status;\r\n        return Promise.reject(error);\r\n      }\r\n      let newGate = {\r\n        ...newGateReq,\r\n        gateID: data.message.gateID\r\n      }\r\n      setGates((prevGates) => \r\n        prevGates.concat(newGate)\r\n      );\r\n    })\r\n    .catch((error) => {\r\n      this.setState({ errorMessage: error.toString() });\r\n      console.error(\"There was an error!\", error);\r\n    });\r\n  };\r\n\r\n  const handleAddDevice = () => {\r\n    const newDeviceReq = {\r\n      gateName: \"Gate\",\r\n      gateType: \"entry\",\r\n      isOpenForInvalid: false,\r\n      isOpenForTemp: false,\r\n      isChargeable: false,\r\n      ledOnTime: \"00:00:00\",\r\n      ledOffTime: \"00:00:00\"\r\n    }\r\n    const requestOptions = {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        authID: \"\",\r\n        serviceName: \"createDevice\",\r\n        content: newDeviceReq\r\n      })\r\n    };\r\n    \r\n    fetch(server_URL, requestOptions)\r\n    .then(async (response) => {\r\n      const data = await response.json();\r\n  \r\n      // check for error response\r\n      if (!response.ok) {\r\n        // get error message from body or default to response status\r\n        const error = (data && data.message) || response.status;\r\n        return Promise.reject(error);\r\n      }\r\n      let newDevice = {\r\n        ...newDeviceReq,\r\n        gateID: data.message.gateID\r\n      }\r\n      setDevices((prevDevices) => \r\n        prevDevices.concat(newDevice)\r\n      );\r\n    })\r\n    .catch((error) => {\r\n      this.setState({ errorMessage: error.toString() });\r\n      console.error(\"There was an error!\", error);\r\n    });\r\n  };\r\n\r\n  const delGate = (id) => {};\r\n\r\n  const delDevice = (id) => {};\r\n\r\n  return (\r\n    <div>\r\n      <div>\r\n      {info.type === null? null:(\r\n        info.type === \"gate\"? \r\n        <GateModal \r\n        id={info.id}\r\n        toggleModal={\r\n          ()=>setInfo({\r\n            type: null,\r\n            id: null\r\n          })}\r\n          />\r\n          :\r\n          null\r\n      )}\r\n      </div>\r\n      <div className=\"gateContainer\">\r\n        <div id=\"gateHeader\">\r\n          <h4>Gates</h4>\r\n        </div>\r\n        <div id=\"addGate\">\r\n          <IconButton aria-label=\"add\" onClick={handleAddGate}>\r\n            <AddIcon style={{ color: \"#4caf50\" }} />\r\n          </IconButton>\r\n        </div>\r\n        <div className=\"deviceTab cardDiv align-items-center d-flex\">\r\n          <CardDeck>\r\n            {gates.map((gate) => (\r\n              <Card style={{ width: \"200px\" }}>\r\n                <div id=\"delGate\">\r\n                  <IconButton onClick={() => delGate(gates.gateID)}>\r\n                    <HighlightOffIcon style={{ color: \"#d32f2f\" }} />\r\n                  </IconButton>\r\n                </div>\r\n                <Card.Body>\r\n                  <Card.Title>{gate.gateName}</Card.Title>\r\n                  <Card.Img\r\n                    variant=\"top\"\r\n                    src={\r\n                      gate.gateType === \"Entry\"\r\n                        ? \"../../assets/entry.jpg\"\r\n                        : \"../../assets/exit.png\"\r\n                    }\r\n                  />\r\n                </Card.Body>\r\n                <ButtonGroup>\r\n                  <Button\r\n                    variant=\"primary\"\r\n                    onClick={() => {\r\n                      setCurGate(gate.gateID);\r\n                    }}\r\n                  >\r\n                    Devices\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"warning\"\r\n                    onClick={() => {\r\n                      setInfo({\r\n                        type: \"gate\",\r\n                        id: gate.gateID\r\n                      });\r\n                    }}\r\n                  >\r\n                    Info\r\n                  </Button>\r\n                </ButtonGroup>\r\n              </Card>\r\n            ))}\r\n          </CardDeck>\r\n        </div>\r\n      </div>\r\n      {curGate === null ? null : \r\n      <div className=\"deviceContainter\">\r\n        <div id=\"gateHeader\">\r\n          <h4>Devices</h4>\r\n        </div>\r\n        <div id=\"addGate\">\r\n          <IconButton aria-label=\"add\" onClick={handleAddDevice}>\r\n            <AddIcon style={{ color: \"#4caf50\" }} />\r\n          </IconButton>\r\n        </div>\r\n        <div className=\"deviceTab cardDiv align-items-center d-flex\">\r\n          <CardDeck>\r\n            {devices.map((device) => (\r\n              <Card style={{ width: \"200px\" }}>\r\n                <div id=\"delGate\">\r\n                  <IconButton onClick={() => delDevice(device.deviceID)}>\r\n                    <HighlightOffIcon style={{ color: \"#d32f2f\" }} />\r\n                  </IconButton>\r\n                </div>\r\n                <Card.Body>\r\n                  <Card.Title>{device.deviceName}</Card.Title>\r\n                  <Card.Img\r\n                    variant=\"top\"\r\n                    src={\r\n                      device.deviceType === \"Entry\"\r\n                        ? \"../../assets/entry.jpg\"\r\n                        : \"../../assets/exit.png\"\r\n                    }\r\n                  />\r\n                </Card.Body>\r\n              </Card>\r\n            ))}\r\n          </CardDeck>\r\n        </div>\r\n      </div>\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default { Devices };\r\n"]},"metadata":{},"sourceType":"module"}